import{_ as te}from"./BalAsset-68194947.js";import{d as M,o as l,a as n,a3 as p,a4 as h,aE as c,B as v,w as z,aD as S,T,C as o,n as K,t as H,eH as se,b8 as q,b as d,U as R,f as Q,aY as ae,E as m,aA as re,c as L,bc as le,a1 as oe,cq as E,a8 as O,cf as F,et as ne,ec as ie,e as G}from"./index-60943df8.js";const ue=["onClick"],J=M({__name:"BalTableRow",props:{columns:{},onRowClick:{type:Function},data:{},link:{},href:{},sticky:{},isColumnStuck:{type:Boolean},pinned:{type:Boolean}},setup($){const k=$;function w(a,i=!1){var r;(r=k.link)!=null&&r.to||k.onRowClick&&k.onRowClick(a,i)}function s(a){return a!==0?"":k.sticky==="horizontal"||k.sticky==="both"?"horizontalSticky":""}function b(a,i){var r;a.isCheckbox&&((r=i.target)==null?void 0:r.type)!=="checkbox"&&(i.preventDefault(),i.stopPropagation())}return(a,i)=>(l(),n("tr",{class:c(["bg-white z-10 row-bg group",{"cursor-pointer":w,"border-b dark:border-gray-700":a.pinned}]),onClick:[i[0]||(i[0]=q(r=>w(a.data),["exact"])),i[1]||(i[1]=q(r=>w(a.data,!0),["meta"])),i[2]||(i[2]=q(r=>w(a.data,!0),["ctrl"]))]},[(l(!0),n(p,null,h(a.columns,(r,f)=>{var B,g;return l(),n("td",{key:r.id+f,class:c([r.align==="right"?"text-left":"text-right",s(f),a.isColumnStuck?"isSticky":"",r.isCheckbox?"cursor-default":""]),onClick:N=>b(r,N)},[(l(),v(se((B=a.href)!=null&&B.getHref(a.data)?"a":a.link?"router-link":"div"),{to:a.link?{name:a.link.to,params:a.link.getParams(a.data)}:null,href:(g=a.href)==null?void 0:g.getHref(a.data)},{default:z(()=>[r.Cell?S(a.$slots,r.Cell,T({key:0,ref_for:!0},a.data)):(l(),n("div",{key:1,class:c(o(K.compact)(["mr-6 py-4",r.align==="right"?"text-right":"text-left",r.cellClassName]))},H(typeof r.accessor=="string"?a.data[r.accessor]:r.accessor(a.data)),3))]),_:2},1032,["to","href"]))],10,ue)}),128))],2))}}),de=d("span",{class:"font-semibold text-left"}," Total ",-1),fe=[de],ce=M({__name:"TotalsRow",props:{isColumnStuck:{type:Boolean},onRowClick:{type:Function},sticky:{},columns:{}},setup($){const k=$;function w(s){return s!==0?"":k.sticky==="horizontal"||k.sticky==="both"?"horizontalSticky":""}return(s,b)=>(l(),n("tbody",null,[d("tr",{class:c(["bg-white z-10 row-bg group",{"cursor-pointer":!!k.onRowClick}])},[d("td",{class:c([w(0),s.isColumnStuck?"isSticky":"","text-left p-6 bg-white dark:bg-gray-850 border-t dark:border-gray-900 align-top"])},fe,2),(l(!0),n(p,null,h(o(K.tail)(s.columns),(a,i)=>(l(),n("td",{key:a.id,class:c([a.align==="right"?"text-left":"text-right",w(i+1),s.isColumnStuck?"isSticky":"","p-6 bg-white dark:bg-gray-850 border-t dark:border-gray-900"])},[a.totalsCell?S(s.$slots,a.totalsCell,{key:0}):R("",!0)],2))),128))],2)]))}}),ke="/assets/pin-efd817f5.svg",ye={class:"px-6 pt-4 pb-2"},pe=["src"],ge=d("span",{class:"text-secondary text-medium"},"Pinned",-1),he=M({__name:"PinHeader",setup($){return(k,w)=>{const s=ae;return l(),n("tr",null,[d("td",ye,[Q(s,{horizontal:"",spacing:"sm"},{default:z(()=>[d("img",{src:o(ke)},null,8,pe),ge]),_:1})])])}}}),we={class:"w-full whitespace-normal table-fixed"},ve={class:"z-10 bg-white dark:bg-gray-900"},be=["onClick"],Ce={key:1},me={class:"text-base"},Re={key:1,class:"flex justify-start items-center p-6 max-w-full h-24 bg-white dark:bg-gray-850 row-bg text-secondary"},Se={key:2,class:"w-full whitespace-normal table-fixed"},_e=M({__name:"BalTable",props:{columns:{},data:{},rowKey:{},isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},skeletonClass:{default:""},onRowClick:{},sticky:{},square:{type:Boolean,default:!1},isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""},link:{default:null},href:{default:null},initialState:{default:()=>({sortColumn:null,sortDirection:null})},pin:{},getTableRowClass:{type:Function,default:()=>""},isOnlyDescSort:{type:Boolean,default:!1},renderedRowsIdx:{}},emits:["loadMore","onColumnSort"],setup($,{emit:k}){var U,Y;const w=k,s=$,b=m(),a=m(!1),i=m(s.data),r=m(((U=s.initialState)==null?void 0:U.sortDirection)||null),f=m(((Y=s.initialState)==null?void 0:Y.sortColumn)||null),B=m(),g=m(),N=re(s,"getTableRowClass"),X=L(()=>K.sumBy(s.columns,"width")),V=e=>e!==0?"":s.sticky==="horizontal"||s.sticky==="both"?"horizontalSticky":"",j=(e,y=!0)=>{const _=s.columns.find(u=>u.id===e);if(!(_!=null&&_.sortKey))return;e!==f.value&&(r.value=null),f.value=e,y&&Z(),e&&r.value&&w("onColumnSort",e);const t=K.sortBy(s.data.value||s.data,_.sortKey);if(r.value==="asc"){i.value=t;return}if(r.value==="desc"){i.value=t.reverse();return}i.value=s.data};function Z(){if(s.isOnlyDescSort){r.value="desc";return}if(r.value===null){r.value="desc";return}if(r.value==="desc"){r.value="asc";return}r.value=null}function x(e){switch(e){case"left":return"justify-start";case"right":return"justify-end";case"center":return"justify-center";default:return"justify-start"}}function W(e,y){return s.rowKey?`tableRow-${s.rowKey(e)}`:`tableRow-${e.id??y}`}le(()=>{g.value&&(g.value.onscroll=()=>{if(g.value&&b.value){const e=g.value.offsetWidth/b.value.offsetWidth/10;a.value=b.value.offsetLeft>b.value.offsetWidth*e}},g.value.addEventListener("scroll",()=>{g.value&&B.value&&(B.value.scrollLeft=g.value.scrollLeft)})),j(f.value,!1)});const I=L(()=>s.pin?(i.value||[]).filter(e=>{var y;return!((y=s.pin)!=null&&y.pinnedData.includes(e[s.pin.pinOn]))}):i.value),A=L(()=>s.pin?(i.value||[]).filter(e=>{var y;return(y=s.pin)==null?void 0:y.pinnedData.includes(e[s.pin.pinOn])}):[]),C=L(()=>s.columns.filter(e=>!e.hidden)),ee=L(()=>s.columns.some(e=>e.totalsCell!==void 0));return oe([()=>s.data,()=>s.isLoading],([e])=>{if(f.value&&r.value!==null){j(f.value,!1);return}i.value=e}),(e,y)=>{const _=te;return l(),n(p,null,[d("div",{class:c(["max-w-full whitespace-nowrap","max-lg:overflow-hidden",{"rounded-lg":!e.square}])},[d("div",{ref_key:"headerRef",ref:B,class:"max-lg:overflow-hidden"},[d("table",we,[d("colgroup",null,[(l(!0),n(p,null,h(o(C),t=>(l(),n("col",{key:t.id,style:E({width:`${t==null?void 0:t.width}px`})},null,4))),128))]),d("thead",ve,[(l(!0),n(p,null,h(o(C),(t,u)=>(l(),n("th",{key:`header-${t.id}`,ref_for:!0,ref:u==0?"stickyHeaderRef":void 0,class:c(["p-6 bg-white dark:bg-gray-850 headingShadow border-b dark:border-gray-900",t.className,V(u),o(a)?"isSticky":"",t.sortKey&&!(s.isOnlyDescSort&&o(f)===t.id)?"cursor-pointer":"",t.sortKey&&o(f)!==t.id?"text-gray-800 hover:text-purple-600 focus:text-blue-500 dark:text-gray-100 dark:hover:text-yellow-500 dark:focus:text-yellow-500 transition-colors":"",o(f)===t.id&&o(r)?"text-blue-600 hover:text-blue-500 focus:text-purple-600 dark:text-blue-400 dark:hover:text-blue-600 dark:focus:text-blue-600 transition-colors":"",e.square?"":"rounded-t-lg"]),onClick:P=>j(t.id)},[d("div",{class:c(["flex",x(t.align)])},[t.Header?S(e.$slots,t.Header,T({key:0,ref_for:!0},t)):(l(),n("div",Ce,[d("h5",me,H(t.name),1)])),o(f)===t.id&&o(r)==="asc"?(l(),v(O,{key:2,name:"arrow-up",size:"sm",class:"flex items-center ml-1"})):R("",!0),o(f)===t.id&&o(r)==="desc"?(l(),v(O,{key:3,name:"arrow-down",size:"sm",class:"flex items-center ml-1"})):R("",!0)],2)],10,be))),128))])])],512),d("div",{ref_key:"bodyRef",ref:g,class:"max-lg:overflow-auto"},[e.isLoading?(l(),v(_,{key:0,class:c([e.skeletonClass,"min-w-full"]),square:"",style:E({width:`${o(X)}px`})},null,8,["class","style"])):!e.isLoading&&!o(i).length?(l(),n("div",Re,H(e.noResultsLabel||e.$t("noResults")),1)):(l(),n("table",Se,[d("colgroup",null,[(l(!0),n(p,null,h(o(C),t=>(l(),n("col",{key:t.id,style:E({width:`${t==null?void 0:t.width}px`})},null,4))),128))]),d("tr",null,[(l(!0),n(p,null,h(o(C),(t,u)=>(l(),n("td",{key:t.id,class:c([t.align==="right"?"text-left":"text-right",V(u),o(a)?"isSticky":"","bg-white dark:bg-gray-850 p-0 m-0 h-0"])},null,2))),128))]),o(A).length?(l(),v(he,{key:0})):R("",!0),(l(!0),n(p,null,h(o(A),(t,u)=>(l(),v(J,{key:W(t,u),class:c(o(N)(t,u)),data:t,columns:o(C),onRowClick:e.onRowClick,link:e.link,href:e.href,sticky:e.sticky,isColumnStuck:o(a),pinned:""},F({_:2},[h(e.$slots,(P,D)=>({name:D,fn:z(()=>[S(e.$slots,D,T({ref_for:!0},t))])}))]),1032,["class","data","columns","onRowClick","link","href","sticky","isColumnStuck"]))),128)),(l(!0),n(p,null,h(o(I),(t,u)=>(l(),n(p,{key:W(t,u)},[!e.renderedRowsIdx||u<=e.renderedRowsIdx?(l(),v(J,{key:0,class:c(s.getTableRowClass?s.getTableRowClass(t,u):void 0),data:t,columns:o(C),onRowClick:e.onRowClick,link:e.link,href:e.href,sticky:e.sticky,isColumnStuck:o(a)},F({default:z(()=>[S(e.$slots,"named",T({ref_for:!0},t))]),_:2},[h(e.$slots,(P,D)=>({name:D,fn:z(()=>[S(e.$slots,D,T({ref_for:!0},t))])}))]),1032,["class","data","columns","onRowClick","link","href","sticky","isColumnStuck"])):R("",!0)],64))),128)),!e.isLoading&&o(i).length&&o(ee)?(l(),v(ce,{key:1,columns:o(C),onRowClick:e.onRowClick,sticky:e.sticky,isColumnStuck:o(a)},F({_:2},[h(e.$slots,(t,u)=>({name:u,fn:z(P=>[S(e.$slots,u,ne(ie(P)))])}))]),1032,["columns","onRowClick","sticky","isColumnStuck"])):R("",!0)]))],512)],2),e.isPaginated&&!e.isLoading?(l(),n("div",{key:0,class:"bal-table-pagination-btn text-secondary",onClick:y[0]||(y[0]=t=>!e.isLoadingMore&&e.$emit("loadMore"))},[e.isLoadingMore?(l(),n(p,{key:0},[G(H(e.$t("loading")),1)],64)):(l(),n(p,{key:1},[G(H(e.$t("loadMore"))+" ",1),Q(O,{name:"chevron-down",size:"sm",class:"ml-2"})],64))])):R("",!0)],64)}}});export{_e as _};
//# sourceMappingURL=BalTable.vue_vue_type_style_index_0_lang-bf21b918.js.map
