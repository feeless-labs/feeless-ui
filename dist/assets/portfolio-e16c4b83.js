import{d as A,k as Y,o,B as g,w as y,b as p,t as _,C as e,bs as ae,f as m,a0 as le,ay as ie,a7 as F,ap as X,u as I,c as b,br as J,a as P,e as O,U as x,am as ye,an as Pe,E as B,x as re,j as ce,fP as se,a1 as be,aC as ue,aY as D,bc as we,_ as Be,aD as Se,bg as xe,d4 as $e,y as Ae,F as z,fC as Le,aE as Ce,a3 as ne}from"./index-60943df8.js";import{P as G,a as Q,_ as Me}from"./UserInvestedInAffectedPoolAlert.vue_vue_type_script_setup_true_lang-3926eecf.js";import{a as de,c as Z,u as ee,p as Ve,b as Ne}from"./user-pools.provider-31628f0d.js";import{_ as K}from"./StakePreviewModal.vue_vue_type_script_setup_true_lang-d41a00fd.js";import{p as pe}from"./pool-staking.provider-018db08c.js";import{_ as Te}from"./BalAlert-7103ffb1.js";import{_ as Ee}from"./CheckpointGaugeModal.vue_vue_type_script_setup_true_lang-2cec8479.js";import{_ as Re}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-cd43f961.js";import{_ as Ue}from"./BalTooltip.vue_vue_type_style_index_0_lang-8cf64573.js";import{_ as Ge}from"./BalAsset-68194947.js";import"./BalTable.vue_vue_type_style_index_0_lang-bf21b918.js";import"./BalAssetSet-c1957457.js";import"./constants-5d025550.js";import"./APRTooltip.vue_vue_type_script_setup_true_lang-7ca94d25.js";import"./useDisabledJoinPool-1947dad7.js";import"./BalVStack.vue_vue_type_script_setup_true_lang-a25ce916.js";import"./BalHStack.vue_vue_type_script_setup_true_lang-f88d7582.js";import"./useBreakpoints-76e5f77c.js";import"./TokenPills.vue_vue_type_script_setup_true_lang-ee78290c.js";import"./tokens_black-ddc115cd.js";import"./BalChip-810690c3.js";import"./BalChipNew.vue_vue_type_script_setup_true_lang-42797145.js";import"./PoolWarningTooltip.vue_vue_type_script_setup_true_lang-d116052e.js";import"./PoolFeatureChip.vue_vue_type_script_setup_true_lang-913aa74f.js";import"./usePoolQuery-da6fa219.js";import"./BalCircle-528e0679.js";import"./ConfirmationIndicator.vue_vue_type_script_setup_true_lang-e065ab89.js";import"./BalDataListRow.vue_vue_type_script_setup_true_lang-bc4f6b21.js";import"./useTokenApprovalActions-885c33f2.js";import"./FeedbackCard.vue_vue_type_script_setup_true_lang-f0ae37aa.js";import"./anime.es-37453147.js";const Ie={class:"flex flex-col text-left"},We=p("p",{class:"mb-5 whitespace-pre-line"}," The sync veBAL operation needs to be performed on Ethereum Mainnet, since that is where your veBAL balance lives. ",-1),je={class:"mb-5 whitespace-pre-line"},me=A({__name:"ProceedToSyncModal",props:{isVisible:{type:Boolean}},emits:["close"],setup(w){const{networkId:t,getNetworkSlug:a}=Y();return(n,l)=>{const u=F;return o(),g(ie,{ref:"redirectModal",show:n.isVisible,onClose:l[1]||(l[1]=c=>n.$emit("close"))},{header:y(()=>[p("h3",null,_(n.$t("modals.veBalRedirectModal.title")),1)]),default:y(()=>[p("div",Ie,[We,p("p",je," Ethereum Mainnet to "+_(e(ae)[e(t)].chainName)+" will enable you to get boosted APR’s for any pools where you stake in the new boost-aware gauges. ",1),m(u,{label:"Go to Ethereum Mainnet",color:"gradient",onClick:l[0]||(l[0]=c=>n.$router.push({name:"vebal",params:{networkSlug:e(a)(e(le).MAINNET)}}))})])]),_:1},8,["show"])}}}),Oe={class:"flex items-center"},Fe={class:"flex-[2]"},De={key:0,class:"flex flex-1 justify-end"},qe={key:1,class:"flex flex-1 justify-end"},He=A({__name:"PortfolioSyncTip",props:{shouldPokePoolsMap:{}},emits:["showProceedModal","showPokeAllGaugeModal"],setup(w){const t=w,{networksSyncState:a,tempSyncingNetworks:n,l2VeBalBalances:l,isLoading:u}=X(),{networkId:c}=Y(),{account:i}=I(),s=b(()=>{var f;if(u.value)return null;const r=a.value[c.value];if(r===J.Unsynced&&!!n.value[i.value]&&n.value[i.value].networks.includes(c.value))return Number((f=l.value)==null?void 0:f[c.value])>0?{title:"Resync if you acquire new veBAL",text:"Newly acquired veBAL doesn’t auto-sync to L2s. Remember to resync on Ethereum Mainnet after acquiring more veBAL to continue boosting to your max."}:{title:"Sync your veBAL to maximize your boost",text:"If you have veBAL, sync your veBAL balance from Ethereum Mainnet to max your boost while staking on Arbitrum. Resync after acquiring more veBAL to continue boosting to your max."};if(Object.keys(t.shouldPokePoolsMap||{}).length>0)return{title:"Poke to refresh gauges for boosted APRs",text:"After your veBAL is synced to an L2, the pool gauge remains unaware of your new balance until it is interacted with. ‘Poke all’ to gas-efficiently update all gauges. Otherwise, interact with each gauge individzually (e.g. by Claiming BAL).",showPokeAllBtn:!0,hideBtn:!0};if(r===J.Synced)return{title:"Trigger pool gauge updates to get your boosts",text:"Pool gauges don’t automatically recognize changes in veBAL until triggered. Updates are triggered when you interact with a gauge (e.g. by claiming BAL, stake/unstake or explicitly update the gauge on each individual pool page)",hideBtn:!0}});return(r,v)=>{const d=F,f=Te;return e(s)?(o(),g(f,{key:0,title:e(s).title,type:"tip",class:"mb-5 w-100"},{default:y(()=>[p("div",Oe,[p("div",Fe,_(e(s).text),1),e(s).showPokeAllBtn?(o(),P("div",De,[m(d,{color:"gradient",onClick:v[0]||(v[0]=$=>r.$emit("showPokeAllGaugeModal"))},{default:y(()=>[O(" Poke all gauges ")]),_:1})])):e(s).hideBtn?x("",!0):(o(),P("div",qe,[m(d,{color:"gradient",onClick:v[1]||(v[1]=$=>r.$emit("showProceedModal"))},{default:y(()=>[O(" Sync veBAL ")]),_:1})]))])]),_:1},8,["title"])):x("",!0)}}}),ze={class:"flex flex-col justify-between"},Je=p("div",{class:"mb-12"},[p("span",{class:"mb-3"}," Even after syncing veBAL to an L2, pool gauges remains unaware of your new balance until interacted with. This means, you are currently missing out on your maximum possible boost. "),p("span",null," ‘Poke gauge’ to gas-efficiently update the gauge with your new veBAL balance. Otherwise, interact with a gauge to trigger the update. If you already have accumulated some incentives, ‘Claim BAL’ to get your incentives and trigger the update for future boosts. ")],-1),Ke=A({__name:"CheckpointAllGaugesModal",props:{isVisible:{type:Boolean,default:!1},shouldPokePoolsMap:{}},emits:["close","success"],setup(w,{emit:t}){const a=w,n=t,{checkpointAllGauges:l}=de(),{addTransaction:u}=ye(),{isMismatchedNetwork:c}=I(),{txListener:i}=Pe(),s=B(!1);async function r(){try{const d=await l(Object.values(a.shouldPokePoolsMap));return u({id:d.hash,type:"tx",action:"userGaugeCheckpoint",summary:""}),await i(d,{onTxConfirmed:async()=>{n("success")},onTxFailed:()=>{console.error("Tx failed")}}),d}catch(d){return console.error(d),Promise.reject(d)}}const v=[{label:"Poke all gauges",loadingLabel:"Confirm poke in wallet",confirmingLabel:"Confirming poke",action:async()=>r(),stepTooltip:""}];return(d,f)=>{const $=Re,M=F,L=ie;return o(),g(L,{show:d.isVisible,disabled:e(c),title:"Poke all gauges to get boosted APRs",onClose:f[2]||(f[2]=C=>n("close"))},{default:y(()=>[p("div",ze,[Je,m($,{actions:v,primaryActionType:"userGaugeCheckpoint",onSuccess:f[0]||(f[0]=C=>s.value=!0)}),e(s)?(o(),g(M,{key:0,color:"gray",outline:"",block:"",onClick:f[1]||(f[1]=C=>d.$emit("close"))},{default:y(()=>[O(_(d.$t("close")),1)]),_:1})):x("",!0)])]),_:1},8,["show","disabled"])}}}),Ye={class:"px-4 xl:px-0"},Xe=A({__name:"StakedPoolsTable",setup(w){const t=B(!1),a=B(),n=B(!1),l=B(),u=B(!1),c=[G.Unstake,G.Add,G.Vote],i=B(!1),s=B(),r=B(!1);pe();const{stakedPools:v,poolBoostsMap:d,stakedShares:f,isLoading:$,hasNonPrefGaugesPoolsAddresses:M,userGaugeShares:L}=de(),{shouldPokeGauge:C}=X(),{refetchAllUserPools:E}=Z(),{isWalletReady:S,isWalletConnecting:V}=I(),{t:N}=re(),q=ce.network.shortName,W=b(()=>S.value||V.value?N("noStakedInvestments",[q]):N("connectYourWallet")),j=b(()=>{const h=["poolVolume","migrate","lockEndDate","volume"];return se.value||h.push("myBoost"),h}),H=b(()=>JSON.stringify(v.value));function he(h){t.value=!0,a.value=h}function fe(h){n.value=!0,l.value=h}function oe(){E(),t.value=!1,n.value=!1}function ke(h){r.value=!0,s.value=h}async function te(){await E()}const R=B({});function _e(h){Reflect.deleteProperty(R.value,h)}function ge(){R.value={}}function ve(h){r.value=!1,s.value=void 0,_e(h)}return be(()=>L.value,async h=>{if(!(!h||ue.value)){console.log("userGaugeShares",h);for(const k of h)try{const T=k==null?void 0:k.gauge.id;if(!T)throw new Error("No gauge id");await C(T)&&(R.value[k.gauge.poolAddress]=T)}catch(T){console.log(T)}}},{immediate:!0,deep:!0}),(h,k)=>{const T=D;return o(),P("div",null,[m(T,{vertical:"",spacing:"sm"},{default:y(()=>[p("h5",Ye,_(h.$t("staking.stakedPools")),1),m(He,{shouldPokePoolsMap:e(R),onShowProceedModal:k[0]||(k[0]=U=>u.value=!0),onShowPokeAllGaugeModal:k[1]||(k[1]=U=>i.value=!0)},null,8,["shouldPokePoolsMap"]),(o(),g(Q,{key:e(H),data:e(v),shares:e(f),boosts:e(d),poolsType:"staked",noPoolsLabel:e(W),hiddenColumns:e(j),sortColumn:"myBalance",isLoading:e(S)&&e($),showPoolShares:"",showActions:"",showStakeActions:"",showBoost:e(se),defaultPoolActions:c,shouldPokePoolsMap:e(R),hasNonPrefGaugesPoolsAddresses:e(M),onTriggerUnstake:he,onTriggerRestake:fe,onTriggerVote:k[2]||(k[2]=U=>u.value=!0),onTriggerCheckpoint:ke},null,8,["data","shares","boosts","noPoolsLabel","hiddenColumns","isLoading","showBoost","shouldPokePoolsMap","hasNonPrefGaugesPoolsAddresses"]))]),_:1}),e(a)?(o(),g(K,{key:0,pool:e(a),isVisible:e(t),action:"unstake",onClose:oe,onSuccess:te},null,8,["pool","isVisible"])):x("",!0),e(l)?(o(),g(K,{key:1,pool:e(l),isVisible:e(n),action:"restake",onClose:oe,onSuccess:te},null,8,["pool","isVisible"])):x("",!0),m(me,{isVisible:e(u),onClose:k[3]||(k[3]=U=>u.value=!1)},null,8,["isVisible"]),m(Ke,{shouldPokePoolsMap:e(R),isVisible:e(i),onClose:k[4]||(k[4]=U=>i.value=!1),onSuccess:ge},null,8,["shouldPokePoolsMap","isVisible"]),e(s)?(o(),g(Ee,{key:2,poolAddress:e(s).address,isVisible:e(r),onClose:k[5]||(k[5]=U=>r.value=!1),onSuccess:ve},null,8,["poolAddress","isVisible"])):x("",!0)])}}}),Qe={class:"px-4 xl:px-0"},Ze=A({__name:"UnstakedPoolsTable",setup(w){const t=B(!1),a=B(),n=ce.network.shortName,l=["poolVolume","migrate","lockEndDate","volume"];pe();const{isWalletReady:u,isWalletConnecting:c}=I(),{t:i}=re(),{unstakedPools:s,userPoolShares:r,refetchAllUserPools:v,isLoading:d}=Z(),f=[G.Stake,G.Add,G.Remove],$=b(()=>u.value||c.value?i("noUnstakedInvestments",[n]):i("connectYourWallet")),M=b(()=>JSON.stringify(s.value));function L(S){t.value=!0,a.value=S}function C(){v(),t.value=!1}async function E(){await v()}return we(()=>{v()}),(S,V)=>{const N=D;return o(),P("div",null,[m(N,{vertical:"",spacing:"sm"},{default:y(()=>[p("h5",Qe,_(S.$t("staking.unstakedPools")),1),(o(),g(Q,{key:e(M),isLoading:e(u)&&e(d),data:e(s),shares:e(r),noPoolsLabel:e($),sortColumn:"myBalance",hiddenColumns:l,defaultPoolActions:f,showPoolShares:"",showActions:"",onTriggerStake:L},null,8,["isLoading","data","shares","noPoolsLabel"]))]),_:1}),e(a)?(o(),g(K,{key:0,pool:e(a),isVisible:e(t),action:"stake",onClose:C,onSuccess:E},null,8,["pool","isVisible"])):x("",!0)])}}}),eo={class:"px-4 xl:px-0"},oo=A({__name:"VeBalPoolTable",props:{lockPool:{},lock:{}},setup(w){const t=w,{totalLockedShares:a}=ee(),n=b(()=>{var i,s,r;return t.lockPool?[{...t.lockPool,lockedEndDate:(i=t.lock)!=null&&i.hasExistingLock&&!((s=t.lock)!=null&&s.isExpired)?(r=t.lock)==null?void 0:r.lockedEndDate:void 0}]:[]}),l=b(()=>({[t.lockPool.id]:a.value})),u=b(()=>JSON.stringify(n.value)),c=["poolVolume","migrate","actions","myBoost"];return(i,s)=>{const r=D;return o(),P("div",null,[m(r,{vertical:"",spacing:"sm"},{default:y(()=>[p("h5",eo,_(i.$t("veBalProtocolLiquidity")),1),(o(),g(Q,{key:u.value,data:n.value,shares:l.value,hiddenColumns:c,sortColumn:"myBalance",showPoolShares:""},null,8,["data","shares"]))]),_:1})])}}}),to="/assets/frame-loading-86d72967.svg";const so={},no={class:"app-hero"},ao={class:"mx-auto w-full max-w-lg"};function lo(w,t){return o(),P("div",no,[p("div",ao,[Se(w.$slots,"default")])])}const io=Be(so,[["render",lo]]),ro=A({__name:"HeroConnectWalletButton",setup(w){const{startConnectWithInjectedProvider:t}=I(),{trackGoal:a,Goals:n}=$e(),{darkMode:l}=xe();function u(){t(),a(n.ClickHeroConnectWallet)}return(c,i)=>{const s=F;return o(),g(s,{color:e(l)?"blue":"white",onClick:u},{default:y(()=>[O(_(c.$t("connectWallet")),1)]),_:1},8,["color"])}}}),co=["textContent"],uo={key:1,class:"mb-1 text-3xl font-semibold text-white"},po={key:2,class:"inline-block relative mt-2"},mo={key:0},ho={key:1},fo={key:2},ko=p("img",{src:to,alt:"",class:"rounded-full"},null,-1),_o={class:"text-3xl font-semibold text-white"},go=A({__name:"PortfolioPageHero",setup(w){const t=B(!1),{fNum:a}=Ae(),{isWalletReady:n,isWalletConnecting:l}=I(),{totalFiatValue:u,isLoading:c}=Z(),{totalLockedValue:i}=ee(),{networkId:s}=Y(),{l2VeBalBalances:r,isLoading:v,networksSyncState:d}=X(),f=b(()=>({"h-48":!n.value&&!l.value,"h-44":n.value||l.value})),$=b(()=>a(u.value,z.fiat)),M=b(()=>a(i.value,z.fiat)),L=b(()=>c.value),C=b(()=>!(!Le.includes(s.value)||d.value[s.value]===J.Synced)),E=b(()=>`Sync your veBAL balance from Ethereum Mainnet (L1) to ${ae[s.value].chainName} to get your max staking boost. Sync via the veBAL page on L1. Note: If you have just synced on L1, it may take up to an hour to display here.`);return(S,V)=>{const N=Ge,q=Ue;return o(),g(io,{class:Ce(f.value)},{default:y(()=>{var W,j;return[p("h1",{class:"mb-2 font-body text-base font-medium text-white opacity-90",textContent:_(S.$t("myBalancerBalance"))},null,8,co),e(n)||e(l)?(o(),P(ne,{key:0},[L.value?(o(),g(N,{key:0,class:"mx-auto w-40 h-10",white:""})):(o(),P("div",uo,_($.value),1)),e(ue)?x("",!0):(o(),P("div",po,[L.value||e(v)?(o(),g(N,{key:0,class:"mx-auto w-40 h-8",white:""})):(o(),P("div",{key:1,class:"group flex items-center px-3 h-8 text-sm font-medium text-yellow-500 hover:text-white focus:text-white rounded-tr rounded-bl border border-yellow-500 transition-colors cursor-pointer vebal-banner",onClick:V[0]||(V[0]=H=>t.value=!0)},[e(s)!==e(le).MAINNET&&Number((W=e(r))==null?void 0:W[e(s)])>0?(o(),P("span",mo,_((j=e(r))==null?void 0:j[e(s)])+" "+_(S.$t("veBAL.hero.tokens.veBAL")),1)):e(i)==="0"?(o(),P("span",ho,_(e(i))+" "+_(S.$t("veBAL.hero.tokens.veBAL")),1)):(o(),P("span",fo,_(S.$t("inclXInVeBal",[M.value])),1)),C.value?(o(),g(q,{key:3,text:E.value},{activator:y(()=>[ko]),_:1},8,["text"])):x("",!0)]))]))],64)):(o(),P(ne,{key:1},[p("div",_o,_(e(a)("0",e(z).fiat)),1),m(ro,{class:"mt-4"})],64)),m(me,{isVisible:e(t),onClose:V[1]||(V[1]=H=>t.value=!1)},null,8,["isVisible"])]}),_:1},8,["class"])}}});const vo={class:"xl:container xl:px-4 pt-10 md:pt-12 xl:mx-auto"},yo={class:"px-4 xl:px-0"},Qo=A({__name:"portfolio",setup(w){const t=Ve();Ne(t);const{lockPool:a,lock:n}=ee();return(l,u)=>{const c=D;return o(),P("div",null,[m(go),p("div",vo,[m(c,{vertical:""},{default:y(()=>[m(Me),p("div",yo,[m(c,{horizontal:"",justify:"between",align:"center"},{default:y(()=>[p("h3",null,_(l.$t("myLiquidityInBalancerPools")),1)]),_:1})]),m(c,{vertical:"",spacing:"2xl"},{default:y(()=>{var i;return[m(Ze),m(Xe),e(a)&&Number((i=e(n))==null?void 0:i.lockedAmount)>0?(o(),g(oo,{key:0,lock:e(n),lockPool:e(a)},null,8,["lock","lockPool"])):x("",!0)]}),_:1})]),_:1})])])}}});export{Qo as default};
//# sourceMappingURL=portfolio-e16c4b83.js.map
