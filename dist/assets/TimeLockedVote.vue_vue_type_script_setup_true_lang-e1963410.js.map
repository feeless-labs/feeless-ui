{"version":3,"file":"TimeLockedVote.vue_vue_type_script_setup_true_lang-e1963410.js","sources":["../../src/components/chips/BalChipExpired.vue","../../src/components/_global/icons/TimelockIcon.vue","../../src/components/contextual/pages/vebal/MultiVoting/composables/useVotingWarnings.ts","../../src/components/contextual/pages/vebal/MultiVoting/TimeLockedVote.vue"],"sourcesContent":["<script setup lang=\"ts\">\ntype Props = {\n  size?: 'sm' | 'md' | 'lg';\n};\n\n/**\n * PROPS & EMITS\n */\nconst props = withDefaults(defineProps<Props>(), {\n  size: 'sm',\n});\n</script>\n\n<template>\n  <BalChip v-bind=\"props\" color=\"red\" class=\"uppercase\" :outline=\"false\">\n    {{ $t('expired') }}\n  </BalChip>\n</template>\n","<template>\n  <svg width=\"20\" height=\"20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M17 14.2h-4.1a.5.5 0 0 0-.5.5V17a.5.5 0 0 0 .5.5H17a.5.5 0 0 0 .5-.5v-2.3a.5.5 0 0 0-.5-.5Zm-4.1-1.5a2 2 0 0 0-2 2V17a2 2 0 0 0 2 2H17a2 2 0 0 0 2-2v-2.3a2 2 0 0 0-2-2h-4.1Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M14.915 10.75c-.271 0-.53.107-.72.295a.993.993 0 0 0-.295.705v1.4a.75.75 0 0 1-1.5 0v-1.4c0-.665.266-1.302.739-1.77a2.522 2.522 0 0 1 3.552 0c.472.468.738 1.105.738 1.77v1.4a.75.75 0 0 1-1.5 0v-1.4a.993.993 0 0 0-.295-.705 1.023 1.023 0 0 0-.72-.295Z\"\n      fill=\"currentColor\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M11.55 2.686a7.328 7.328 0 0 0-3.9.172 7.404 7.404 0 0 0-3.276 2.157 7.535 7.535 0 0 0-1.737 3.551 7.584 7.584 0 0 0 .294 3.954 7.501 7.501 0 0 0 2.242 3.247 7.372 7.372 0 0 0 3.556 1.637.75.75 0 1 1-.242 1.48 8.872 8.872 0 0 1-4.28-1.97 9.001 9.001 0 0 1-2.69-3.895 9.084 9.084 0 0 1-.353-4.736 9.035 9.035 0 0 1 2.084-4.258 8.904 8.904 0 0 1 3.94-2.594 8.828 8.828 0 0 1 4.698-.207 8.884 8.884 0 0 1 4.149 2.237 9.016 9.016 0 0 1 2.443 4.058.75.75 0 0 1-1.443.41A7.516 7.516 0 0 0 15 4.546a7.385 7.385 0 0 0-3.448-1.86ZM10 4.3a.75.75 0 0 1 .75.75v4.7a1 1 0 0 1-1 1h-4.7a.75.75 0 0 1 0-1.5h4.2v-4.2A.75.75 0 0 1 10 4.3Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","import { bnum, scale } from '@/lib/utils';\n\nimport { VotingPool } from '@/composables/queries/useVotingPoolsQuery';\nimport {\n  isVotingTimeLocked,\n  remainingVoteLockTime,\n} from '@/composables/useVeBAL';\nimport { isVeBalPool } from '@/composables/usePoolHelpers';\n\nexport function useVotingWarnings(pool: VotingPool) {\n  const isVeBalGauge = isVeBalPool(pool.id);\n\n  // Is votes next period value above voting cap?\n  const votesNextPeriodOverCap = computed((): boolean => {\n    const gaugeVoteWeightNormalized = scale(pool.votesNextPeriod, -18);\n    if (isVeBalGauge) {\n      const veBalMaxVotingWeight = '0.1';\n      return gaugeVoteWeightNormalized.gte(bnum(veBalMaxVotingWeight));\n    }\n    if (!pool.gauge.relativeWeightCap) return false;\n\n    return gaugeVoteWeightNormalized.gte(bnum(pool.gauge.relativeWeightCap));\n  });\n\n  const lpVoteOverLimitWarning = computed(() => {\n    const formattedGaugeVoteCap = (\n      Number(pool.gauge.relativeWeightCap) * 100\n    ).toFixed();\n\n    if (votesNextPeriodOverCap.value) {\n      if (isVeBalGauge) {\n        return {\n          title: 'You may be wasting your vote: veBAL cap hit',\n          description:\n            'Distributions to veBAL holders of weekly emissions are capped at 10%. Any votes exceeding this amount at Thursday 0:00 UTC will not be counted.',\n        };\n      } else {\n        return {\n          title: 'You may be wasting your vote',\n          description: `Distributions to LPs of this pool gauge are capped at ${formattedGaugeVoteCap}%. Any votes exceeding this amount at Thursday 0:00 UTC will not be counted.`,\n        };\n      }\n    }\n\n    return null;\n  });\n\n  const timeLockedVoteWarning = computed(() => {\n    if (isVotingTimeLocked(pool.lastUserVoteTime)) {\n      const remainingTime = remainingVoteLockTime(pool.lastUserVoteTime);\n      return {\n        title: 'Votes are locked for 10 days',\n        description: `You won't be able to make any edits to this vote allocation for ${remainingTime}`,\n      };\n    }\n    return null;\n  });\n\n  return {\n    lpVoteOverLimitWarning,\n    timeLockedVoteWarning,\n  };\n}\n","\n<script setup lang=\"ts\">\nimport { VotingPool } from '@/composables/queries/useVotingPoolsQuery';\nimport { useVotingWarnings } from './composables/useVotingWarnings';\n\ntype Props = {\n  pool: VotingPool;\n};\n\nconst props = defineProps<Props>();\nconst { timeLockedVoteWarning } = useVotingWarnings(props.pool);\n</script>\n<template>\n  <BalTooltip v-if=\"timeLockedVoteWarning\" textAlign=\"left\">\n    <template #activator>\n      <TimelockIcon />\n    </template>\n    <div>\n      <span class=\"font-semibold\">\n        {{ timeLockedVoteWarning.title }}\n      </span>\n      <p class=\"text-gray-500\">\n        {{ timeLockedVoteWarning.description }}\n      </p>\n    </div>\n  </BalTooltip>\n</template>"],"names":["props","__props","_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","useVotingWarnings","pool","isVeBalGauge","isVeBalPool","votesNextPeriodOverCap","computed","gaugeVoteWeightNormalized","scale","veBalMaxVotingWeight","bnum","lpVoteOverLimitWarning","formattedGaugeVoteCap","timeLockedVoteWarning","isVotingTimeLocked","remainingVoteLockTime"],"mappings":"oWAQA,MAAAA,EAAAC,qJCPOC,EAAA,CAAW,MAAA,KAAY,OAAA,KAAY,KAAA,2CAEpCC,EAAAC,EAAA,OAAA,CACA,YAAA,UACA,YAAA,UACA,EAAA,8MAGAC,EAAAD,EAAA,OAAA,CACA,YAAA,UACA,YAAA,UACA,EAAA,2RAGAE,EAAAF,EAAA,OAAA,CACA,YAAA,UACA,YAAA,UACA,EAAA,2tBCTC,SAAAG,EAAAC,EAAA,CACL,MAAAC,EAAAC,EAAAF,EAAA,EAAA,EAGAG,EAAAC,EAAA,IAAA,CACE,MAAAC,EAAAC,EAAAN,EAAA,gBAAA,GAAA,EACA,GAAAC,EAAA,CACE,MAAAM,EAAA,MACA,OAAAF,EAAA,IAAAG,EAAAD,CAAA,CAAA,CAA+D,CAEjE,OAAAP,EAAA,MAAA,kBAEAK,EAAA,IAAAG,EAAAR,EAAA,MAAA,iBAAA,CAAA,EAFmC,EAEoC,CAAA,EAGzES,EAAAL,EAAA,IAAA,CACE,MAAAM,GAAA,OAAAV,EAAA,MAAA,iBAAA,EAAA,KAAA,UAIA,OAAAG,EAAA,MACEF,EACE,CAAO,MAAA,8CACE,YAAA,iJAEL,EAGJ,CAAO,MAAA,+BACE,YAAA,yDAAAS,CAAA,8EACoF,EAKjG,IAAO,CAAA,EAGTC,EAAAP,EAAA,IACEQ,EAAAZ,EAAA,gBAAA,EAEE,CAAO,MAAA,+BACE,YAAA,mEAFTa,EAAAb,EAAA,gBAAA,CAES,EACsF,EAGjG,IAAO,EAGT,MAAA,CAAO,uBAAAS,EACL,sBAAAE,CACA,CAEJ,iHCrDA,MAAAnB,EAAAC,EACA,CAAA,sBAAAkB,CAAA,EAAAZ,EAAAP,EAAA,IAAA"}