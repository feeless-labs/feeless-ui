{"version":3,"file":"TokenAmounts-8735d742.js","sources":["../../src/constants/poolLiquidity.ts","../../node_modules/debounce-promise/dist/index.js","../../src/components/forms/pool_actions/shared/TokenAmounts.vue"],"sourcesContent":["export const LOW_LIQUIDITY_THRESHOLD = 50_000;\nexport const HIGH_PRICE_IMPACT = 0.01;\nexport const REKT_PRICE_IMPACT = 0.2;\n","'use strict';\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var argsIndex = pendingArgs.length - 1;\n      return deferred.promise.then(function (results) {\n        return results[argsIndex];\n      });\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map","<script setup lang=\"ts\">\nimport { groupBy, orderBy } from 'lodash';\nimport { computed } from 'vue';\nimport useNumbers, { FNumFormats } from '@/composables/useNumbers';\nimport { bnum } from '@/lib/utils';\nimport { TokenInfoMap } from '@/types/TokenList';\n/**\n * TYPES\n */\ntype Props = {\n  amountMap: AmountMap;\n  fiatAmountMap: AmountMap;\n  tokenMap: TokenInfoMap;\n  fiatTotal: string;\n  title?: string;\n  hideAmountShare?: boolean;\n  showZeroAmounts?: boolean;\n};\ntype AmountMap = {\n  [address: string]: string;\n};\n/**\n * PROPS & EMITS\n */\nconst props = withDefaults(defineProps<Props>(), {\n  title: '',\n  hideAmountShare: false,\n  showZeroAmounts: false,\n});\n/**\n * COMPOSABLES\n */\nconst { fNum } = useNumbers();\n/**\n * COMPUTED\n */\nconst sortedAmounts = computed(() =>\n  orderBy(\n    Object.entries(props.fiatAmountMap),\n    ([, fiatAmount]) => Number(fiatAmount),\n    'desc'\n  ).map(([address, fiatAmount]) => ({\n    amount: props.amountMap[address],\n    fiatAmount,\n    address,\n  }))\n);\nconst groupedAmounts = computed(() =>\n  groupBy(sortedAmounts.value, amounts =>\n    bnum(amounts.amount || '0').isZero() ? 'zeroAmounts' : 'nonZeroAmounts'\n  )\n);\nconst amountsToShow = computed(() =>\n  props.showZeroAmounts\n    ? sortedAmounts.value\n    : groupedAmounts.value.nonZeroAmounts\n);\n/**\n * METHODS\n */\n// The investment amount's relative percentage of the total fiat investment value.\n// This has nothing to do with the pool weights.\nfunction amountShare(address: string): string {\n  return bnum(props.fiatAmountMap[address]).div(props.fiatTotal).toString();\n}\n</script>\n\n<template>\n  <div class=\"token-amount-table\">\n    <div v-if=\"props.title\" class=\"title\">\n      {{ props.title }}\n    </div>\n    <div v-for=\"token in amountsToShow\" :key=\"token.address\" class=\"relative\">\n      <div class=\"token-amount-table-content\">\n        <div class=\"flex flex-col self-center mr-3\">\n          <div class=\"font-medium\">\n            <span class=\"font-numeric\">\n              {{ fNum(token.amount, FNumFormats.token) }}\n            </span>\n            <span class=\"ml-2 font-normal text-secondary\">\n              {{ tokenMap[token.address]?.symbol }}\n            </span>\n          </div>\n          <div\n            v-if=\"Number(token.fiatAmount) > 0\"\n            class=\"text-sm text-secondary font-numeric\"\n          >\n            {{ fNum(token.fiatAmount, FNumFormats.fiat) }}\n            <span v-if=\"!hideAmountShare\">\n              ({{ fNum(amountShare(token.address), FNumFormats.percent) }})\n            </span>\n          </div>\n        </div>\n        <BalAsset :address=\"token.address\" :size=\"36\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n  <style scoped>\n.token-amount-table {\n  @apply shadow-lg border dark:border-gray-700 divide-y dark:divide-gray-700 rounded-lg overflow-hidden;\n}\n\n.title {\n  @apply dark:bg-gray-800 bg-gray-50 px-3 py-2;\n  @apply font-medium text-sm text-gray-600 dark:text-gray-400;\n}\n\n.token-amount-table-content {\n  @apply p-3 flex justify-between;\n}\n</style>\n"],"names":["LOW_LIQUIDITY_THRESHOLD","HIGH_PRICE_IMPACT","REKT_PRICE_IMPACT","dist","fn","wait","options","lastCallAt","deferred","timer","pendingArgs","currentWait","getWait","currentTime","isCold","_len","args","_key","result","defer","flush","argsIndex","results","thisDeferred","resolve","reject","props","__props","fNum","useNumbers","sortedAmounts","computed","orderBy","fiatAmount","address","groupedAmounts","groupBy","amounts","bnum","amountsToShow","amountShare"],"mappings":"6MAAO,MAAMA,EAA0B,IAC1BC,EAAoB,IACpBC,GAAoB,GCEjC,IAAAC,EAAiB,SAAkBC,EAAI,CACrC,IAAIC,EAAO,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,EAC3EC,EAAU,UAAU,OAAS,GAAK,UAAU,CAAC,IAAM,OAAY,UAAU,CAAC,EAAI,CAAA,EAE9EC,EAAa,OACbC,EAAW,OACXC,EAAQ,OACRC,EAAc,CAAA,EAClB,OAAO,UAAqB,CAC1B,IAAIC,EAAcC,EAAQP,CAAI,EAC1BQ,EAAc,IAAI,KAAM,EAAC,QAAO,EAEhCC,EAAS,CAACP,GAAcM,EAAcN,EAAaI,EAEvDJ,EAAaM,EAEb,QAASE,EAAO,UAAU,OAAQC,EAAO,MAAMD,CAAI,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAC3ED,EAAKC,CAAI,EAAI,UAAUA,CAAI,EAG7B,GAAIH,GAAUR,EAAQ,QACpB,OAAOA,EAAQ,WAAa,QAAQ,QAAQF,EAAG,KAAK,KAAM,CAACY,CAAI,CAAC,CAAC,EAAE,KAAK,SAAUE,EAAQ,CACxF,OAAOA,EAAO,CAAC,CAChB,CAAA,EAAI,QAAQ,QAAQd,EAAG,KAAK,MAAMA,EAAI,CAAC,IAAI,EAAE,OAAOY,CAAI,CAAC,CAAC,EAY7D,GATIR,EACF,aAAaC,CAAK,EAElBD,EAAWW,EAAK,EAGlBT,EAAY,KAAKM,CAAI,EACrBP,EAAQ,WAAWW,EAAM,KAAK,IAAI,EAAGT,CAAW,EAE5CL,EAAQ,WAAY,CACtB,IAAIe,EAAYX,EAAY,OAAS,EACrC,OAAOF,EAAS,QAAQ,KAAK,SAAUc,EAAS,CAC9C,OAAOA,EAAQD,CAAS,CAChC,CAAO,CACF,CAED,OAAOb,EAAS,OACpB,EAEE,SAASY,GAAQ,CACf,IAAIG,EAAef,EACnB,aAAaC,CAAK,EAElB,QAAQ,QAAQH,EAAQ,WAAaF,EAAG,KAAK,KAAMM,CAAW,EAAIN,EAAG,MAAM,KAAMM,EAAYA,EAAY,OAAS,CAAC,CAAC,CAAC,EAAE,KAAKa,EAAa,QAASA,EAAa,MAAM,EAErKb,EAAc,CAAA,EACdF,EAAW,IACZ,CACH,EAEA,SAASI,EAAQP,EAAM,CACrB,OAAO,OAAOA,GAAS,WAAaA,EAAI,EAAKA,CAC/C,CAEA,SAASc,GAAQ,CACf,IAAIX,EAAW,CAAA,EACf,OAAAA,EAAS,QAAU,IAAI,QAAQ,SAAUgB,EAASC,EAAQ,CACxDjB,EAAS,QAAUgB,EACnBhB,EAAS,OAASiB,CACtB,CAAG,EACMjB,CACT,+fC/CA,MAAAkB,EAAAC,EAQA,CAAA,KAAAC,GAAAC,IAIAC,EAAAC,EAAsB,IAAAC,EAAA,QACpB,OAAA,QAAAN,EAAA,aAAA,EACoC,CAAA,EAAAO,CAAA,IAAA,OAAAA,CAAA,EACG,MACrC,EAAA,IAAA,CAAA,CAAAC,EAAAD,CAAA,KAAA,CACgC,OAAAP,EAAA,UAAAQ,CAAA,EACD,WAAAD,EAC/B,QAAAC,CACA,EAAA,CACA,EAEJC,EAAAJ,EAAuB,IAAAK,EAAA,QACrBN,EAAA,MAAsBO,GAAAC,EAAAD,EAAA,QAAA,GAAA,EAAA,SAAA,cAAA,gBACmC,CACzD,EAEFE,EAAAR,EAAsB,IAAAL,EAAA,gBAAAI,EAAA,MAAAK,EAAA,MAAA,cAGK,EAO3B,SAAAK,EAAAN,EAAA,CACE,OAAAI,EAAAZ,EAAA,cAAAQ,CAAA,CAAA,EAAA,IAAAR,EAAA,SAAA,EAAA,UAAwE","x_google_ignoreList":[1]}