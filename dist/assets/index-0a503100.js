var je=Object.defineProperty;var He=(s,e,t)=>e in s?je(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var H=(s,e,t)=>(He(s,typeof e!="symbol"?e+"":e,t),t);import{d as I,c as b,h as ee,o as w,a as D,b as o,t as y,e as $,f as _,w as h,p as Oe,g as Qe,_ as Ue,i as We,A as be,j as x,u as Q,k as $e,l as W,r as F,Q as z,m as ie,n as te,q as ze,s as Ke,v as oe,x as N,y as P,z as K,B as S,C as i,F as B,D as Ye,E as le,G as L,H as re,I as Ze,J as ae,K as Xe,L as Be,M as ce,N as ue,O as Je,P as V,R as et,S as tt,T as at,U as q,V as st,W as nt,X as he,Y as O,Z as Re,$ as it,a0 as ot,a1 as _e,a2 as lt,a3 as we,a4 as ve,a5 as rt,a6 as ct,a7 as ut,a8 as dt}from"./index-60943df8.js";import{_ as pt}from"./BalBlankSlate.vue_vue_type_style_index_0_lang-fb55cd08.js";import{B as Ae,_ as mt}from"./BalAsset-68194947.js";import{_ as Se}from"./BalTooltip.vue_vue_type_style_index_0_lang-8cf64573.js";import{_ as de}from"./BalTable.vue_vue_type_style_index_0_lang-bf21b918.js";import{_ as yt}from"./BalAssetSet-c1957457.js";import{_ as pe}from"./TxActionBtn.vue_vue_type_script_setup_true_lang-27990a4e.js";import{_ as gt}from"./TokenPills.vue_vue_type_script_setup_true_lang-ee78290c.js";import{u as me}from"./useBreakpoints-76e5f77c.js";import{_ as ft}from"./PoolWarningTooltip.vue_vue_type_script_setup_true_lang-d116052e.js";const bt=I({name:"BalFlexGrid",props:{gap:{type:Number,default:4},flexWrap:{type:Boolean,default:!1}},setup(s,{slots:e}){const t=b(()=>(s.gap/2).toString()),a=b(()=>({"flex-wrap":s.flexWrap})),d=e.default()[0].children.map(u=>ee("div",{class:`px-${t.value} mb-${t.value}`},[u]));return()=>ee("div",{class:`px-${t.value}`},[ee("div",{class:[`flex -mx-${s.gap}`,a.value]},d)])}}),ht="/assets/add-liquidity-46138ed8.svg",_t="/assets/stake-f46249c4.svg",wt="/assets/vebal-e96ebd27.svg",vt="/assets/claim-3b6440b6.svg",Y=s=>(Oe("data-v-e0f451fa"),s=s(),Qe(),s),Tt={class:"bg"},kt={class:"w-full hero-container"},Ct={class:"hero-content"},xt={class:"hero-text fade-in-slow"},$t={class:"mb-3 text-white title text-shadow"},Bt={class:"max-w-3xl body-text text-shadow"},Rt={class:"hero-graphic-container"},At={class:"grid grid-cols-2 sm:grid-cols-4 gap-8 sm:gap-4 xl:gap-12 items-center w-full fade-in-slow"},St={class:"group tip"},Lt=Y(()=>o("img",{width:"144",height:"144",class:"tip-icon",src:ht},null,-1)),Mt={class:"font-semibold tip-label text-shadow"},Dt={class:"group tip"},It=Y(()=>o("img",{width:"144",height:"144",class:"tip-icon",src:_t},null,-1)),Et={class:"font-semibold tip-label text-shadow"},qt={class:"group tip"},Gt=Y(()=>o("img",{width:"144",height:"144",class:"tip-icon",src:wt},null,-1)),Ft={class:"font-semibold tip-label text-shadow"},Pt={class:"group tip"},Vt=Y(()=>o("img",{width:"144",height:"144",class:"tip-icon",src:vt},null,-1)),Nt={class:"font-semibold tip-label text-shadow"},jt=I({__name:"HeroClaim",props:{title:{},description:{}},setup(s){return(e,t)=>{const a=Se;return w(),D("div",Tt,[o("div",kt,[o("div",Ct,[o("div",xt,[o("h1",$t,y(e.title),1),o("p",Bt,y(e.description),1)])]),o("div",Rt,[o("div",At,[o("div",St,[Lt,o("p",Mt,[$(y(e.$t("claimHero.tipLabel.addLiquidity"))+" ",1),_(a,{iconSize:"xs",textAlign:"left",class:"relative top-px",iconClass:"text-white",width:"60"},{default:h(()=>[$(y(e.$t("claimHero.tips.addLiquidity")),1)]),_:1})])]),o("div",Dt,[It,o("p",Et,[$(y(e.$t("claimHero.tipLabel.stake"))+" ",1),_(a,{iconSize:"xs",textAlign:"left",class:"relative top-px",iconClass:"text-white",width:"60"},{default:h(()=>[$(y(e.$t("claimHero.tips.stake")),1)]),_:1})])]),o("div",qt,[Gt,o("p",Ft,[$(y(e.$t("claimHero.tipLabel.boost"))+" ",1),_(a,{iconSize:"xs",textAlign:"left",class:"relative top-px",iconClass:"text-white",width:"60"},{default:h(()=>[$(y(e.$t("claimHero.tips.boost")),1)]),_:1})])]),o("div",Pt,[Vt,o("p",Nt,[$(y(e.$t("claimHero.tipLabel.claim"))+" ",1),_(a,{iconSize:"xs",textAlign:"left",class:"relative top-px",iconClass:"text-white",width:"60"},{default:h(()=>[$(y(e.$t("claimHero.tips.claim")),1)]),_:1})])])])])])])}}});const Ht=Ue(jt,[["__scopeId","data-v-e0f451fa"]]),Ot=8;class Qt{constructor(){H(this,"multicaller");const e=We();this.multicaller=new e}async decorate(e,t){this.callRewardTokens(e),this.callClaimableTokens(e,t);let a=await this.multicaller.execute();const n=e.filter(u=>!u.streamer);this.callClaimableRewards(n,t,a,!1);const d=e.filter(u=>!!u.streamer);return this.callClaimableRewards(d,t,a,!0),a=await this.multicaller.execute(a),e.map(u=>({...u,...this.format(a[u.id])}))}format(e){var t;return{...e,rewardTokens:this.formatRewardTokens(e.rewardTokens),claimableTokens:((t=e.claimableTokens)==null?void 0:t.toString())||"0",claimableRewards:this.formatClaimableRewards(e.claimableRewards)}}callRewardTokens(e){e.forEach(t=>{for(let a=0;a<Ot;a++)this.multicaller.call({key:`${t.id}.rewardTokens[${a}]`,address:t.id,abi:["function reward_tokens(uint256) view returns (address)"],function:"reward_tokens",params:[a]})})}formatRewardTokens(e){return e.filter(t=>t!==be)}callClaimableTokens(e,t){e.forEach(a=>{this.multicaller.call({key:`${a.id}.claimableTokens`,address:a.id,function:"claimable_tokens",abi:["function claimable_tokens(address) view returns (uint256)"],params:[t]})})}callClaimableRewards(e,t,a,n){const d=n?"getPendingRewards":"claimable_reward";e.forEach(u=>{a[u.id].rewardTokens.forEach(m=>{if(m===be)return;const f=n?[u.id,t,m]:[t,m],l=n&&x.network.addresses.gaugeRewardsHelper?x.network.addresses.gaugeRewardsHelper:u.id,c=n?["function getPendingRewards(address,address,address) view returns (uint256)"]:["function claimable_reward(address,address) view returns (uint256)"];this.multicaller.call({key:`${u.id}.claimableRewards.${m}`,address:l,function:d,abi:c,params:f})})})}formatClaimableRewards(e){return e?(Object.keys(e).forEach(t=>{e[t]||(e[t]="0"),e[t]=e[t].toString()}),e):{}}}const Ut=new Qt;function ye(s,e={}){const{account:t,isWalletReady:a}=Q(),{networkId:n}=$e(),{injectTokens:d}=W(),u=b(()=>{var c;return(s==null?void 0:s.value)&&((c=s.value)==null?void 0:c.length)>0&&a.value}),m=F(z.Gauges.All.Onchain(s,t,n)),f=async()=>{if(!s.value)return null;const c=await Ut.decorate(s.value,t.value),p=c.map(g=>g.rewardTokens).flat();return await d(p),c},l=F({enabled:u,...e});return ie(m,f,l)}const Wt={first:999},zt={id:!0,symbol:!0,poolId:!0,totalSupply:!0,isKilled:!0,factory:{id:!0},isPreferentialGauge:!0,streamer:!0},Kt=(s={},e={},t=void 0)=>({__name:t,liquidityGauges:{__args:te.merge({},Wt,s),...te.merge({},zt,e)}});class Yt{constructor(e,t=Kt){this.service=e,this.query=t}async get(e={},t={}){const a="Gauges",n=this.query(e,t,a);return(await this.service.client.get(n)).liquidityGauges}}class Zt{constructor(e=x.network.subgraphs.gauge){this.url=e}async get(e){try{if(!this.url)return{liquidityGauges:[]};const t=this.payloadFor(e),{data:{data:a}}=await ze.post(this.url,t);return a}catch(t){throw console.error("GaugesSubgraphClient request failed",t),t}}payloadFor(e){return{query:Ke.jsonToGraphQLQuery({query:e})}}}const Xt=new Zt;class Jt{constructor(e=Xt){H(this,"gauges");this.client=e,this.gauges=new Yt(this)}}const ea=new Jt;function ge(s={}){const e=F(z.Gauges.All.Static()),t=async()=>{try{return await ea.gauges.get()}catch(n){return console.error("Failed to fetch gauges",n),[]}},a=F({enabled:!0,...s});return ie(e,t,a)}const ta=[{inputs:[{internalType:"contract IBalancerTokenAdmin",name:"tokenAdmin",type:"address"},{internalType:"contract IGaugeController",name:"gaugeController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"address",name:"gauge",type:"address"},{indexed:!1,internalType:"uint256",name:"minted",type:"uint256"}],name:"Minted",type:"event"},{inputs:[{internalType:"address",name:"minter",type:"address"},{internalType:"address",name:"user",type:"address"}],name:"allowed_to_mint_for",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"},{internalType:"address",name:"user",type:"address"}],name:"approvedMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBalancerTokenAdmin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGaugeController",outputs:[{internalType:"contract IGaugeController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"gauge",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"gauge",type:"address"},{internalType:"address",name:"user",type:"address"}],name:"mintFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"gauges",type:"address[]"}],name:"mintMany",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"gauges",type:"address[]"},{internalType:"address",name:"user",type:"address"}],name:"mintManyFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"gauge",type:"address"},{internalType:"address",name:"user",type:"address"}],name:"mint_for",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[8]",name:"gauges",type:"address[8]"}],name:"mint_many",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"gauge",type:"address"}],name:"minted",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"},{internalType:"bool",name:"approval",type:"bool"}],name:"setMinterApproval",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minter",type:"address"}],name:"toggle_approve_mint",outputs:[],stateMutability:"nonpayable",type:"function"}];class aa{constructor(e=ta,t=x,a=oe,n=t.network.addresses.balancerMinter){this.abi=e,this.config=t,this.walletService=a,this.address=n}async mint(e){return await this.walletService.txBuilder.contract.sendTransaction({contractAddress:this.address,abi:this.abi,action:"mint",params:[e]})}async mintMany(e){return await this.walletService.txBuilder.contract.sendTransaction({contractAddress:this.address,abi:this.abi,action:"mintMany",params:[e]})}}const Te=new aa,ke=I({__name:"ClaimBalBtn",props:{gauges:{},label:{},amount:{}},setup(s){const e=s,{t}=N(),{fNum:a}=P(),{data:n}=ge(),d=ye(n),u=b(()=>e.gauges.map(f=>K(f.id)));async function m(){return e.gauges.length===1?await Te.mint(u.value[0]):await Te.mintMany(u.value)}return(f,l)=>(w(),S(pe,{label:f.label,color:"gradient",size:"sm",actionFn:m,onConfirmFn:i(d).refetch,action:"claim",summary:`${i(t)("claim")} ${i(a)(e.amount,i(B).token)} BAL`,confirmingLabel:f.$t("claiming")},null,8,["label","onConfirmFn","summary","confirmingLabel"]))}}),sa={class:"py-4 px-6"},na={class:"flex items-center py-4 px-6"},ia={key:0,class:"text-left"},oa={class:"py-4 px-6"},la={class:"flex justify-end"},ra={class:"flex justify-end"},ca=I({__name:"BalClaimsTable",props:{rewardsData:{},isLoading:{type:Boolean}},setup(s){const e=s,{t}=N(),{upToLargeBreakpoint:a}=me(),{fNum:n}=P(),d=Ye(),{networkSlug:u}=$e(),m=le([{name:t("pools"),id:"icons",accessor:"icons",Cell:"iconsColumnCell",width:50,noGrow:!0},{name:"",id:"pills",accessor:"pills",Cell:"pillsColumnCell",width:350},{name:t("amount"),id:"amount",align:"right",width:150,totalsCell:"totalAmountCell",accessor:({amount:g})=>`${n(g,B.token)} BAL`},{name:t("value"),id:"value",align:"right",width:150,totalsCell:"totalValueCell",accessor:({value:g})=>n(g,B.fiat)},{name:"",id:"claim",accessor:"claim",Cell:"claimColumnCell",totalsCell:"claimTotalCell",width:150}]),f=b(()=>e.rewardsData.map(g=>g.gauge)),l=b(()=>e.rewardsData.reduce((g,M)=>g.plus(M.amount),L("0")).toString()),c=b(()=>e.rewardsData.reduce((g,M)=>g.plus(M.value),L("0")).toString());function p({pool:g}){d.push({name:"pool",params:{id:g.id,networkSlug:u}})}return(g,M)=>{const C=yt,R=de,j=re;return w(),S(j,{shadow:"lg",square:i(a),noBorder:i(a),noPad:""},{default:h(()=>[_(R,{columns:i(m),data:g.rewardsData,noResultsLabel:g.$t("noResultsTable.noBalIncentives"),isLoading:g.isLoading,onRowClick:p,skeletonClass:"h-24",square:i(a)},{iconsColumnCell:h(({pool:A})=>[o("div",sa,[_(C,{addresses:i(Ze)(A),width:100},null,8,["addresses"])])]),pillsColumnCell:h(({pool:A})=>[o("div",na,[i(ae)(A.id)?(w(),D("div",ia,y(i(ae)(A.id).name),1)):(w(),S(gt,{key:1,tokens:i(Xe)(A,A.tokens),isStablePool:i(Be)(A.poolType)},null,8,["tokens","isStablePool"])),_(ft,{pool:A},null,8,["pool"])])]),claimColumnCell:h(({gauge:A,amount:Z})=>[o("div",oa,[_(ke,{label:g.$t("claim"),gauges:[A],amount:Z},null,8,["label","gauges","amount"])])]),totalAmountCell:h(()=>[o("div",la,y(i(n)(i(l),i(B).token))+" BAL ",1)]),totalValueCell:h(()=>[o("div",ra,y(i(n)(i(c),i(B).fiat)),1)]),claimTotalCell:h(()=>[_(ke,{label:g.$t("claimAll"),gauges:i(f),amount:i(l)},null,8,["label","gauges","amount"])]),_:1},8,["columns","data","noResultsLabel","isLoading","square"])]),_:1},8,["square","noBorder"])}}}),ua=[{inputs:[],name:"CLAIM_FREQUENCY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IRewardsOnlyGauge",name:"gauge",type:"address"},{internalType:"address",name:"user",type:"address"}],name:"claimRewardsFromGauge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IRewardsOnlyGauge[]",name:"gauges",type:"address[]"},{internalType:"address",name:"user",type:"address"}],name:"claimRewardsFromGauges",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IRewardsOnlyGauge",name:"gauge",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"address",name:"token",type:"address"}],name:"getPendingRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];class da{constructor(e,t=ue.jsonProvider,a=ua,n=oe){H(this,"instance");this.address=e,this.provider=t,this.abi=a,this.walletService=n,this.instance=new ce(this.address,this.abi,this.provider)}async claimRewardsForGauge(e,t){return await this.walletService.txBuilder.contract.sendTransaction({contractAddress:this.address,abi:this.abi,action:"claimRewardsFromGauge",params:[e,t]})}}const pa=I({__name:"ClaimRewardsBtn",props:{gauge:{},fiatValue:{}},setup(s){const e=s,{t}=N(),{fNum:a}=P(),{data:n}=ge(),{account:d}=Q(),u=ye(n),m=K(e.gauge.id),f=new Je(m);function l(){return e.gauge.streamer?new da(x.network.addresses.gaugeRewardsHelper||"").claimRewardsForGauge(m,d.value):f.claimRewards()}return(c,p)=>(w(),S(pe,{label:i(t)("claimAll"),color:"gradient",size:"sm",actionFn:l,onConfirmFn:i(u).refetch,action:"claim",summary:`${i(t)("claim")} ${i(a)(e.fiatValue,i(B).fiat)}`,confirmingLabel:i(t)("claiming")},null,8,["label","onConfirmFn","summary","confirmingLabel"]))}}),ma={class:"flex items-center py-4 px-6"},ya={class:"ml-2"},ga={class:"flex justify-end"},fa={class:""},ba=I({__name:"GaugeRewardsTable",props:{gauge:{},isLoading:{type:Boolean}},setup(s){const e=s,{t}=N(),{upToLargeBreakpoint:a}=me(),{fNum:n,toFiat:d}=P(),{getToken:u}=W(),m=le([{name:t("incentiveToken"),id:"token",accessor:"token",Cell:"tokenColumnCell",width:475,noGrow:!0},{name:t("amount"),id:"amount",align:"right",width:150,accessor:({amount:c,token:p})=>`${n(c,B.token)} ${p==null?void 0:p.symbol}`},{name:t("value"),id:"value",align:"right",width:150,totalsCell:"totalValueCell",accessor:({value:c})=>n(c,B.fiat)},{name:"",id:"claim",accessor:"claim",Cell:"claimColumnCell",totalsCell:"totalClaimCell",width:150}]),f=b(()=>e.gauge.rewardTokens.map(c=>{const p=u(c),g=V(e.gauge.claimableRewards[c],(p==null?void 0:p.decimals)||18);return L(g).isZero()||!(p!=null&&p.address)||!(p!=null&&p.symbol)||!(p!=null&&p.decimals)?null:{token:p,amount:g,value:p!=null&&p.address?d(g,p==null?void 0:p.address):"0"}}).filter(c=>c!==null)),l=b(()=>f.value.reduce((c,p)=>c.plus(p.value),L("0")).toString());return(c,p)=>{const g=Ae,M=de,C=re;return w(),S(C,{shadow:"lg",square:i(a),noBorder:i(a),noPad:""},{default:h(()=>[_(M,{columns:m.value,data:f.value,isLoading:c.isLoading,skeletonClass:"h-64",square:i(a)},{tokenColumnCell:h(({token:R})=>[o("div",ma,[_(g,{iconURI:R==null?void 0:R.logoURI},null,8,["iconURI"]),o("span",ya,y(R==null?void 0:R.name),1)])]),totalValueCell:h(()=>[o("div",ga,y(i(n)(l.value,i(B).fiat)),1)]),totalClaimCell:h(()=>[o("div",fa,[_(pa,{gauge:c.gauge,fiatValue:l.value},null,8,["gauge","fiatValue"])])]),_:1},8,["columns","data","isLoading","square"])]),_:1},8,["square","noBorder"])}}}),ha=[{inputs:[{internalType:"contract IVotingEscrow",name:"votingEscrow",type:"address"},{internalType:"uint256",name:"startTime",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"contract IERC20",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"lastCheckpointTimestamp",type:"uint256"}],name:"TokenCheckpointed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"contract IERC20",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"userTokenTimeCursor",type:"uint256"}],name:"TokensClaimed",type:"event"},{inputs:[],name:"checkpoint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"}],name:"checkpointToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20[]",name:"tokens",type:"address[]"}],name:"checkpointTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"checkpointUser",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"contract IERC20",name:"token",type:"address"}],name:"claimToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"contract IERC20[]",name:"tokens",type:"address[]"}],name:"claimTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"depositToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],name:"depositTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getTimeCursor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"}],name:"getTokenLastBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"}],name:"getTokenTimeCursor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"}],name:"getTokensDistributedInWeek",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],name:"getTotalSupplyAtTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"}],name:"getUserBalanceAtTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserTimeCursor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"contract IERC20",name:"token",type:"address"}],name:"getUserTokenTimeCursor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getVotingEscrow",outputs:[{internalType:"contract IVotingEscrow",name:"",type:"address"}],stateMutability:"view",type:"function"}],_a=[{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"contract IERC20[]",name:"tokens",type:"address[]"}],name:"claimTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"}];class U{constructor(e,t=ha,a=_a,n=x,d=oe,u=ue.jsonProvider){H(this,"claimableTokens",["0x7B50775383d3D6f0215A8F290f2C9e2eEBBEceb2","0xA13a9247ea42D743238089903570127DdA72fE44","0xfeBb0bbf162E64fb9D0dfe186E517d84C395f016","0xba100000625a3754423978a60c9317c58a424e3D","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"]);this.address=e,this.abi=t,this.staticAbi=a,this.config=n,this.walletService=d,this.provider=u}getInstance(){return new ce(this.address,this.abi,this.provider)}getMulticaller(){const e=et();return new e(this.config.network.key,this.provider,this.abi)}async getClaimableBalances(e){const a=(await this.walletService.txBuilder.contract.callStatic({contractAddress:this.address,abi:this.staticAbi,action:"claimTokens",params:[e,this.claimableTokens]})).map(n=>n.toString());return te.zipObject(this.claimableTokens,a)}async claimBalances(e){return await this.walletService.txBuilder.contract.sendTransaction({contractAddress:this.address,abi:this.abi,action:"claimTokens",params:[e,this.claimableTokens]})}async claimBalance(e,t){return await this.walletService.txBuilder.contract.sendTransaction({contractAddress:this.address,abi:this.abi,action:"claimToken",params:[e,t]})}async getTokensDistributedInWeek(e,t,a){a||(a=this.getInstance());const n=await a.getTokensDistributedInWeek(e,t);return V(n,18)}async getTotalSupply(e,t){t||(t=this.getInstance());const a=await t.getTotalSupplyAtTimestamp(e);return V(a,18)}}const wa=new U(x.network.addresses.feeDistributorDeprecated),va=new U(x.network.addresses.feeDistributor),se=b(()=>x.network.addresses.feeDistributorDeprecated!=""||x.network.addresses.feeDistributor!="");function Le(s={}){const{account:e,isWalletReady:t}=Q(),a=b(()=>t.value&&e.value!=null&&se.value),n=F(z.Claims.Protocol(tt,e)),d=async()=>{try{const[m,f]=await Promise.all([wa.getClaimableBalances(e.value),va.getClaimableBalances(e.value)]);return{v1:m,v2:f}}catch(m){return console.error("Failed to fetch claimable protocol balances",m),{}}},u=F({enabled:a,...s});return ie(n,d,u)}const Ce=I({__name:"ClaimProtocolRewardsBtn",props:{tokenAddress:{},fiatValue:{},deprecated:{type:Boolean}},setup(s){const e=s,t=new U(x.network.addresses.feeDistributorDeprecated),a=new U(x.network.addresses.feeDistributor),{t:n}=N(),{fNum:d}=P(),{account:u}=Q(),m=Le();function f(){const l=e.deprecated?t:a;return e.tokenAddress?l.claimBalance(u.value,e.tokenAddress):l.claimBalances(u.value)}return(l,c)=>(w(),S(pe,at({label:l.tokenAddress?l.$t("claim"):l.$t("claimAll"),color:"gradient",size:"sm",actionFn:f,onConfirmFn:i(m).refetch,action:"claim",summary:`${i(n)("claim")} ${i(d)(l.fiatValue,i(B).fiat)}`,confirmingLabel:l.$t("claiming")},l.$attrs),null,16,["label","onConfirmFn","summary","confirmingLabel"]))}}),Ta={key:0,class:"px-4 xl:px-0 mt-4 mb-2"},ka={class:"text-lg"},Ca={class:"mb-3"},xa={class:"flex justify-center ml-4 xl:ml-0"},$a={class:"flex py-4 px-6"},Ba={class:"flex justify-end"},Ra={class:"py-4 px-6"},xe=I({__name:"ProtocolRewardsTable",props:{rewardsData:{},isLoading:{type:Boolean},deprecated:{type:Boolean,default:!1}},setup(s){const e=s,{t}=N(),{upToLargeBreakpoint:a}=me(),{fNum:n}=P(),d=le([{name:t("token"),id:"token",accessor:"token",Cell:"tokenColumnCell",align:"left",width:50,noGrow:!0},{name:"",id:"symbol",accessor:"symbol",Cell:"symbolColumnCell",width:350},{name:t("amount"),id:"amount",align:"right",width:150,accessor:({amount:l})=>`${n(l,B.token)}`},{name:t("value"),id:"value",align:"right",width:150,totalsCell:"totalValueCell",accessor:({value:l})=>n(l,B.fiat)},{name:"",id:"claim",accessor:"claim",Cell:"claimColumnCell",totalsCell:"claimTotalCell",width:150}]),u=b(()=>e.rewardsData.reduce((l,c)=>l.plus(c.amount),L("0")).toString()),m=b(()=>e.rewardsData.reduce((l,c)=>l.plus(c.value),L("0")).toString()),f=b(()=>e.isLoading?!0:L(u.value).gt(0));return(l,c)=>{const p=Ae,g=de,M=re;return w(),D("div",null,[l.deprecated&&f.value?(w(),D("div",Ta,[o("h6",ka,y(l.$t("pastEarnings.title")),1),o("p",Ca,y(l.$t("pastEarnings.description")),1)])):q("",!0),f.value||!l.deprecated?(w(),S(M,{key:1,shadow:"lg",square:i(a),noBorder:i(a),noPad:"",class:"mb-8"},{default:h(()=>[_(g,{columns:d.value,data:l.rewardsData,noResultsLabel:l.$t("noResultsTable.noProtocolRevenue"),isLoading:l.isLoading,skeletonClass:"h-24",square:i(a)},{tokenColumnCell:h(({token:C})=>[o("div",xa,[_(p,{address:C.address},null,8,["address"])])]),symbolColumnCell:h(({token:C})=>[o("div",$a,y(C.symbol),1)]),totalValueCell:h(()=>[o("div",Ba,y(i(n)(m.value,i(B).fiat)),1)]),claimColumnCell:h(({token:C,amount:R,value:j})=>[o("div",Ra,[_(Ce,{tokenAddress:C.address,fiatValue:j,disabled:i(L)(R).eq(0),deprecated:l.deprecated},null,8,["tokenAddress","fiatValue","disabled","deprecated"])])]),claimTotalCell:h(()=>[_(Ce,{fiatValue:m.value,disabled:!f.value,deprecated:l.deprecated},null,8,["fiatValue","disabled","deprecated"])]),_:1},8,["columns","data","noResultsLabel","isLoading","square"])]),_:1},8,["square","noBorder"])):q("",!0)])}}});function Aa(){const s=Le(),e=b(()=>s.data.value||{}),t=ge(),a=ye(t.data),n=b(()=>a.data.value||[]),d=b(()=>n.value.map(c=>c.poolId).filter(c=>!!c)),u=b(()=>{var c;return(d==null?void 0:d.value)&&((c=d.value)==null?void 0:c.length)>0}),m=st(nt.url.value,z.Claims.GaugePools(d),()=>({pools:{__args:{where:{id_in:d.value},first:1e3},id:!0,address:!0,poolType:!0,tokensList:!0,tokens:{address:!0,weight:!0}}}),F({enabled:u})),f=b(()=>{var c;return((c=m.data.value)==null?void 0:c.pools)||[]}),l=b(()=>f.value.length===0||he(m)||se.value&&he(s));return{gauges:n,gaugePools:f,networkHasProtocolRewards:se,protocolRewards:e,isLoading:l}}const ne=K(O.Addresses.BAL);function Sa(s){return Re(s,ne)}function La(){const{getToken:s,wrappedNativeAsset:e,nativeAsset:t}=W(),a=b(()=>s(ne));function n(d){return d.map(u=>Re(u,e.value.address)?t.address:u)}return{balAddress:ne,balToken:a,isBalAddress:Sa,replaceWethWithEth:n}}class Ma{constructor(e=it,t=O.Addresses.bbaUSDv2,a=ue.jsonProvider){this.abi=e,this.address=t,this.provider=a}getInstance(){if(!this.address)throw new Error("No bb-a-USD address");return new ce(this.address,this.abi,this.provider)}async getRate(){const t=await this.getInstance().getRate();return V(t,18)}}const Da=new Ma,Ia={class:"xl:container py-12 xl:px-4 xl:mx-auto"},Ea={class:"px-4 xl:px-0 font-body text-2xl font-semibold"},qa={key:0,class:"mb-16"},Ga={class:"px-4 xl:px-0"},Fa={class:"flex items-center mt-6 mb-2"},Pa={class:"inline-block mr-1.5 text-xl"},Va={key:1,class:"mb-16"},Na={class:"inline-block xl:px-0 pl-4 mt-8 mr-1.5 mb-3 text-xl"},ja={class:"inline-block px-4 xl:px-0 mt-8 mr-1.5 text-xl"},Ha={class:"mb-16"},Oa={class:"flex px-4 xl:px-0 mt-4"},Qa={class:"mb-2 text-base"},Ua={class:"px-4 xl:px-0 mb-16"},Wa={class:"mt-8 font-body text-2xl font-semibold"},za=["src","alt"],os=I({__name:"index",setup(s){const{injectTokens:e,injectPrices:t,getToken:a}=W(),{balToken:n}=La(),{toFiat:d,fNum:u}=P(),{isWalletReady:m}=Q(),{gauges:f,gaugePools:l,networkHasProtocolRewards:c,protocolRewards:p,isLoading:g}=Aa(),M=[{id:"iota",name:"Iota",key:ot.MAINNET}],C=b(()=>g.value&&m.value),R=b(()=>M.filter(r=>r.key.toString()!==x.network.key)),j=b(()=>m.value?f.value.reduce((r,v)=>{const T=V(v.claimableTokens,n.value.decimals),k=l.value.find(G=>G.id===v.poolId);return k&&L(T).gt(0)&&r.push({gauge:v,pool:k,amount:T,value:d(T,n.value.address)}),r},[]):[]),A=b(()=>fe(p.value.v2)),Z=b(()=>fe(p.value.v1)),Me=b(()=>f.value.filter(r=>r.rewardTokens.length>0)),X=b(()=>Me.value.reduce((r,v)=>{const T=l.value.find(G=>G.id===v.poolId),k=Object.values(v.claimableRewards).reduce((G,J)=>G.plus(J),L(0));return T&&k.gt(0)&&r.push({gauge:v,pool:T}),r},[])),De=b(()=>!!x.network.addresses.balancerMinter);async function Ie(r){const v=r.map(T=>T.rewardTokens).flat();return await e(v)}async function Ee(r){const v=r.map(T=>T.tokensList).flat();return await e(v)}function qe(r){const v=ae(r.id);if(v!=null&&v.name)return v.name;const T=r.tokens.map(k=>({...k,...a(K(k.address))}));return Be(r.poolType)?Object.values(T).map(k=>k.symbol).join(" / "):Object.values(T).map(k=>`${u(k.weight||"0",{style:"percent",maximumFractionDigits:0})} ${k.symbol}`).join(" / ")}function fe(r){return!m.value||!r?[]:Object.keys(r).map(v=>{const T=a(v),k=V(r[v],T.decimals);return{token:T,amount:k,value:d(k,v)}})}async function Ge(){if(O.Addresses.bbaUSDv2){const r=L(await Da.getRate()).toNumber();t({[O.Addresses.bbaUSD]:r,[O.Addresses.bbaUSDv2]:r})}}return _e(f,async r=>{r&&await Ie(r)}),_e(l,async r=>{r&&await Ee(r)}),lt(async()=>{await Ge()}),(r,v)=>{const T=Se,k=mt,G=pt,J=ut,Fe=bt,Pe=dt,Ve=rt;return w(),D("div",null,[_(Ht,{title:r.$t("claimHero.title"),description:r.$t("claimHero.description")},null,8,["title","description"]),o("div",null,[o("div",Ia,[o("h2",Ea,y(i(x).network.chainName)+" "+y(r.$t("liquidityIncentives")),1),De.value?(w(),D("div",qa,[o("div",Ga,[o("div",Fa,[o("h3",Pa," BAL "+y(r.$t("incentives")),1),_(T,{iconSize:"xs",textAlign:"left",class:"relative top-px",iconClass:"text-secondary",width:"60"},{default:h(()=>[$(y(r.$t("claimPage.tips.BalIncentives")),1)]),_:1})])]),_(ca,{rewardsData:j.value,isLoading:C.value},null,8,["rewardsData","isLoading"])])):q("",!0),i(c)?(w(),D("div",Va,[o("h3",Na,y(r.$t("protocolIncentives")),1),_(T,{iconSize:"xs",textAlign:"left",class:"relative top-px",iconClass:"text-secondary",width:"60"},{default:h(()=>[$(y(r.$t("claimPage.tips.ProtocolAndVebal")),1)]),_:1}),_(xe,{rewardsData:A.value,isLoading:C.value},null,8,["rewardsData","isLoading"]),C.value?q("",!0):(w(),S(xe,{key:0,rewardsData:Z.value,isLoading:C.value,deprecated:""},null,8,["rewardsData","isLoading"]))])):q("",!0),o("div",null,[o("h3",ja,y(r.$t("otherTokenIncentives")),1),_(T,{iconSize:"xs",textAlign:"left",class:"relative top-px",iconClass:"text-secondary",width:"60"},{default:h(()=>[$(y(r.$t("claimPage.tips.OtherIncentives")),1)]),_:1})]),C.value?(w(),S(k,{key:2,class:"mt-6 mb-2 h-56"})):q("",!0),!i(g)&&X.value.length>0?(w(!0),D(we,{key:3},ve(X.value,({gauge:E,pool:Ne})=>(w(),D("div",{key:E.id},[o("div",Ha,[o("div",Oa,[o("h4",Qa,y(qe(Ne)),1)]),_(ba,{gauge:E,isLoading:i(g)},null,8,["gauge","isLoading"])])]))),128)):!i(g)&&X.value.length===0||!i(m)?(w(),S(G,{key:4,class:"px-4 xl:px-0 mt-4 mb-16"},{default:h(()=>[$(y(r.$t("noClaimableIncentives")),1)]),_:1})):q("",!0),o("div",Ua,[o("h2",Wa,y(r.$t("pages.claim.titles.incentivesOnOtherNetworks")),1),_(Fe,{class:"mt-4",flexWrap:""},{default:h(()=>[(w(!0),D(we,null,ve(R.value,E=>(w(),S(J,{key:E.id,tag:"a",href:`https://app.balancer.fi/#/${E.id}/claim`,color:"white"},{default:h(()=>[o("img",{src:i(ct)(E.id),alt:E.id,class:"mr-2 w-6 h-6 rounded-full shadow-sm"},null,8,za),$(" "+y(r.$t("pages.claim.btns.claimOn"))+" "+y(E.name),1)]),_:2},1032,["href"]))),128))]),_:1}),i(m)?(w(),S(Ve,{key:0,tag:"router-link",to:"/ethereum/claim/legacy",class:"flex items-center"},{default:h(()=>[$(y(r.$t("legacyClaims"))+" ",1),_(Pe,{name:"arrow-right",size:"sm",class:"mx-1"})]),_:1})):q("",!0)])])])])}}});export{os as default};
//# sourceMappingURL=index-0a503100.js.map
