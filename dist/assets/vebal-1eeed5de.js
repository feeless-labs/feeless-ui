import{u as se,al as it,ax as Re,ao as qe,av as pe,c as y,V as Ce,r as Te,bs as W,S as rt,Q as Ve,fk as ct,fl as dt,G as z,fm as Se,Z as Ge,d as M,E as O,o,B as $,w as u,f as _,b as t,t as l,C as e,a as i,U as T,a4 as X,a3 as U,a8 as ie,a7 as ne,bd as ut,aD as Ae,be as He,bg as je,y as ue,fn as We,aE as J,e as N,x as ve,cn as _t,_ as ae,D as ye,fo as Oe,H as ke,a6 as he,fp as Pe,fq as mt,J as Me,fr as pt,L as vt,fs as gt,ft,fu as ht,fv as yt,fw as kt,b6 as bt,fx as xt,b8 as Bt,fy as Fe,T as Qe,dY as wt,fz as Lt,a0 as Ye,k as be,fA as $t,bc as Ct,bB as Tt,a1 as fe,az as Ke,fB as Vt,l as Ze,F as de,aB as St,ap as xe,fC as At,am as Nt,an as It,a5 as Je,ay as Et,eH as Pt,at as Xe,br as Mt,j as Ft,bH as Dt,f6 as zt,cq as Ut,p as et,g as tt,aq as we,fD as Rt,fE as qt,aI as De,aC as Le}from"./index-60943df8.js";import{_ as Gt}from"./BalTextInput-8696f087.js";import{_ as le}from"./BalTooltip.vue_vue_type_style_index_0_lang-8cf64573.js";import{_ as Ht}from"./BalPopover-5c2abaf0.js";import{_ as Ne}from"./BalCheckbox-acca24cf.js";import{_ as jt}from"./BalTable.vue_vue_type_style_index_0_lang-bf21b918.js";import{_ as Wt}from"./BalChipNew.vue_vue_type_script_setup_true_lang-42797145.js";import{_ as Ot,a as Qt}from"./TimeLockedVote.vue_vue_type_script_setup_true_lang-e1963410.js";import{_ as Yt}from"./TokenPills.vue_vue_type_script_setup_true_lang-ee78290c.js";import{u as Kt}from"./useBreakpoints-76e5f77c.js";import{_ as Zt}from"./BalAssetSet-c1957457.js";import{_ as Jt,P as Xt}from"./PoolFeatureChip.vue_vue_type_script_setup_true_lang-913aa74f.js";import{_ as Ie}from"./BalAlert-7103ffb1.js";import{_ as Ee}from"./BalAsset-68194947.js";import{u as ot,p as eo,b as to}from"./user-pools.provider-31628f0d.js";import{_ as oo}from"./UnlockPreviewModal.vue_vue_type_script_setup_true_lang-e5bd9b8c.js";import{_ as so}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-cd43f961.js";import{p as no}from"./pool-staking.provider-018db08c.js";import{_ as ao}from"./BalBlankSlate.vue_vue_type_style_index_0_lang-fb55cd08.js";import{_ as lo}from"./BalChart.vue_vue_type_script_setup_true_lang-f6feb788.js";import{P as io}from"./constants-5d025550.js";import{F as ro}from"./vue-query-ecc7fe75.js";import{L as co}from"./echarts-eb254b25.js";import"./helpers-7076a817.js";import"./BalChip-810690c3.js";import"./usePoolQuery-da6fa219.js";import"./BalCircle-528e0679.js";import"./anime.es-37453147.js";import"./numeral-088ce989.js";function st(){var I;const{account:p}=se(),{networkConfig:s}=it(),n=Re(),{votingPools:a,votingGaugeAddresses:m}=qe(),{veBalBalance:r}=pe(),b=y(()=>!!p.value),v=Ce(ct.gauge,Ve.Gauges.VotingEscrowLocks((I=n.data.value)==null?void 0:I.lockedAmount),()=>({__name:"VeBalVotingEscrowLock",votingEscrowLocks:{__args:{where:{user:p.value.toLowerCase(),votingEscrowID:W[rt.value].addresses.veFls.toLocaleLowerCase()}},votingEscrowID:{id:!0},updatedAt:!0}}),Te({enabled:b})),k=y(()=>{var h;return(h=v.data.value)==null?void 0:h.votingEscrowLocks}),{data:f}=dt(m),c=y(()=>a.value.filter(h=>{var V;return z(h.userVotes).gt(0)&&h.lastUserVoteTime<S.value&&!Se(h.lastUserVoteTime)&&!((V=f.value)!=null&&V.includes(h.gauge.address))})),x=y(()=>z(r.value).gt(0)&&!!c.value.length),S=y(()=>{var h,V;return((V=(h=k.value)==null?void 0:h.find(F=>Ge(F.votingEscrowID.id,s.addresses.veBAL)))==null?void 0:V.updatedAt)||0});return{votingEscrowLocks:k,lastReceivedVebal:S,poolsUsingUnderUtilizedVotingPower:c,shouldResubmitVotes:x}}const uo=864e5*7;function _o(){const p=Re(),s=y(()=>p.isLoading),n=y(()=>p.data.value),a=y(()=>{var v;return(v=n.value)==null?void 0:v.isExpired}),m=y(()=>{var v,k;return!!((v=n.value)!=null&&v.hasExistingLock)&&!((k=n.value)!=null&&k.isExpired)}),r=y(()=>{var v,k;return!!((v=n.value)!=null&&v.hasExistingLock)&&((k=n.value)==null?void 0:k.isExpired)}),b=y(()=>{var v,k,f;return(v=n.value)!=null&&v.hasExistingLock&&!((k=n.value)!=null&&k.isExpired)?((f=n.value)==null?void 0:f.lockedEndDate)<Date.now()+uo:!1});return{isLoading:s,hasLock:m,hasExpiredLock:r,veBalLockTooShort:b,veBalExpired:a}}const mo={class:"flex text-gray-600 dark:text-gray-100"},po={key:0,class:"px-2"},vo={class:"flex justify-center items-center p-2 w-5 h-5 text-xs text-center text-white bg-blue-600 rounded-full"},go={class:"flex overflow-hidden flex-col py-4 px-3 w-64 rounded-lg"},fo={class:"text-xl font-bold whitespace-nowrap"},ho={class:"py-2 text-xl font-bold"},yo=M({__name:"GaugesFilters",props:{networkFilters:{},showExpiredGauges:{type:Boolean},activeNetworkFilters:{}},emits:["choose-network","update:showExpiredGauges","update:activeNetworkFilters"],setup(p,{emit:s}){const n=s,a=p,m=O([...a.activeNetworkFilters]),r=O(!1),b=O(a.activeNetworkFilters),v=y(()=>b.value.length+Number(r.value));function k(c){const{checked:x}=c.target;r.value=x,n("update:showExpiredGauges",x)}function f(c){const x=m.value.indexOf(c);x===-1?m.value.push(c):m.value.splice(x,1);const S=[...m.value];n("update:activeNetworkFilters",S),b.value=S}return(c,x)=>{const S=ie,I=ne,h=Ne,V=Ht;return o(),$(V,{noPad:"",class:"flex-0"},{activator:u(()=>[_(I,{class:"flex-1 h-full",color:"white",size:"sm"},{default:u(()=>[_(S,{name:"filter",size:"lg",class:"mr-3 text-gray-600 dark:text-gray-100"}),t("div",mo,l(c.$t("gaugeFilter.moreFilters")),1),e(v)>0?(o(),i("div",po,[t("div",vo,l(e(v)),1)])):T("",!0)]),_:1})]),default:u(()=>[t("div",go,[t("div",fo,l(c.$t("network")),1),(o(!0),i(U,null,X(c.networkFilters,F=>(o(),i("div",{key:F,class:"flex py-1 text-base text-gray-600 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-850 cursor-pointer"},[_(h,{modelValue:e(m).includes(Number(F)),name:"networkFilter",label:e(W)[F].chainName,noMargin:"",alignCheckbox:"items-center",onInput:d=>f(Number(F))},null,8,["modelValue","label","onInput"])]))),128)),t("div",ho,l(c.$t("gaugeFilter.gaugeDisplay")),1),_(h,{class:"flex py-1 text-base text-gray-600 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-850 cursor-pointer",name:"expiredGaugesFilter",label:c.$t("gaugeFilter.showExpired"),noMargin:"",alignCheckbox:"items-center",modelValue:c.showExpiredGauges,onInput:k},null,8,["label","modelValue"])])]),_:1})}}}),ko=M({__name:"BalLazy",setup(p){const s=O(!1);return ut(()=>{s.value=!0}),(n,a)=>e(s)?Ae(n.$slots,"default",{key:0}):T("",!0)}}),bo={width:"24",height:"15",viewBox:"0 0 24 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},xo=["stroke"],Bo=["stroke"],wo=M({__name:"CompositionIcon",setup(p){const{theme:s}=He(),{darkMode:n}=je(),a=y(()=>n.value?s.colors.white:s.colors.black);return(m,r)=>(o(),i("svg",bo,[t("circle",{cx:"7.5",cy:"7.5",r:"7",stroke:e(a)},null,8,xo),t("circle",{cx:"16.5",cy:"7.5",r:"7",stroke:e(a)},null,8,Bo)]))}}),Lo={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},$o=["stroke"],Co=["stroke"],To=["stroke"],Vo=M({__name:"NetworkIcon",setup(p){const{theme:s}=He(),{darkMode:n}=je(),a=y(()=>n.value?s.colors.white:s.colors.black);return(m,r)=>(o(),i("svg",Lo,[t("path",{d:"M9.99984 18.3333C14.6022 18.3333 18.3332 14.6023 18.3332 9.99996C18.3332 5.39759 14.6022 1.66663 9.99984 1.66663C5.39746 1.66663 1.6665 5.39759 1.6665 9.99996C1.6665 14.6023 5.39746 18.3333 9.99984 18.3333Z",stroke:e(a),"stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},null,8,$o),t("path",{d:"M1.6665 10H18.3332",stroke:e(a),"stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Co),t("path",{d:"M9.99984 1.66663C12.0842 3.94859 13.2688 6.90999 13.3332 9.99996C13.2688 13.0899 12.0842 16.0513 9.99984 18.3333C7.91544 16.0513 6.73088 13.0899 6.6665 9.99996C6.73088 6.90999 7.91544 3.94859 9.99984 1.66663V1.66663Z",stroke:e(a),"stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"},null,8,To)]))}}),So={class:"mb-2 text-sm font-semibold"},Ao={class:"text-xs font-normal"},No={class:"mb-2"},Io={class:"mb-2"},Eo=M({__name:"GaugeVoteInfo",props:{pool:{}},setup(p){const s=p,{fNum:n}=ue(),a=y(()=>k(s.pool.votes)),m=y(()=>k(s.pool.votesNextPeriod)),r=y(()=>Number(s.pool.votesNextPeriod)-Number(s.pool.votes)),b=y(()=>{const f=k(r.value.toString());return`${r.value>0?"+":""}${f}`}),v=y(()=>({"text-green-600":r.value>0,"text-red-600":r.value<0}));function k(f){const c=We(z(f),-18);return n(c.toString(),{style:"percent",maximumFractionDigits:2,fixedFormat:!0})}return(f,c)=>{const x=le;return o(),$(x,{textAlign:"left"},{activator:u(()=>[t("span",{class:J(e(v))},l(e(m)),3)]),default:u(()=>[t("div",null,[t("div",So,l(f.$t("veBAL.liquidityMining.votesTooltip.title")),1),t("div",Ao,[t("div",No,l(f.$t("veBAL.liquidityMining.votesTooltip.thisPeriod",[e(a)])),1),t("div",Io,[N(l(f.$t("veBAL.liquidityMining.votesTooltip.nextPeriod",[e(m)]))+" ",1),t("span",{class:J(e(v))},l(e(b)),3)])])])]),_:1})}}}),Po={class:"flex flex-col gap-1"},Mo={class:"font-semibold"},Fo=M({__name:"GaugesTableMyVotes",props:{pool:{}},setup(p){const s=p,{t:n}=ve(),{fNum:a}=ue(),{poolsUsingUnderUtilizedVotingPower:m}=st(),r=y(()=>{const v=We(new _t(s.pool.userVotes),-4);return a(v.toString(),{style:"percent",maximumFractionDigits:2})}),b=y(()=>!!m.value.find(v=>Ge(v.address,s.pool.address)));return(v,k)=>{const f=ie;return o(),i("div",{class:J({"flex justify-end items-center":!0,"text-red-600":e(b)})},[N(l(e(r))+" ",1),e(Se)(v.pool.lastUserVoteTime)?(o(),$(Ot,{key:0,pool:v.pool},null,8,["pool"])):e(b)?(o(),$(le,{key:1,template:"",textAlign:"left",width:"60"},{activator:u(()=>[_(f,{class:"ml-1",name:"alert-triangle",size:"sm"})]),default:u(()=>[t("div",Po,[t("span",Mo,l(e(n)("veBAL.liquidityMining.resubmit.hint.title")),1),t("span",null,l(e(n)("veBAL.liquidityMining.resubmit.hint.description")),1)])]),_:1})):T("",!0)],2)}}}),Do={class:"text-xs font-normal"},zo=M({__name:"IconLimit",props:{amount:{default:"1"},tooltip:{default:"Limit amount"},size:{default:"md"}},setup(p){const s=p,n=y(()=>{switch(s.size){case"sm":return"text-xxs p-0 w-5 h-5 leading-4";case"lg":return"text-md p-2 w-11 h-11";default:return"text-sm p-1 w-8 h-8"}});return(a,m)=>{const r=le;return o(),$(r,{textAlign:"left"},{activator:u(()=>[t("div",{class:J([n.value,"inline-block font-medium text-center rounded-full border-2 border-red-600"])},l(a.amount),3)]),default:u(()=>[t("div",null,[t("div",Do,l(a.tooltip),1)])]),_:1})}}});const ze=ae(zo,[["__scopeId","data-v-7d8b87a1"]]),Uo={},Ro={class:"flex relative items-center py-1 pr-1.5 pl-2 mr-1 max-h-10 text-white bg-gradient-to-tr rounded from-[#977622] to-[#f0cb6d]"},qo=t("span",{class:"text-xs font-semibold"},"ve8020",-1),Go=[qo];function Ho(p,s){return o(),i("div",Ro,Go)}const jo=ae(Uo,[["render",Ho]]),Wo={class:"flex items-center"},Oo={key:0,class:"py-4 px-6"},Qo={class:"flex justify-center items-center w-8 h-8 bg-gray-50 dark:bg-gray-800 rounded shadow-sm"},Yo=["src","alt"],Ko={class:"flex items-center"},Zo={key:0,class:"py-4 px-6"},Jo={key:0,class:"flex items-center py-4 px-6"},Xo={key:0,class:"text-left"},es={key:0,class:"flex justify-end py-4 px-6"},ts={class:"flex justify-end w-6"},os={key:0,class:"py-4 px-6 text-right"},ss=M({__name:"GaugesTable",props:{data:{default:()=>[]},isLoading:{type:Boolean},noPoolsLabel:{default:"No pools"},isPaginated:{type:Boolean,default:!1},filterText:{default:""},renderedRowsIdx:{},selectVotesDisabled:{type:Boolean}},setup(p){const s=p,n=ye(),{t:a}=ve(),{upToLargeBreakpoint:m}=Kt(),{isWalletReady:r}=se(),{getIsGaugeExpired:b,toggleSelection:v,isSelected:k}=Oe(),f=y(()=>[{name:a("veBAL.liquidityMining.table.chain"),id:"chain",accessor:"",Header:"chainColumnHeader",Cell:"networkColumnCell",width:50,noGrow:!0},{name:a("veBAL.liquidityMining.table.assets"),id:"icons",accessor:"uri",Header:"iconColumnHeader",Cell:"iconColumnCell",width:100,noGrow:!0},{name:a("veBAL.liquidityMining.table.composition"),id:"poolComposition",accessor:"id",Cell:"poolCompositionCell",width:350},{name:a("veBAL.liquidityMining.table.nextPeriodVotes"),accessor:"id",align:"right",id:"nextPeriodVotes",Cell:"nextPeriodVotesCell",sortKey:d=>Number(d.votesNextPeriod),width:160,cellClassName:"font-numeric"},{name:a("veBAL.liquidityMining.table.myVotes"),accessor:"myVotes",align:"right",id:"myVotes",sortKey:d=>Number(d.userVotes),width:100,Cell:"myVotesCell",cellClassName:"font-numeric",hidden:!r.value},{name:a("veBAL.liquidityMining.table.voteSelect"),id:"vote",accessor:"id",align:"right",Cell:"voteSelectColumnCell",sortKey:d=>k(d),width:100,hidden:!r.value,isCheckbox:!0}]);function c(d){return d.includes("balancer.fi")||d.includes("localhost")}function x(d,B){const g=Fe(d,d.network);if(!c(g))window.location.href=g;else{const P=n.resolve({name:"pool",params:{id:d.id,networkSlug:Pe(d.network)}});B?window.open(P.href):n.push(P)}}function S(d){const B=Fe(d,d.network);return c(B)?null:B}function I(d){return!!Number(d)}function h(d){return I(d.userVotes)&&b(d.gauge.address)?"expired-gauge-row":""}function V(d){return d.filter(B=>{var g,P;return((g=B.symbol)==null?void 0:g.toLowerCase())===((P=s.filterText)==null?void 0:P.toLowerCase())}).map(B=>B.address)}function F(d){return d.filter(B=>{var g,P;return s.filterText&&((P=B.symbol)==null?void 0:P.toLowerCase().includes((g=s.filterText)==null?void 0:g.toLowerCase()))}).map(B=>B.address)}return(d,B)=>{const g=Vo,P=wo,R=le,ee=ko,D=Ne,q=jt,Q=ke;return o(),$(Q,{shadow:"lg",class:"mt-4",square:e(m),noBorder:e(m),noPad:""},{default:u(()=>[_(q,{columns:e(f),data:d.data,rowKey:w=>w.gauge.address,isLoading:d.isLoading,skeletonClass:"h-64",sticky:"both",square:e(m),isPaginated:d.isPaginated,href:{getHref:w=>S(w)},onRowClick:x,getTableRowClass:h,initialState:{sortColumn:"nextPeriodVotes",sortDirection:"desc"},pin:{pinOn:"address",pinnedData:[]},renderedRowsIdx:d.renderedRowsIdx},{chainColumnHeader:u(()=>[t("div",Wo,[_(g)])]),networkColumnCell:u(({network:w})=>[d.isLoading?T("",!0):(o(),i("div",Oo,[t("div",Qo,[t("img",{src:e(he)(e(Pe)(w)),alt:w,class:"w-6 h-6"},null,8,Yo)])]))]),iconColumnHeader:u(()=>[t("div",Ko,[_(P)])]),iconColumnCell:u(w=>[d.isLoading?T("",!0):(o(),i("div",Zo,[_(Zt,{logoURIs:e(mt)(w),width:100},null,8,["logoURIs"])]))]),poolCompositionCell:u(w=>{var G;return[d.isLoading?T("",!0):(o(),i("div",Jo,[e(Me)(w.id)?(o(),i("div",Xo,l((G=e(Me)(w.id))==null?void 0:G.name),1)):(o(),$(Yt,{key:1,tokens:e(pt)(w),isStablePool:e(vt)(w.poolType)||e(gt)(w.poolType),selectedTokens:V(w.tokens),pickedTokens:F(w.tokens)},null,8,["tokens","isStablePool","selectedTokens","pickedTokens"])),e(ft)(w)?(o(),$(jo,{key:2})):T("",!0),e(ht)(w)?(o(),$(R,{key:3,text:d.$t("clpTooltip"),width:"56"},{activator:u(()=>[_(Jt,{feature:e(yt).CLP,protocols:[e(Xt).Gyro],class:"ml-1"},null,8,["feature","protocols"])]),_:1},8,["text"])):T("",!0),e(kt)(w)?(o(),$(Wt,{key:4,class:"ml-2"})):T("",!0),e(b)(w.gauge.address)?(o(),$(Qt,{key:5,class:"ml-2"})):T("",!0)]))]}),nextPeriodVotesCell:u(w=>[_(ee,null,{default:u(()=>{var G;return[d.isLoading?T("",!0):(o(),i("div",es,[_(Eo,{pool:w},null,8,["pool"]),t("div",ts,[e(bt)(w.id)?(o(),$(ze,{key:0,size:"sm",amount:"10",tooltip:d.$t("veBAL.liquidityMining.limitsTooltip.distributionsCappedVeBAL")},null,8,["tooltip"])):(G=w.gauge)!=null&&G.relativeWeightCap&&w.gauge.relativeWeightCap!=="1.0"?(o(),$(ze,{key:1,size:"sm",amount:(Number(w.gauge.relativeWeightCap)*100).toFixed(),tooltip:d.$t("veBAL.liquidityMining.limitsTooltip.distributionsCappedAt",[(Number(w.gauge.relativeWeightCap)*100).toFixed()])},null,8,["amount","tooltip"])):T("",!0)])]))]}),_:2},1024)]),myVotesCell:u(w=>[d.isLoading?T("",!0):(o(),i("div",os,[_(Fo,{pool:w},null,8,["pool"])]))]),voteSelectColumnCell:u(w=>[e(r)?(o(),$(D,{key:0,class:"flex -top-2 justify-center ml-8 cursor-pointer",name:"expiredGaugesFilter",noMargin:"",modelValue:e(k)(w),disabled:e(xt)(w)||e(Se)(w.lastUserVoteTime)||d.selectVotesDisabled,onClick:B[0]||(B[0]=Bt(()=>{},["stop"])),onInput:G=>e(v)(w)},null,8,["modelValue","disabled","onInput"])):T("",!0)]),_:1},8,["columns","data","rowKey","isLoading","square","isPaginated","href","renderedRowsIdx"])]),_:1},8,["square","noBorder"])}}});const ns={class:"flex flex-col lg:flex-row gap-2 lg:gap-4 justify-between items-baseline lg:items-start pb-1 lg:pb-0"},as={class:"mr-auto max-w-3xl"},me=M({__name:"VotingAlert",props:{title:{}},setup(p){return(s,n)=>{const a=Ie;return o(),$(a,Qe(s.$attrs,{type:"warning",title:s.title,contentClass:"w-full",class:"mx-4 xl:mx-0 mb-3"}),{default:u(()=>[t("div",ns,[t("div",as,[Ae(s.$slots,"default")])])]),_:3},16,["title"])}}});function $e(p,s=200){let n;return wt((a,m)=>({get(){return a(),p},set(r){clearTimeout(n),n=setTimeout(()=>{p=r,m()},s)}}))}function ls(p,s){const n=ye(),a=$e(!1,500),m=$e("",500),r=$e(v(),500),b=y(()=>a.value?p.value:p.value.filter(c=>Number(c.userVotes)>0?!0:!Lt(s.value,c.gauge.address)));function v(){const c=n.currentRoute.value.query.chain;if(!c||typeof c!="string")return[];const x=Ye[c.toUpperCase()];return x?[x]:[]}const k=y(()=>b.value.filter(c=>{let x=!0;return r.value.length>0&&!r.value.includes(c.network)&&(x=!1),x&&c.tokens.some(S=>{var I;return(I=S.symbol)==null?void 0:I.toLowerCase().includes(m.value.toLowerCase())})})),f=Object.entries(W).filter(c=>{const x=c[1];return!x.testNetwork&&x.pools.Stakable.VotingGaugePools.length>0}).map(c=>Number(c[0]));return{showExpiredGauges:a,activeNetworkFilters:r,filteredVotingPools:k,tokenFilter:m,networkFilters:f}}const is={class:"flex flex-col"},rs={class:"flex flex-col lg:flex-row gap-4 lg:justify-between lg:items-end"},cs={class:"px-4 xl:px-0 pb-2 max-w-3xl"},ds={class:"mb-2"},us={class:"flex flex-wrap justify-between items-end px-4 lg:px-0"},_s={class:"flex gap-2 xs:gap-3 mb-3 lg:mb-0"},ms={class:"flex items-center"},ps=t("p",{class:"inline mr-1 text-sm text-secondary"}," My unallocated votes ",-1),vs={key:0},gs={key:1,class:"mr-1"},fs={class:"flex items-center"},hs={class:"text-lg font-semibold tabular-nums"},ys={class:"flex mb-3 lg:mb-0"},ks={class:"flex items-center h-full"},bs={key:0,class:"flex-0 ml-5 w-32 h-8"},xs=M({__name:"LMVoting",setup(p){const{account:s}=se(),{votingPools:n,unallocatedVotes:a,votingPeriodEnd:m,votingPeriodLastHour:r,isRefetchingVotingPools:b,resetVotingPools:v}=qe(),{veBalLockTooShort:k,veBalExpired:f,hasLock:c,hasExpiredLock:x}=_o(),{shouldResubmitVotes:S}=st(),{networkSlug:I}=be(),{isWalletReady:h,isMismatchedNetwork:V}=se(),{hasVeBalBalance:F,noVeBalBalance:d}=pe(),{fNum:B}=ue(),{isLoading:g,isLoadingVotingPools:P,expiredGauges:R,unlockedSelectedPools:ee,hasSubmittedVotes:D,hasAllVotingPowerTimeLocked:q,loadRequestWithExistingVotes:Q,isVotingRequestLoaded:w}=Oe(),{showExpiredGauges:G,activeNetworkFilters:j,filteredVotingPools:re,tokenFilter:C,networkFilters:E}=ls(n,R),L=y(()=>$t(a.value,B)),A=y(()=>g.value||!F.value||q.value),Y=y(()=>A.value||ee.value.length===0||V.value),te=O(null),oe=O(40);let K;function Be(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!te.value){oe.value=n.value.length;return}const H={rootMargin:"0% 0% 50% 0%"},Z=ce=>{ce.forEach(ge=>{ge.isIntersecting&&(oe.value+=40)})};K=new IntersectionObserver(Z,H),K.observe(te.value)}return Ct(()=>{Be()}),Tt(()=>{K==null||K.disconnect()}),fe(()=>[G.value,j.value],()=>{oe.value=n.value.length},{deep:!0}),fe(g,async H=>{H||Q(n.value)}),fe(b,async()=>{(Vt.value||!w)&&Q(n.value)}),fe(s,(H,Z)=>{Z&&(w.value=!1,v())}),(H,Z)=>{const ce=le,ge=ke,nt=ie,at=Gt,lt=ne;return o(),i("div",is,[t("div",rs,[t("div",cs,[t("h3",ds,[N(l(H.$t("veBAL.liquidityMining.title"))+" ",1),_(ce,{text:H.$t("veBAL.liquidityMining.description"),iconSize:"sm",iconClass:"text-gray-400 dark:text-gray-600",width:"72",class:"mt-1"},null,8,["text"])])])]),e(k)?(o(),$(me,{key:0,title:"veBAL not locked for 7 days"},{default:u(()=>[N(" You must have veBAL locked for more than 7 days to vote on gauges. ")]),_:1})):T("",!0),e(S)?(o(),$(me,{key:1,title:"Resubmit your votes to utilize your full voting power"},{default:u(()=>[N(" Votes on pools are set at the time of the vote. Since you’ve added new veBAL since your original vote, you have additional voting power which is not being used. Use the 'Edit votes' button to resubmit your votes. ")]),_:1})):T("",!0),e(d)&&!e(g)?(o(),$(me,{key:2,title:"You need some veBAL to vote on gauges"},{default:u(()=>[N(" Get veBAL by locking up LP tokens from the 80% BAL / 20% WETH pool. ")]),_:1})):T("",!0),e(f)?(o(),$(me,{key:3,title:"You can't vote because your veBAL has expired"},{default:u(()=>[N(" You need some veBAL to vote on gauges. Unlock and relock your B-80BAL-20-WETH to get some veBAL. ")]),_:1})):T("",!0),e(q)?(o(),$(me,{key:4,title:"100% of your votes are locked"},{default:u(()=>[N(" You won't be able to make any edits until some of them are unlocked. ")]),_:1})):T("",!0),t("div",us,[t("div",_s,[_(ge,{shadow:"none",class:"p-0 md:w-48 min-w-max"},{default:u(()=>[t("div",ms,[ps,_(ce,{text:H.$t("veBAL.liquidityMining.myUnallocatedVotesTooltip"),iconClass:"text-gray-400 dark:text-gray-600",iconSize:"sm",width:"72",class:"mt-1"},null,8,["text"])]),t("p",{class:J(["inline mr-1 text-lg font-semibold",{"text-red-500":e(x)}])},[e(c)?(o(),i("span",vs,l(e(L)),1)):(o(),i("span",gs,"—"))],2),e(x)?(o(),$(ce,{key:0,text:H.$t("veBAL.liquidityMining.votingPowerExpiredTooltip"),iconSize:"sm",iconName:"alert-triangle",iconClass:"text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors",width:"72",class:"relative top-0.5"},null,8,["text"])):T("",!0)]),_:1}),_(ge,{shadow:"none",class:"md:w-48 min-w-max"},{default:u(()=>[t("div",fs,[t("p",{class:J([{"text-orange-500 font-medium":e(r)},"inline mr-1 text-sm text-secondary"])}," Voting period ends ",2),_(ce,{text:H.$t("veBAL.liquidityMining.votingPeriodTooltip"),iconSize:"sm",iconClass:"text-gray-400 dark:text-gray-600",width:"72",class:"mt-1"},null,8,["text"])]),t("p",hs,[e(m).length?(o(),i("span",{key:0,class:J({"text-orange-500":e(r)})},l(H.$t("veBAL.liquidityMining.votingPeriodCountdown",e(m))),3)):T("",!0)])]),_:1})]),t("div",ys,[_(at,{modelValue:e(C),"onUpdate:modelValue":Z[0]||(Z[0]=_e=>Ke(C)?C.value=_e:null),class:"mr-5 b-5",name:"tokenSearch",type:"text",placeholder:H.$t("filterByToken"),size:"sm"},{prepend:u(()=>[t("div",ks,[_(nt,{name:"search",size:"md",class:"px-2 text-gray-600"})])]),_:1},8,["modelValue","placeholder"]),_(yo,{networkFilters:e(E),showExpiredGauges:e(G),activeNetworkFilters:e(j),"onUpdate:showExpiredGauges":Z[1]||(Z[1]=_e=>G.value=_e),"onUpdate:activeNetworkFilters":Z[2]||(Z[2]=_e=>j.value=_e)},null,8,["networkFilters","showExpiredGauges","activeNetworkFilters"]),e(h)?(o(),i("div",bs,[_(lt,{tag:e(Y)?"div":"router-link",to:{name:"vebal-voting",params:{networkSlug:e(I)}},label:e(D)?"Edit votes":"Vote",color:"gradient",disabled:e(Y),block:""},null,8,["tag","to","label","disabled"])])):T("",!0)])]),_(ss,{renderedRowsIdx:e(oe),isLoading:e(P),data:e(re),noPoolsLabel:H.$t("noInvestments"),filterText:e(C),selectVotesDisabled:e(A)},null,8,["renderedRowsIdx","isLoading","data","noPoolsLabel","filterText","selectVotesDisabled"]),t("div",{ref_key:"intersectionSentinel",ref:te},null,512)])}}}),Bs="/assets/lock-84d6bf30.svg",ws="/assets/unlock-40f29f89.svg",Ls={class:"flex justify-between items-center"},$s={class:"font-bold label"},Cs=["src"],Ts={key:0},Vs={key:1},Ss={class:"text-xl font-bold truncate"},As={class:"mb-3 secondary-value text-secondary"},Ns={class:"flex"},Is=M({__name:"MyVeBalCards",props:{lockablePool:{},lockablePoolTokenInfo:{},veBalLockInfo:{default:null},totalLockedValue:{}},setup(p){const s=p,n=O(!1),{balanceFor:a}=Ze(),{fNum:m}=ue(),{lockablePoolId:r}=pe(),{isWalletReady:b}=se(),{networkSlug:v}=be(),k=y(()=>z(s.lockablePool.totalLiquidity).div(s.lockablePool.totalShares)),f=y(()=>a(s.lockablePool.address)),c=y(()=>k.value.times(f.value).toString()),x=y(()=>{var h;return(h=s.veBalLockInfo)!=null&&h.isExpired?s.veBalLockInfo.lockedAmount:"0"}),S=y(()=>z(s.lockablePool.totalLiquidity).div(s.lockablePool.totalShares).times(x.value).toString()),I=y(()=>{var h,V;return[{id:"unlockedVeBAL",label:"Unlocked ve8020 BAL/WETH",icon:ws,iconBgColor:"bg-yellow-100",value:m(f.value,de.token),secondaryText:m(c.value,de.fiat)},{id:"lockedVeBAL",label:"Locked ve8020 BAL/WETH",icon:Bs,iconBgColor:"bg-green-50",value:m(((h=s.veBalLockInfo)==null?void 0:h.lockedAmount)??"0",de.token),secondaryText:m(s.totalLockedValue,de.fiat),showUnlockIcon:!!((V=s.veBalLockInfo)!=null&&V.isExpired)}]});return(h,V)=>{const F=le,d=ne,B=ke;return o(),i(U,null,[(o(!0),i(U,null,X(I.value,g=>(o(),$(B,{key:g.id},{default:u(()=>[t("div",Ls,[t("div",$s,l(g.label),1),t("div",{class:J([g.iconBgColor,"flex items-center p-3 rounded-full justifty center bg-red"])},[t("img",{src:g.icon,alt:"card.label"},null,8,Cs)],2)]),t("div",{class:J(["value",g.id])},[g.id==="lockedVeBAL"?(o(),i("div",Ts,[t("span",{class:J([{"text-red-500":e(z)(x.value).gt(0)},"mr-1 font-semibold truncate"])},l(g.value),3),e(z)(x.value).gt(0)?(o(),$(F,{key:0,text:h.$t("veBAL.myVeBAL.cards.myExpiredLockTooltip"),iconSize:"sm",iconName:"alert-triangle",iconClass:"text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors",width:"72",class:"relative top-0.5"},null,8,["text"])):T("",!0)])):(o(),i("div",Vs,[t("span",Ss,l(g.value),1)]))],2),t("div",As,l(g.secondaryText),1),t("div",Ns,[g.id==="unlockedVeBAL"?(o(),i(U,{key:0},[_(d,{color:"blue",outline:"",class:"mr-3",onClick:V[0]||(V[0]=P=>h.$router.push({name:"add-liquidity",params:{id:e(r),networkSlug:e(v)},query:{returnRoute:"vebal"}}))},{default:u(()=>[N(l(h.$t("addLiquidity")),1)]),_:1}),_(d,{color:"blue",outline:"",disabled:Number(f.value)===0,onClick:V[1]||(V[1]=P=>h.$router.push({name:"get-vebal",query:{returnRoute:"vebal"}}))},{default:u(()=>[N(" Lock for veBAL ")]),_:1},8,["disabled"])],64)):T("",!0),g.id==="lockedVeBAL"?(o(),i(U,{key:1},[e(z)(x.value).gt(0)?(o(),$(d,{key:0,disabled:!e(b),color:"blue",outline:"",onClick:V[2]||(V[2]=P=>n.value=!0)},{default:u(()=>[N(" Unlock ")]),_:1},8,["disabled"])):(o(),$(d,{key:1,disabled:!e(b),color:"blue",outline:"",class:"mr-3",onClick:V[3]||(V[3]=P=>h.$router.push({name:"get-vebal",query:{returnRoute:"vebal"}}))},{default:u(()=>[N(" Extend lock ")]),_:1},8,["disabled"]))],64)):T("",!0)])]),_:2},1024))),128)),(o(),$(St,{to:"#modal"},[n.value&&h.veBalLockInfo?(o(),$(oo,{key:0,lockablePool:h.lockablePool,lockablePoolTokenInfo:h.lockablePoolTokenInfo,veBalLockInfo:h.veBalLockInfo,totalLpTokens:x.value,fiatTotalLpTokens:S.value,onClose:V[4]||(V[4]=g=>n.value=!1)},null,8,["lockablePool","lockablePoolTokenInfo","veBalLockInfo","totalLpTokens","fiatTotalLpTokens"])):T("",!0)]))],64)}}});const Es=ae(Is,[["__scopeId","data-v-b19c2667"]]),Ps={class:"mb-4 font-bold text-center"},Ms={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-2 gap-4"},Fs=M({__name:"MyVeBAL",setup(p){const{isLoadingLockPool:s,isLoadingLockInfo:n,lockPool:a,lockPoolToken:m,lock:r,totalLockedValue:b}=ot(),v=y(()=>s.value||n.value);return(k,f)=>{const c=Ee;return o(),i(U,null,[t("h3",Ps,l(k.$t("veBAL.myVeBAL.title")),1),t("div",Ms,[v.value&&!(e(a)&&e(m))?(o(),i(U,{key:0},X(2,x=>_(c,{key:x,class:"h-24"})),64)):e(a)&&e(m)?(o(),$(Es,{key:1,veBalLockInfo:e(r),lockablePool:e(a),lockablePoolTokenInfo:e(m),totalLockedValue:e(b)},null,8,["veBalLockInfo","lockablePool","lockablePoolTokenInfo","totalLockedValue"])):T("",!0)])],64)}}}),Ds={class:"relative"},zs={key:0,class:"loader"},Us=M({__name:"IconLoaderWrapper",props:{isLoading:{type:Boolean,default:!1}},setup(p){return(s,n)=>(o(),i("div",Ds,[s.isLoading?(o(),i("div",zs)):T("",!0),Ae(s.$slots,"default",{},void 0,!0)]))}});const Ue=ae(Us,[["__scopeId","data-v-1627f7af"]]),Rs={class:"flex flex-col"},qs={class:"mb-1.5 text-lg font-bold"},Gs={class:"mb-5 text-sm text-secondary"},Hs={class:"flex justify-between p-4 -mb-0.5 rounded-t-lg border-2 border-gray-200 dark:border-gray-800 bg-slate-100 dark:bg-slate-800"},js=t("span",{class:"font-semibold"},"Ethereum",-1),Ws={class:"font-semibold"},Os={class:"mb-5 rounded-b-lg border-2 border-gray-200 dark:border-gray-800"},Qs={class:"font-medium"},Ys=M({__name:"SyncSelectNetwork",props:{chosenNetworks:{},veBalBalance:{},activeTabIdx:{}},emits:["update:activeTabIdx","toggleNetwork"],setup(p,{emit:s}){const{account:n}=se(),{networksBySyncState:a,l2VeBalBalances:m,tempSyncingNetworks:r}=xe(),b=p,v=s,k=c=>{v("toggleNetwork",c)};async function f(){b.chosenNetworks.size&&v("update:activeTabIdx",1)}return(c,x)=>{const S=Ne,I=ne;return o(),i("div",Rs,[t("div",qs,l(c.$t("crossChainBoost.selectNetworkModal.title")),1),t("div",Gs,l(c.$t("crossChainBoost.selectNetworkModal.description")),1),t("div",Hs,[js,t("div",Ws,l(c.veBalBalance)+" veBAL",1)]),t("div",Os,[(o(!0),i(U,null,X(e(At),h=>{var V,F,d;return o(),i("div",{key:h,"aria-disabled":"true",class:"border-b-2 last:border-b-0 dark:border-gray-800"},[N(l(e(r).value)+" ",1),t("div",{class:J(["flex justify-between items-center p-4",{"grayscale pointer-events-none opacity-40":e(a).synced.includes(h)||((F=(V=e(r))==null?void 0:V[e(n)])==null?void 0:F.networks.includes(h))}])},[_(S,{noMargin:"",alignCheckbox:"items-center",name:h.toString(),modelValue:c.chosenNetworks.has(h),label:e(W)[h].chainName,class:"font-medium",onInput:B=>k(h)},null,8,["name","modelValue","label","onInput"]),t("div",Qs,l(((d=e(m))==null?void 0:d[h])||"0.0000")+" veBAL ",1)],2)])}),128))]),_(I,{block:"",color:"gradient",size:"md",disabled:c.chosenNetworks.size===0,onClick:f},{default:u(()=>[N(l(c.$t("next")),1)]),_:1},8,["disabled"])])}}}),Ks={class:"flex flex-col"},Zs=t("div",{class:"mb-2 text-lg font-bold"},"Sync veBAL",-1),Js={class:"mb-5 text-sm text-secondary"},Xs={class:"flex items-center py-1 px-3 border-b-2 border-gray-200 dark:border-gray-800 bg-slate-100 dark:bg-slate-800"},en=["src"],tn={class:"font-semibold"},on={class:"flex border-b-2 last:border-b-0 dark:border-gray-800"},sn={class:"p-4 w-6/12 text-gray-600 border-r-2 dark:border-gray-800"},nn={class:"text-sm font-medium text-secondary"},an={class:"text-lg font-semibold text-black dark:text-white"},ln={class:"p-4 w-6/12 text-secondary"},rn={class:"text-sm font-medium text-secondary"},cn={class:"text-lg font-semibold text-black dark:text-white"},dn=t("div",{class:"grow"},null,-1),un=M({__name:"SyncNetworkAction",props:{chosenNetworks:{},activeTabIdx:{},veBalBalance:{}},emits:["update:activeTabIdx"],setup(p,{emit:s}){const n=p,a=s,{t:m}=ve(),{addTransaction:r}=Nt(),{txListener:b}=It(),{l2VeBalBalances:v,sync:k,setTempSyncingNetworks:f,tempSyncingNetworks:c,setSyncTxHashes:x}=xe(),{isMismatchedNetwork:S}=se(),I=O(0);async function h(B,g){r({id:B.hash,type:"tx",action:"sync",summary:`Sync veBAL to ${W[g].chainName} network`}),b(B,{onTxConfirmed:async()=>{x(g,B.hash)},onTxFailed:()=>{}})}async function V(B){try{const g=await k(B);return h(g,B),f(Array.from(n.chosenNetworks)),localStorage.setItem("tempSyncingNetworks",JSON.stringify(c.value)),x(B,g.hash),g}catch(g){return console.error(g),Promise.reject(g)}}function F(){a("update:activeTabIdx",2)}const d=y(()=>{const B=[];return n.chosenNetworks.forEach(g=>{B.push({label:m("crossChainBoost.syncToNetwork",{network:W[g].chainName}),loadingLabel:m("crossChainBoost.syncingToNetwork",{network:W[g].chainName}),confirmingLabel:m("crossChainBoost.syncingToNetwork",{network:W[g].chainName}),action:async()=>V(g),stepTooltip:m("crossChainBoost.syncToNetwork",{network:W[g].chainName})})}),B});return(B,g)=>{const P=so;return o(),i("div",Ks,[Zs,t("div",Js,l(B.$t("crossChainBoost.syncNetworkAction.title")),1),(o(!0),i(U,null,X(B.chosenNetworks.values(),R=>{var ee;return o(),i("div",{key:R,class:"mb-4 rounded-lg border-2 border-gray-200 dark:border-gray-800"},[t("div",Xs,[t("img",{src:e(he)(R),alt:"",class:"p-0.5 mr-2 w-8 h-8 rounded-full cursor-pointer"},null,8,en),t("div",tn,l(e(W)[R].chainName),1)]),t("div",null,[t("div",on,[t("div",sn,[t("div",nn,l(B.$t("crossChainBoost.currentBalance")),1),t("div",an,l(((ee=e(v))==null?void 0:ee[R])||"0.0000")+" veBAL ",1)]),t("div",ln,[t("div",rn,l(B.$t("crossChainBoost.postSyncBalance")),1),t("div",cn,l(B.veBalBalance||"0.0000")+" veBAL ",1)])])])])}),128)),dn,_(P,{actions:e(d),primaryActionType:"sync",spacerWidth:10,disabled:e(S),onSuccess:F,onSetCurrentActionIndex:g[0]||(g[0]=R=>I.value=R)},null,8,["actions","disabled"])])}}}),_n="/assets/success-check-93cbf878.svg",mn={class:"flex items-center mb-3 text-xl font-bold"},pn=t("img",{src:_n,alt:"",class:"mr-2"},null,-1),vn={class:"mb-6 text-sm text-gray-600 dark:text-gray-300"},gn={class:"overflow-hidden mb-5 rounded-lg border-2 border-gray-200 dark:border-gray-800"},fn={class:"flex border-b-2 last:border-b-0 border-gray-200 dark:border-gray-800 bg-slate-100 dark:bg-slate-800"},hn=t("div",{class:"p-4 w-6/12 font-semibold text-black dark:text-gray-300 grow"}," Ethereum Mainnet ",-1),yn={class:"p-4 text-sm font-medium text-black dark:text-gray-300"},kn={class:"p-4 font-semibold text-black dark:text-gray-300 grow"},bn={key:0,class:"flex pr-2 pl-1 align-center"},xn=M({__name:"SyncFinalState",props:{chosenNetworks:{},veBalBalance:{}},emits:["close"],setup(p){const{syncLayerZeroTxLinks:s}=xe();return(n,a)=>{const m=ie,r=Je,b=Ie,v=ne;return o(),i("div",null,[t("div",mn,[pn,N(" "+l(n.$t("crossChainBoost.syncInitiatedModal.title")),1)]),t("div",vn,l(n.$t("crossChainBoost.syncInitiatedModal.description")),1),t("div",gn,[t("div",fn,[hn,t("div",yn,l(n.veBalBalance)+" veBAL ",1)]),(o(!0),i(U,null,X(n.chosenNetworks.values(),k=>(o(),i("div",{key:k,class:"flex border-b-2 last:border-b-0 dark:border-gray-800"},[t("div",kn,l(e(W)[k].chainName),1),t("div",{class:J(["p-4 text-sm font-medium text-gray-600",{"pr-0":e(s)[k]}])},l(n.veBalBalance)+" veBAL ",3),e(s)[k]?(o(),i("div",bn,[_(r,{href:e(s)[k],external:"",noStyle:"",class:"group flex items-center"},{default:u(()=>[_(m,{name:"arrow-up-right",size:"sm",class:"mb-1 ml-px group-hover:text-pink-500 transition-colors text-dark-grey"})]),_:2},1032,["href"])])):T("",!0)]))),128))]),_(b,{type:"tip",title:n.$t("crossChainBoost.syncInitiatedModal.warningTitle"),class:"mb-8"},{default:u(()=>[t("div",null,l(n.$t("crossChainBoost.syncInitiatedModal.warningDescription")),1)]),_:1},8,["title"]),_(v,{color:"gray",outline:"",block:"",onClick:a[0]||(a[0]=k=>n.$emit("close"))},{default:u(()=>[N(l(n.$t("close")),1)]),_:1})])}}}),Bn=M({__name:"CrossChainSyncModal",props:{isVisible:{type:Boolean,default:!1},networksBySyncState:{},veBalBalance:{},l2VeBalBalances:{},sync:{},setTempSyncingNetworks:{}},emits:["closeModal"],setup(p,{emit:s}){const n=s,a=O(new Set),m=[Ys,un,xn],r=O(0),b=O(!1),v=()=>{n("closeModal",b.value?Array.from(a.value):null),r.value=0,a.value=new Set};function k(f){if(a.value.has(f)){a.value.delete(f);return}a.value.add(f)}return(f,c)=>{const x=Et;return o(),$(x,{show:f.isVisible,onClose:v},{default:u(()=>[_(Xe,{name:"fade",mode:"out-in"},{default:u(()=>[(o(),$(Pt(m[e(r)]),{activeTabIdx:e(r),"onUpdate:activeTabIdx":c[0]||(c[0]=S=>Ke(r)?r.value=S:null),veBalBalance:f.veBalBalance,style:{"min-height":"470px"},chosenNetworks:e(a),onToggleNetwork:k,onSetSuccessfulSynced:c[1]||(c[1]=S=>b.value=!0),onClose:v},null,40,["activeTabIdx","veBalBalance","chosenNetworks"]))]),_:1})]),_:1},8,["show"])}}});const wn=ae(Bn,[["__scopeId","data-v-9113826e"]]),Ln={class:"py-5 px-4"},$n={class:"mb-4 font-bold text-center"},Cn=t("div",null," Error has occured while fetching syncing states of some networks. Please refresh the page. ",-1),Tn={key:2,class:"flex justify-center text-sm text-secondary"},Vn={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-2 gap-4"},Sn={class:"flex justify-between items-center mb-3 font-bold label"},An={class:"flex mb-3"},Nn={key:0,class:"text-sm text-secondary"},In={key:1,class:"flex"},En=["src"],Pn={key:0,class:"flex flex-col"},Mn={class:"mb-1"},Fn={key:0,class:"font-bold"},Dn={key:1},zn={class:"flex mb-2"},Un=t("div",{class:"flex justify-center p-1 mr-1 align-center"},[t("div",{class:"w-2 h-2 bg-green-400 rounded-full"})],-1),Rn=t("div",{class:"text-sm text-secondary"},"Ethereum veBAL",-1),qn={class:"text-lg font-bold"},Gn={class:"flex"},Hn=t("div",{class:"flex justify-center p-1 mr-1 align-center"},[t("div",{class:"w-2 h-2 rounded-full bg-rose-500"})],-1),jn={class:"text-sm text-secondary"},Wn={class:"text-lg font-bold"},On={class:"flex justify-between items-center mb-3 font-bold label"},Qn={key:0,class:"text-sm text-secondary"},Yn={key:1,class:"flex"},Kn=["src"],Zn=M({__name:"CrossChainBoostCards",setup(p){const{dynamicDataLoading:s}=Ze(),{account:n,isWalletReady:a}=se(),{networksSyncState:m,networksBySyncState:r,l2VeBalBalances:b,isLoading:v,sync:k,tempSyncingNetworks:f,setTempSyncingNetworks:c,warningMessage:x,infoMessage:S,hasError:I,showingUnsyncedNetworks:h,syncLayerZeroTxLinks:V}=xe(),{fNum:F}=ue(),{veBalBalance:d}=pe(),B=O(!1),g=y(()=>z(d.value).isEqualTo(0));function P(D){const q=D===Ye.POLYGON?30:5;return`Syncing on ${W[D].chainName} usually takes around ${q} mins. 
  Wait until it completes before restaking or triggering a gauge update on your
  ${W[D].chainName} pools to get your maximum veBAL boost.`}function R(D){var q,Q;return((q=m.value)==null?void 0:q[D])===Mt.Syncing||((Q=f.value[n.value])==null?void 0:Q.networks.includes(D))}function ee(){B.value=!1}return(D,q)=>{const Q=ie,w=le,G=Ie,j=Ee,re=Je,C=ne,E=ke;return o(),i("div",Ln,[t("h4",$n,[N(l(D.$t("crossChainBoost.title"))+" ",1),_(w,{text:D.$t("crossChainBoost.infoDescription")},{activator:u(()=>[_(Q,{name:"info",size:"sm",class:"text-gray-400"})]),_:1},8,["text"])]),e(I)?(o(),$(G,{key:0,title:"Error",type:"error",class:"mb-4"},{default:u(()=>[Cn]),_:1})):T("",!0),e(v)||e(s)?T("",!0):(o(),i(U,{key:1},[e(x)?(o(),$(G,{key:0,title:e(x).title,type:"warning",class:"mb-4"},{default:u(()=>[N(l(e(x).text),1)]),_:1},8,["title"])):e(S)?(o(),$(G,{key:1,title:e(S).title,type:"tip",class:"mb-4"},{default:u(()=>[N(l(e(S).text),1)]),_:1},8,["title"])):T("",!0),!e(a)||e(g)?(o(),i("div",Tn,l(D.$t("crossChainBoost.emptyState")),1)):T("",!0)],64)),t("div",Vn,[e(v)||e(s)?(o(),i(U,{key:0},X(2,L=>_(j,{key:L,class:"h-48"})),64)):e(a)&&!e(g)?(o(),i(U,{key:1},[_(E,null,{default:u(()=>[t("div",Sn,l(D.$t("crossChainBoost.unsyncedNetworks")),1),t("div",An,[e(h).length===0?(o(),i("span",Nn,l(e(I)?"—":D.$t("crossChainBoost.syncedAllDescription")),1)):(o(),i("div",In,[(o(!0),i(U,null,X(e(h),L=>(o(),i("div",{key:L,class:"mr-2"},[_(w,{width:"44",textAlign:"center"},{activator:u(()=>[_(re,{href:e(V)[L],disabled:!R(L)||!e(V)[L],external:"",noStyle:"",class:"group flex items-center"},{default:u(()=>[_(Ue,{isLoading:R(L)},{default:u(()=>[t("img",{src:e(he)(L),alt:"",class:"p-0.5 rounded-full w-[32px]"},null,8,En)]),_:2},1032,["isLoading"])]),_:2},1032,["href","disabled"])]),default:u(()=>{var A;return[R(L)?(o(),i("div",Pn,[t("span",Mn,l(P(L)),1),e(V)[L]?(o(),i("span",Fn," Click this icon to view Layerzero transaction ")):T("",!0)])):(o(),i("div",Dn,[t("div",zn,[Un,t("div",null,[Rn,t("div",qn,l(Number(e(d)).toFixed(4)),1)])]),t("div",Gn,[Hn,t("div",null,[t("div",jn,l(e(W)[L].chainName)+" veBAL ",1),t("div",Wn,l((A=e(b))==null?void 0:A[L]),1)])])]))]}),_:2},1024)]))),128))]))]),e(r).unsynced.length>0?(o(),$(C,{key:0,color:"blue",size:"sm",outline:"",onClick:q[0]||(q[0]=L=>B.value=!0)},{default:u(()=>[N(l(D.$t("crossChainBoost.sync")),1)]),_:1})):T("",!0)]),_:1}),_(E,null,{default:u(()=>[t("div",On,l(D.$t("crossChainBoost.syncedNetworks")),1),e(r).synced.length===0?(o(),i("span",Qn,l(e(I)?"—":D.$t("crossChainBoost.unsyncedAllDescription")),1)):(o(),i("div",Yn,[(o(!0),i(U,null,X(e(r).synced,L=>(o(),i("div",{key:L},[_(Ue,{isLoading:!1},{default:u(()=>[t("img",{src:e(he)(L),alt:"",class:"mr-2 w-8 h-8 rounded-full"},null,8,Kn)]),_:2},1024)]))),128))]))]),_:1})],64)):T("",!0)]),_(wn,{isVisible:e(B),networksBySyncState:e(r),sync:e(k),setTempSyncingNetworks:e(c),veBalBalance:e(F)(e(d),e(de).token),l2VeBalBalances:e(b),onCloseModal:ee},null,8,["isVisible","networksBySyncState","sync","setTempSyncingNetworks","veBalBalance","l2VeBalBalances"])])}}}),Jn="/assets/rank-27016f98.svg",Xn="/assets/share-2dd31ecb.svg",ea="/assets/hourglass-6bce2580.svg",ta={id:!0,bias:!0,slope:!0,timestamp:!0};function oa(p){const{networkId:s}=be(),n=y(()=>!!p.value),a=Ve.Locks.Historical(s,p);return Ce(Ft.network.subgraphs.gauge,a,()=>{var m;return{__name:"HistoricalLocks",lockSnapshots:{__args:{where:{user_:{id:(m=p.value)==null?void 0:m.toLowerCase()}}},...ta}}},Te({enabled:n,refetchOnWindowFocus:!1}))}const sa={balance:!0,rank:!0};function na(p){const{networkId:s}=be(),n=Ve.Locks.UserRank(s,p);return Ce("https://test-api-v3.balancer.fi/",n,()=>({veBalGetUser:{...sa}}),Te({enabled:y(()=>!!p.value),...ro}),!1,{accountAddress:p.value})}const aa=["width","height"],la=M({__name:"BalImage",props:{noFade:{type:Boolean,default:!1},width:{default:"auto"},height:{default:"auto"}},setup(p){const s=p,n=O(s.noFade),a=y(()=>({width:s.width,height:s.height}));function m(){n.value=!0}return(r,b)=>(o(),i("div",{class:"bal-image-wrapper",style:Ut(e(a))},[_(Xe,{name:"bal-image-fade"},{default:u(()=>[Dt(t("img",Qe({width:s.width,height:s.height},r.$attrs,{onLoad:m}),null,16,aa),[[zt,e(n)]])]),_:1})],4))}});const ia=ae(la,[["__scopeId","data-v-a4bd4d79"]]),ra="/assets/coins-1-c061dc58.png",ca="/assets/coins-2-14d5a0bc.png",da="/assets/coins-3-6c23888e.png",ua=p=>(et("data-v-dd6d0065"),p=p(),tt(),p),_a={class:"flex flex-col md:flex-row"},ma={class:"py-8 lg:py-4 px-4 lg:px-8 2xl:px-0 xl:pt-0 max-w-md hero-text"},pa=ua(()=>t("p",{class:"font-medium eyebrow"},"veBAL",-1)),va={class:"mb-5 text-white title"},ga={class:"flex mt-6"},fa={class:"coins"},ha={class:"group coin"},ya={class:"w-full coin-wrapper"},ka={class:"font-semibold caption"},ba={class:"inline mr-1 text-sm lg:text-base tracking-tighter lg:tracking-normal"},xa={class:"group coin"},Ba={class:"coin-wrapper"},wa={class:"font-semibold caption"},La={class:"inline mr-1 text-sm lg:text-base tracking-tighter lg:tracking-normal"},$a={class:"group coin"},Ca={class:"coin-wrapper"},Ta={class:"font-semibold caption"},Va={class:"inline mr-1 text-sm lg:text-base tracking-tighter lg:tracking-normal"},Sa=M({__name:"VeBALMarketingHeader",setup(p){const{t:s}=ve(),n=ye(),a=y(()=>[s("veBAL.hero.benefits.boost"),s("veBAL.hero.benefits.vote"),s("veBAL.hero.benefits.earn")]);function m(){n.push({name:"get-vebal",query:{returnRoute:"vebal"}})}return(r,b)=>{const v=ne,k=ie,f=ia,c=le;return o(),i("div",_a,[t("div",ma,[pa,t("h1",va,l(r.$t("veBAL.hero.title")),1),t("ul",null,[(o(!0),i(U,null,X(e(a),(x,S)=>(o(),i("li",{key:S,class:"flex items-center mb-2 text-white"}," – "+l(x),1))),128))]),t("div",ga,[_(v,{class:"mr-3 hero-btn btn-gold",onClick:m},{default:u(()=>[N(l(r.$t("veBAL.hero.buttons.getVeBAL")),1)]),_:1}),_(v,{tag:"a",href:"https://docs.balancer.fi/concepts/governance/veBAL/",target:"_blank",rel:"noreferrer",color:"white",class:"hero-btn",outline:""},{default:u(()=>[N(l(r.$t("veBAL.hero.buttons.learnMore"))+" ",1),_(k,{name:"arrow-up-right",size:"sm",class:"ml-px group-hover:text-pink-500 transition-colors"})]),_:1})])]),t("div",fa,[t("div",ha,[t("div",ya,[_(f,{class:"graphic",width:"330",height:"377",src:e(ra),alt:"BAL and WETH tokens"},null,8,["src"])]),t("div",ka,[t("p",ba,l(r.$t("veBAL.hero.tokens.balWETH")),1),_(c,{iconSize:"xs",textAlign:"left",class:"mt-1 font-medium"},{default:u(()=>[N(l(r.$t("veBAL.hero.tokenInfo.balWETH")),1)]),_:1})])]),t("div",xa,[t("div",Ba,[_(f,{class:"graphic",width:"330",height:"377",src:e(ca),alt:"B-80BAL-20WETH LP token"},null,8,["src"])]),t("div",wa,[t("p",La,l(r.$t("veBAL.hero.tokens.lpToken")),1),_(c,{iconSize:"xs",textAlign:"left",class:"mt-1"},{default:u(()=>[N(l(r.$t("veBAL.hero.tokenInfo.lpToken")),1)]),_:1})])]),t("div",$a,[t("div",Ca,[_(f,{class:"graphic",width:"330",height:"377",src:e(da),alt:"veBAL token"},null,8,["src"])]),t("div",Ta,[t("p",Va,l(r.$t("veBAL.hero.tokens.veBAL")),1),_(c,{iconSize:"xs",textAlign:"left",class:"mt-1"},{default:u(()=>[N(l(r.$t("veBAL.hero.tokenInfo.veBAL")),1)]),_:1})])])])])}}});const Aa=ae(Sa,[["__scopeId","data-v-dd6d0065"]]),Na=p=>(et("data-v-f30f24ae"),p=p(),tt(),p),Ia={class:"hero-container"},Ea={class:"hero-content"},Pa={key:0,class:"flex flex-col xl:flex-row flex-grow gap-6 justify-between xl:items-center px-10 h-full text-white"},Ma={key:1,class:"flex flex-col flex-1"},Fa=Na(()=>t("div",{class:"mb-2 text-xl font-bold"},"My veBAL",-1)),Da={class:"mb-10 text-5xl font-black"},za={class:"flex flex-col gap-2 mb-8"},Ua=["src"],Ra={class:"font-semibold"},qa={key:3,class:"p-5 w-full rounded-2xl flex-[1.5] chart-wrapper"},Ga=M({__name:"MyVebalInfo",setup(p){const{account:s,isWalletReady:n,isWalletDisconnected:a}=se(),{isLoadingLockPool:m,isLoadingLockInfo:r,lock:b}=ot(),{fNum:v}=ue(),k=ye(),{veBalBalance:f,isLoading:c}=pe(),{t:x}=ve(),{isLoading:S,data:I}=oa(s),{isLoading:h,data:V}=na(s),F=y(()=>{var L;if(a.value)return!1;const C=z(f.value).isGreaterThan(0),E=(L=I.value)==null?void 0:L.lockSnapshots.length;return n.value&&(C||E)||d.value}),d=y(()=>h.value||S.value||r.value||m.value||c.value),B=y(()=>{var C;return(C=b.value)!=null&&C.hasExistingLock&&!b.value.isExpired?we(b.value.lockedEndDate,io):"—"});function g(C,E,L){const A=z(C.bias).minus(E.times(L.minus(C.timestamp)));return A.isLessThan(0)?z(0).toNumber():A.toNumber()}function P(C){return we(C*1e3,"yyyy/MM/dd")}function R(C){const E=(Date.now()/1e3).toFixed(0);return C.reduce((L,A,Y)=>{const te=z(A.slope),oe=C[Y+1]?z(C[Y+1].timestamp):z(E),K=z(A.bias).toNumber(),Be=P(A.timestamp),H=g(A,te,oe),Z=P(oe.toNumber());return L.push(Object.freeze([Be,K])),K.toFixed(2)!==H.toFixed(2)&&L.push(Object.freeze([Z,H])),L},[])}function ee(C){return C.reduce((E,L)=>{const[A,Y]=L;return E[A]?E[A].push(Y):E[A]=[Y],E},{})}function D(C){return Object.keys(C).reduce((E,L)=>{const A=C[L];return(A.length>2?[Math.min(...A),Math.max(...A)]:A).forEach(te=>{E.push(Object.freeze([L,te]))}),E},[])}const q=y(()=>{if(!I.value)return[];const C=R(I.value.lockSnapshots),E=ee(C);return D(E)}),Q=y(()=>V.value?V.value.veBalGetUser.rank:""),w=y(()=>{var L,A;const C=[],E=z(f.value).isGreaterThan(0);return E&&C.push({icon:Xn,value:x("veBAL.myVeBAL.cards.myVeBAL.secondaryText",[v(z(f.value).div(((L=b.value)==null?void 0:L.totalSupply)||0).toString(),{style:"percent",maximumFractionDigits:4})])}),E&&Q.value&&C.unshift({icon:Jn,value:`Rank ${Q.value}`}),(A=b.value)!=null&&A.hasExistingLock&&!b.value.isExpired&&C.push({icon:ea,value:`Expires ${B.value} (${Rt(new Date(B.value),new Date)} days)`}),C}),G=y(()=>{var C;return(C=b.value)!=null&&C.hasExistingLock&&!b.value.isExpired?{name:"",values:[q.value[q.value.length-1],Object.freeze([we(new Date(B.value).getTime(),"yyyy/MM/dd"),0])],hoverBorderColor:"black",hoverColor:"white"}:{name:"",values:[]}}),j=y(()=>({color:["#BCA25D","#BCA25D"],hoverBorderColor:"black",hoverColor:"#BCA25D",areaStyle:{color:new co(0,0,0,1,[{offset:0,color:"rgba(14, 165, 233, 0.08)"},{offset:1,color:"rgba(68, 9, 236, 0)"}])},chartType:"line",data:[{name:"",values:q.value},G.value],lineStyles:[{},{type:"dashed"}],symbolSize:10}));function re(){k.push({name:"get-vebal",query:{returnRoute:"vebal"}})}return(C,E)=>{const L=Ee,A=ne,Y=lo,te=ie,oe=ao;return o(),i("div",Ia,[t("div",Ea,[e(F)?(o(),i("div",Pa,[e(d)?(o(),$(L,{key:0,darker:"",class:"w-full h-full"})):(o(),i("div",Ma,[Fa,t("div",Da,l(e(v)(e(f),e(de).token)),1),t("div",za,[(o(!0),i(U,null,X(e(w),K=>(o(),i("div",{key:K.value,class:"flex"},[t("img",{class:"mr-2 w-6 h-6",src:K.icon},null,8,Ua),t("span",Ra,l(K.value),1)]))),128))]),t("div",null,[_(A,{class:"mr-3 btn-gold",onClick:re},{default:u(()=>[N(l(C.$t("veBAL.hero.buttons.getVeBAL")),1)]),_:1}),_(A,{color:"transparent",class:"mr-3 btn-extend",onClick:re},{default:u(()=>[N(" Extend lock ")]),_:1})])])),e(d)?(o(),$(L,{key:2,darker:"",class:"w-full h-full"})):e(j).data[0].values.length>0?(o(),i("div",qa,[_(Y,{isLoading:e(d),height:"96",data:e(j).data,axisLabelFormatter:{yAxis:{maximumFractionDigits:2,fixedFormat:!1,abbreviate:!1}},areaStyle:e(j).areaStyle,color:e(j).color,hoverColor:e(j).hoverColor,hoverBorderColor:e(j).hoverBorderColor,xAxisMinInterval:3600*1e3*24*30,showLegend:!1,chartType:e(j).chartType,showTooltipLayer:"",lineStyles:e(j).lineStyles,symbolSize:e(j).symbolSize,customGrid:{left:"2.5%",right:"2.5%",top:"10%",bottom:"5%",containLabel:!0},reverseParams:"",paramsLabel:"veBAL",showTooltip:""},null,8,["isLoading","data","areaStyle","color","hoverColor","hoverBorderColor","chartType","lineStyles","symbolSize"])])):(o(),$(oe,{key:4,class:"w-full h-96 flex-[1.5]",align:"center"},{default:u(()=>[_(te,{name:"bar-chart"}),N(" "+l(C.$t("insufficientData")),1)]),_:1}))])):(o(),$(Aa,{key:1}))])])}}});const Ha=ae(Ga,[["__scopeId","data-v-f30f24ae"]]),ja={class:"xl:container py-16 xl:py-20 lg:mx-auto bg-gray-50 dark:bg-gray-850/50"},Wa={key:0,class:"lg:mx-auto max-w-5xl"},Oa={class:"px-4 mb-8"},Qa={key:1,class:"xl:container lg:px-4 xl:px-0 pt-16 xl:pt-20 xl:mx-auto"},Ya={class:"xl:px-0 mb-16"},Ka={key:2,class:"text-center"},Za={class:"text-lg font-semibold"},Cl=M({__name:"vebal",setup(p){const s=eo();return to(s),no(),qt(),(n,a)=>(o(),i("div",null,[a[0]||(De(-1),(a[0]=e(Le)?(o(),$(Ha,{key:0})):T("",!0)).cacheIndex=0,De(1),a[0]),t("div",ja,[e(Le)?(o(),i("div",Wa,[t("div",Oa,[_(Fs)]),t("div",null,[_(Zn)])])):T("",!0)]),e(Le)?(o(),i("div",Qa,[t("div",Ya,[_(xs)])])):(o(),i("div",Ka,[t("div",Za,l(n.$t("veBAL.notSupported.title")),1),t("div",null,l(n.$t("veBAL.notSupported.description")),1)]))]))}});export{Cl as default};
//# sourceMappingURL=vebal-1eeed5de.js.map
