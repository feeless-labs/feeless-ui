import{_}from"./BalAsset-68194947.js";import{d as N,E as v,y as D,be as H,c as A,n as S,a1 as M,bc as P,o as g,B as R,a as k,b as B,t as V,C as n,aE as b,U as G,f as U,cq as Y,bg as O,G as X}from"./index-60943df8.js";import{n as x}from"./numeral-088ce989.js";import{i as j,H as q}from"./echarts-eb254b25.js";const J={key:0,id:"lineChartHeader",class:"mb-4"},K={class:"text-xl tracking-wider text-gray-800 dark:text-gray-400"},ee=N({__name:"BalChart",props:{data:{},chartType:{},lineStyles:{},onAxisMoved:{},isLoading:{type:Boolean,default:!1},hideYAxis:{type:Boolean,default:!1},hideXAxis:{type:Boolean,default:!1},xAxisMinInterval:{},showHeader:{type:Boolean,default:!1},needChartValue:{type:Boolean,default:!1},axisLabelFormatter:{default:()=>({})},color:{},hoverColor:{},hoverBorderColor:{},height:{},showLegend:{type:Boolean,default:!1},legendState:{},forceResizeTick:{},isLastValueChipVisible:{type:Boolean},customGrid:{},chartClass:{},wrapperClass:{},showTooltip:{type:Boolean,default:!0},showTooltipLayer:{type:Boolean,default:!0},useMinMax:{type:Boolean,default:!1},areaStyle:{},symbolSize:{default:5},reverseParams:{type:Boolean},paramsLabel:{}},emits:["periodSelected","setCurrentChartValue","mouseLeaveEvent","mouseEnterEvent"],setup(F,{emit:T}){j();const c=T,e=F,f=v(),y=v("$0,00"),i=v(0),{fNum:u}=D(),l=H(),{darkMode:h}=O(),E=A(()=>({legend:{show:e.showLegend,left:0,top:0,icon:"roundRect",itemHeight:5,formatter:a=>{var o;const t=S.last((o=e.data.find(s=>s.name===a))==null?void 0:o.values);return`${a}: ${u(t[1],e.axisLabelFormatter.yAxis)}`},selected:e.legendState||{},textStyle:{color:h.value?l.theme.colors.gray[100]:l.theme.colors.gray[800]},inactiveColor:h.value?l.theme.colors.gray[700]:l.theme.colors.gray[300]},xAxis:{type:"time",show:!e.hideXAxis,axisTick:{show:!1},axisLine:{show:!1},minInterval:e.xAxisMinInterval,axisLabel:{formatter:e.axisLabelFormatter.xAxis?a=>u(a,e.axisLabelFormatter.xAxis):void 0,color:l.theme.colors.gray[400]},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},min:e.useMinMax?"dataMin":null,max:e.useMinMax?"dataMax":null,type:"value",show:!e.hideYAxis,splitNumber:4,splitLine:{show:!1},position:"left",axisLabel:{show:!e.hideYAxis,formatter:e.axisLabelFormatter.yAxis?a=>u(a,e.axisLabelFormatter.yAxis):void 0,color:l.theme.colors.gray[400]},nameGap:25},color:e.color,grid:e.customGrid||{left:"2.5%",right:0,top:"10%",bottom:"5%",containLabel:!0},tooltip:{show:e.showTooltip,showContent:e.showTooltipLayer,trigger:"axis",confine:!0,axisPointer:{type:"shadow",label:{show:!1}},backgroundColor:h.value?l.theme.colors.gray[800]:l.theme.colors.white,borderColor:h.value?l.theme.colors.gray[900]:l.theme.colors.white,formatter:a=>{let t=a;return e.reverseParams&&(t=[...a.reverse()],t=t.filter((o,s)=>s===0?!0:o.value[1]!==t[s-1].value[1])),`
            <div class='flex flex-col font-body bg-white dark:bg-gray-850 dark:text-white'>
              <span>${a[0].value[0]}</span>
              ${t.map(o=>`
                    <span>
                      ${o.marker} ${o.seriesName}
                      <span class='font-semibold'>
                        ${u(o.value[1],e.axisLabelFormatter.yAxis)} ${e.paramsLabel||""}
                      </span>
                    </span>
                  `).join("")}
            </div>
          `}},series:e.data.map((a,t)=>{var o,s,d;return{data:a.values,type:e.chartType,smooth:.3,showSymbol:!1,name:a.name,silent:!0,animationEasing:function(r){return r===1?1:1-Math.pow(2,-10*r)},lineStyle:{width:2,...(o=e.lineStyles)==null?void 0:o[t]},areaStyle:e.areaStyle,itemStyle:{borderRadius:100},emphasis:{itemStyle:{color:a.hoverColor||e.hoverColor,borderColor:a.hoverBorderColor||e.hoverBorderColor}},symbolSize:e.symbolSize,markLine:{symbol:"roundRect",symbolSize:0,lineStyle:{color:"rgba(0, 0, 0, 0)"},precision:5,label:{backgroundColor:(e.color||[])[t]||"black",borderRadius:3,padding:4,formatter:r=>u(r.data.yAxis,e.axisLabelFormatter.yAxis),color:"#FFF",fontSize:10},data:e.isLastValueChipVisible?[{name:"Latest",yAxis:((s=e.data[t])==null?void 0:s.values.length)>0?(S.last((d=e.data[t])==null?void 0:d.values)||[])[1]:0}]:[],animation:!1}}})})),$=A(()=>{let a={};return e.height&&typeof e.height=="number"&&(a.height=`${e.height}px`),a});M(()=>e.forceResizeTick,()=>{f.value&&f.value.resize()});function p(a){const t=x((e.data[0].values[e.data[0].values.length-1]||[])[1]);if(a){y.value=u(t.value()||0,e.axisLabelFormatter.yAxis||{style:"currency",currency:"USD",fixedFormat:!0});const s=e.data[0].values[0];s&&c("setCurrentChartValue",{chartDate:s[0],chartValue:s[1]})}const o=x((e.data[0].values[0]||[])[1]);i.value=((t.value()||0)-(o.value()||0))/(o.value()||0)}M(()=>e.data,()=>{p(!0)}),P(()=>{p(!0)});function w(){p(!0),c("mouseLeaveEvent")}function C(){c("mouseEnterEvent")}const z=({dataIndex:a,seriesIndex:t})=>{var o;if(!(!e.showHeader&&!e.needChartValue)&&(o=e.data[t])!=null&&o.values){e.onAxisMoved&&e.onAxisMoved(e.data[t].values[a]);const s=e.data[t].values[a];c("setCurrentChartValue",{chartDate:s[0],chartValue:s[1]});const d=X(e.data[t].values[a][1]).toFixed(6);if(y.value=u(d,e.axisLabelFormatter.yAxis||{style:"currency",currency:"USD",fixedFormat:!0}),a===0){const r=Number(e.data[t].values[0][1]),m=e.data[t].values[e.data[t].values.length-1][1];i.value=(m-r)/r}else{const r=e.data[t].values[a-1][1],m=e.data[t].values[a][1],L=(m-r)/r;if(r===0&&m!==0){i.value=1;return}if(isNaN(L)){i.value=0;return}i.value=L}}};return(a,t)=>{const o=_;return a.isLoading?(g(),R(o,{key:0,class:"mt-16 h-96"})):(g(),k("div",{key:1,class:b(a.wrapperClass),onMouseenter:C,onTouchstartPassive:C,onMouseleave:w,onTouchend:w},[a.showHeader?(g(),k("div",J,[B("h3",K,V(n(y)),1),B("span",{class:b({"text-green-400":n(i)>=0,"text-red-400":n(i)<0,"font-medium":!0})},V(n(x)(n(i)).format("+0.0%")),3)])):G("",!0),U(n(q),{ref_key:"chartInstance",ref:f,class:b([a.height&&typeof(a.height==="string")?`h-${a.height}`:"","w-full",a.chartClass]),option:n(E),autoresize:"",updateOptions:{replaceMerge:"series"},style:Y([n($)]),onUpdateAxisPointer:z},null,8,["class","option","style"])],34))}}});export{ee as _};
//# sourceMappingURL=BalChart.vue_vue_type_script_setup_true_lang-f6feb788.js.map
