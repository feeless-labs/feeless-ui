import{y as W,E as G,l as j,c as d,bc as J,c9 as Q,F as X,_ as C,o as n,a as o,f as m,b as l,e as x,t as _,aE as N,B as F,a3 as p,U as B,d as Y,r as Z,x as $,n as ee,a1 as se,aA as te,fi as ae,bD as ne,a9 as oe,w as g,C as le,a8 as ce,fj as de,ay as re}from"./index-60943df8.js";import{_ as ie}from"./BalTextInput-8696f087.js";import{B as ue,_ as fe}from"./BalAsset-68194947.js";import{a as w}from"./anime.es-37453147.js";const me={name:"TokenListItem",props:{token:{type:Object,required:!0},balanceLoading:{type:Boolean,default:!0},hideBalance:{type:Boolean,default:!1},focussed:{type:Boolean,default:!1}},setup(r){const{fNum:k}=W(),s=G(),{priceFor:a,balanceFor:e}=j(),i=d(()=>Number(e(r.token.address))),u=d(()=>i.value*a(r.token.address));return J(()=>{w({opacity:1,targets:s.value,delay:w.stagger(100)})}),Q(()=>{w({opacity:0,targets:s.value})}),{fNum:k,FNumFormats:X,animateRef:s,balance:i,value:u}}},_e={class:"w-40 md:w-60 text-sm truncate text-gray"},ke={key:0,class:"flex flex-col items-end font-medium text-right"},ye={key:1,class:"text-sm font-normal text-secondary"};function be(r,k,s,a,e,i){const u=ue,v=fe;return n(),o("div",{ref:"animateRef",class:N([`flex items-center py-3 border border-transparent ml-4 mr-2 px-2 text-base
  leading-5 opacity-0 highlight hover:bg-blue-50 dark:hover:bg-blue-900
  rounded-lg transition-colors ease-in duration-300`,{"bg-blue-50 dark:bg-blue-900 border-blue-200 dark:border-blue-500":s.focussed}])},[m(u,{address:s.token.address,iconURI:s.token.logoURI,size:34,class:"mr-3"},null,8,["address","iconURI"]),l("div",{class:N(["flex-auto",{"text-blue-500 dark:text-blue-200":s.focussed}])},[x(_(s.token.symbol)+" ",1),l("div",_e,_(s.token.name),1)],2),s.hideBalance?B("",!0):(n(),o("span",ke,[s.balanceLoading?(n(),F(v,{key:0,class:"w-14 h-4"})):(n(),o(p,{key:1},[a.balance>0?(n(),o(p,{key:0},[a.balance>=1e-4?(n(),o(p,{key:0},[x(_(a.fNum(a.balance,a.FNumFormats.token)),1)],64)):(n(),o(p,{key:1},[x(" < 0.0001 ")],64))],64)):B("",!0),a.value>0?(n(),o("div",ye,_(a.fNum(a.value,a.FNumFormats.fiat)),1)):B("",!0)],64))]))],2)}const he=C(me,[["render",be]]),pe={class:"flex justify-between items-center w-full"},ge={class:"flex items-center"},ve={class:"flex px-4 pt-2 pb-3 mr-2"},Te={class:"flex justify-center items-center w-8 h-full"},xe={class:"overflow-hidden"},Be=["onClick"],we={key:1,class:"flex justify-center items-center h-96"},Fe=["innerHTML"],Ie=Y({__name:"SelectTokenModal",props:{open:{type:Boolean,default:!1},excludedTokens:{default:()=>[]},subset:{default:()=>[]},includeEther:{type:Boolean,default:!1},disableInjection:{type:Boolean,default:!1},hideTokenLists:{type:Boolean,default:!1},ignoreBalances:{type:Boolean,default:!1},notFoundContent:{}},emits:["close","selectTokenlist","select"],setup(r,{emit:k}){const s=r,a=k,e=Z({loading:!1,selectTokenList:!1,query:"",results:{},focussedToken:0}),{getToken:i,searchTokens:u,priceFor:v,balanceFor:S,dynamicDataLoading:E,nativeAsset:M,injectTokens:R}=j(),{t:I}=$(),V=d(()=>e.selectTokenList?I("manageLists"):I("tokenSearch")),y=d(()=>{const t=Object.values(e.results).map(c=>{const b=S(c.address),h=v(c.address),T=Number(b)*h;return{...c,price:h,balance:b,value:T}});return s.ignoreBalances?t:ee.orderBy(t,["value","balance"],["desc","desc"])}),A=d(()=>[...s.excludedTokens,...s.includeEther?[]:[M.address]]),U=d(()=>{console.log(e.results,e.focussedToken);const t=Object.keys(y.value)[e.focussedToken];return y.value[t].address});async function L(t){i(t)||await R([t]),a("select",t),a("close")}se(te(e,"query"),async t=>{e.loading=!0,e.results=await u(t,{excluded:A.value,disableInjection:s.disableInjection,subset:s.subset}).finally(()=>{e.loading=!1})},{immediate:!0});const{ArrowDown:q,ArrowUp:z,Enter:O,Tab:D}=ae();return ne(()=>{q.value&&e.focussedToken<Object.keys(e.results).length&&e.focussedToken++,D.value&&e.focussedToken<Object.keys(e.results).length&&e.focussedToken++,z.value&&e.focussedToken>0&&e.focussedToken--,O.value&&L(U.value)}),(t,c)=>{const b=ce,h=ie,T=oe("RecycleScroller"),H=de,K=re;return n(),F(K,{show:"",noContentPad:"",onClose:c[1]||(c[1]=f=>t.$emit("close"))},{header:g(()=>[l("div",pe,[l("div",ge,[l("h5",null,_(V.value),1)])])]),default:g(()=>[l("div",ve,[m(h,{modelValue:e.query,"onUpdate:modelValue":c[0]||(c[0]=f=>e.query=f),name:"tokenSearchInput",placeholder:t.$t("searchBy"),size:"sm",class:"w-full",autoFocus:""},{prepend:g(()=>[l("div",Te,[m(b,{name:"search",size:"sm",class:"mr-2 text-gray-500"})])]),_:1},8,["modelValue","placeholder"])]),l("div",xe,[y.value.length>0?(n(),F(T,{key:0,class:"overflow-y-scroll list-height",items:y.value,itemSize:70,keyField:"address",buffer:100},{default:g(({item:f,index:P})=>[l("a",{onClick:Le=>L(f.address)},[m(he,{token:f,hideBalance:t.ignoreBalances,balanceLoading:le(E),focussed:P==e.focussedToken,tabIndex:"0"},null,8,["token","hideBalance","balanceLoading","focussed"])],8,Be)]),_:1},8,["items"])):e.loading?(n(),o("div",we,[m(H)])):(n(),o("div",{key:2,class:"p-12 h-96 text-center text-secondary",innerHTML:t.notFoundContent?t.notFoundContent:t.$t("errorNoTokens")},null,8,Fe))])]),_:1})}}});const Ee=C(Ie,[["__scopeId","data-v-380ad9e1"]]);export{Ee as S};
//# sourceMappingURL=SelectTokenModal-bd0cd63c.js.map
