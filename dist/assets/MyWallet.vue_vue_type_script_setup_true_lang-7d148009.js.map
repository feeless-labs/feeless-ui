{"version":3,"file":"MyWallet.vue_vue_type_script_setup_true_lang-7d148009.js","sources":["../../src/components/cards/MyWallet/MyWalletSubheader.vue","../../src/composables/useNativeBalance.ts","../../src/composables/swap/useSwapState.ts","../../src/components/cards/MyWallet/MyWallet.vue"],"sourcesContent":["<script setup lang=\"ts\">\n\n</script>\n\n<template>\n  <div class=\"my-wallet-subheader\">\n    <slot></slot>\n  </div>\n</template>\n\n\n<style scoped>\n.my-wallet-subheader {\n  @apply py-2 px-3 -mx-3  dark:bg-gray-800 border-gray-200 dark:border-0;\n}\n</style>\n","import { configService } from '@/services/config/config.service';\nimport useWeb3 from '@/services/web3/useWeb3';\nimport { computed } from 'vue';\nimport { useTokens } from '@/providers/tokens.provider';\n\nexport default function useNativeBalance() {\n  const { hasBalance, nativeAsset, balanceFor } = useTokens();\n  const nativeCurrency = configService.network.nativeAsset.symbol;\n\n  const { appNetworkConfig, isWalletReady } = useWeb3();\n\n  const nativeBalance = computed(() => {\n    if (!isWalletReady.value) return '-';\n    return Number(balanceFor(appNetworkConfig.nativeAsset.address)).toFixed(4);\n  });\n\n  const hasNativeBalance = computed(() => hasBalance(nativeAsset.address));\n\n  return {\n    hasNativeBalance,\n    nativeBalance,\n    nativeCurrency,\n  };\n}\n","import { reactive, toRefs } from 'vue';\n\n// globals\nconst swapState = reactive({\n  initialized: false,\n  tokenInAddress: '',\n  tokenOutAddress: '',\n  tokenInAmount: '',\n  tokenOutAmount: '',\n});\n\nfunction setInitialized(val: boolean) {\n  swapState.initialized = val;\n}\n\nfunction setTokenInAddress(address: string) {\n  swapState.tokenInAddress = address;\n}\nfunction setTokenOutAddress(address: string) {\n  swapState.tokenOutAddress = address;\n}\n\nfunction setTokenInAmount(amount: string) {\n  swapState.tokenInAmount = amount;\n}\nfunction setTokenOutAmount(amount: string) {\n  swapState.tokenOutAmount = amount;\n}\n\nexport function useSwapState() {\n  return {\n    // can't set to read only refs as these vars are used as\n    // model values\n    ...toRefs(swapState),\n    setTokenInAddress,\n    setTokenOutAddress,\n    setTokenInAmount,\n    setTokenOutAmount,\n    setInitialized,\n  };\n}\n","<script setup lang=\"ts\">\nimport { useI18n } from 'vue-i18n';\n\nimport useBreakpoints from '@/composables/useBreakpoints';\nimport { isMainnet } from '@/composables/useNetwork';\nimport { configService } from '@/services/config/config.service';\nimport useWeb3 from '@/services/web3/useWeb3';\nimport { AnyPool } from '@/services/pool/types';\nimport MyWalletSubheader from './MyWalletSubheader.vue';\nimport useNativeBalance from '@/composables/useNativeBalance';\nimport { usePoolHelpers } from '@/composables/usePoolHelpers';\nimport { useSwapState } from '@/composables/swap/useSwapState';\nimport { includesAddress } from '@/lib/utils';\nimport { useUserTokens } from '@/providers/local/user-tokens.provider';\n\n/**\n * TYPES\n */\ntype Props = {\n  excludedTokens?: string[];\n  // If pool prop is provided, Tokens are grouped into:\n  // 'Pool tokens in wallet' and 'Other tokens in wallet'\n  pool?: AnyPool;\n};\n\n/**\n * PROPS & EMITS\n */\nconst props = withDefaults(defineProps<Props>(), {\n  excludedTokens: () => [],\n  pool: undefined,\n});\n\n/**\n * COMPOSABLES\n */\nconst networkName = configService.network.name;\n\nconst { t } = useI18n();\nconst { isWalletReady, startConnectWithInjectedProvider } = useWeb3();\nconst { upToLargeBreakpoint } = useBreakpoints();\nconst { setTokenInAddress } = useSwapState();\nconst { isDeepPool, isPreMintedBptPool, poolJoinTokens } = usePoolHelpers(\n  toRef(props, 'pool')\n);\n\nconst {\n  isLoadingBalances,\n  tokensWithBalance,\n  tokensWithBalanceFrom,\n  tokensWithoutBalanceFrom,\n  tokensWithBalanceNotIn,\n} = useUserTokens();\n\n/**\n * COMPUTED\n */\nconst noNativeCurrencyMessage = computed(() => {\n  return t('noNativeCurrency', [nativeCurrency, networkName]);\n});\n\nconst noNativeCurrencyMessageEthereum = computed(() => {\n  return t('noNativeCurrencyEthereum', [nativeCurrency, networkName]);\n});\n\nconst noTokensMessage = computed(() => {\n  return t('noTokensInWallet', [networkName]);\n});\n\nconst { hasNativeBalance, nativeBalance, nativeCurrency } = useNativeBalance();\n\nfunction handleAssetClick(tokenAddress) {\n  setTokenInAddress(tokenAddress);\n  const isPoolToken = includesAddress(poolJoinTokens.value, tokenAddress);\n  emit('click:asset', tokenAddress, isPoolToken);\n}\n\nconst emit = defineEmits<{\n  (e: 'click:asset', tokenAddress: string, isPoolToken: boolean): void;\n}>();\n</script>\n\n<template>\n  <BalCard\n    :square=\"upToLargeBreakpoint\"\n    noPad\n    :noBorder=\"upToLargeBreakpoint\"\n    growContent\n    :hFull=\"upToLargeBreakpoint\"\n    shadow=\"none\"\n  >\n    <div class=\"flex flex-col w-full h-full bg-transparent\">\n      <div\n        v-if=\"!upToLargeBreakpoint\"\n        class=\"flex lg:justify-between p-3 pb-0 lg:pb-3 lg:border-b dark:border-gray-900\"\n      >\n        <h6>\n          {{ $t('myWallet2') }}\n        </h6>\n        <div\n          v-if=\"!isLoadingBalances\"\n          class=\"ml-1 lg:ml-0 font-semibold lg:font-normal\"\n        >\n          <div\n            v-if=\"!hasNativeBalance\"\n            class=\"mr-0.5 text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors\"\n          >\n            {{ nativeBalance }} {{ nativeCurrency }}\n            <BalTooltip\n              v-if=\"isWalletReady\"\n              :text=\"\n                isMainnet\n                  ? noNativeCurrencyMessageEthereum\n                  : noNativeCurrencyMessage\n              \"\n              iconSize=\"sm\"\n              :iconName=\"'alert-triangle'\"\n              :iconClass=\"'text-red-500 hover:text-red-700 dark:hover:text-red-400 transition-colors'\"\n              width=\"72\"\n              class=\"relative top-0.5\"\n            />\n          </div>\n          <div v-else>{{ nativeBalance }} {{ nativeCurrency }}</div>\n        </div>\n        <BalLoadingBlock v-else class=\"w-12 h-8\" />\n      </div>\n      <div class=\"z-0 px-3 pb-3 h-full my-wallet\">\n        <BalLoadingBlock v-if=\"isLoadingBalances\" class=\"mt-4 h-8\" />\n        <div v-else-if=\"isWalletReady\">\n          <template v-if=\"pool\">\n            <MyWalletSubheader\n              v-if=\"isDeepPool\"\n              class=\"text-sm border-b text-secondary\"\n            >\n              {{ t('myWalletCard.title.poolTokens') }}\n            </MyWalletSubheader>\n            <div class=\"mt-5\">\n              <BalAssetSet\n                :balAssetProps=\"{ button: true }\"\n                :width=\"275\"\n                wrap\n                :size=\"30\"\n                :addresses=\"[\n                  ...tokensWithBalanceFrom(poolJoinTokens),\n                  ...tokensWithoutBalanceFrom(poolJoinTokens),\n                ]\"\n                :disabledAddresses=\"tokensWithoutBalanceFrom(poolJoinTokens)\"\n                :maxAssetsPerLine=\"7\"\n                @click=\"handleAssetClick\"\n              />\n            </div>\n            <template\n              v-if=\"\n                isDeepPool &&\n                isPreMintedBptPool &&\n                tokensWithBalanceNotIn(poolJoinTokens).length\n              \"\n            >\n              <MyWalletSubheader\n                class=\"my-5 text-sm border-t border-b text-secondary\"\n              >\n                {{ t('myWalletCard.title.otherTokens') }}\n              </MyWalletSubheader>\n              <BalAssetSet\n                :balAssetProps=\"{ button: true }\"\n                :width=\"275\"\n                wrap\n                :size=\"30\"\n                :addresses=\"tokensWithBalanceNotIn(poolJoinTokens)\"\n                :maxAssetsPerLine=\"7\"\n                @click=\"handleAssetClick\"\n              />\n            </template>\n          </template>\n          <div v-else class=\"mt-3\">\n            <BalAssetSet\n              :balAssetProps=\"{ button: true }\"\n              :width=\"275\"\n              wrap\n              :size=\"30\"\n              :addresses=\"tokensWithBalance\"\n              :maxAssetsPerLine=\"7\"\n              @click=\"handleAssetClick\"\n            />\n          </div>\n\n          <p\n            v-if=\"tokensWithBalance.length === 0\"\n            class=\"text-sm opacity-0 text-secondary fade-in\"\n          >\n            {{ noTokensMessage }}.\n          </p>\n        </div>\n        <div v-else class=\"flex mt-4 w-full font-medium\">\n          <BalLink @click=\"startConnectWithInjectedProvider\">\n            {{ t('connectYourWallet') }}\n          </BalLink>\n        </div>\n      </div>\n    </div>\n  </BalCard>\n</template>\n"],"names":["_sfc_render","_ctx","_cache","useNativeBalance","hasBalance","nativeAsset","balanceFor","useTokens","nativeCurrency","configService","appNetworkConfig","isWalletReady","useWeb3","nativeBalance","computed","swapState","reactive","setInitialized","val","setTokenInAddress","address","setTokenOutAddress","setTokenInAmount","amount","setTokenOutAmount","useSwapState","toRefs","props","__props","networkName","t","useI18n","startConnectWithInjectedProvider","upToLargeBreakpoint","useBreakpoints","isDeepPool","isPreMintedBptPool","poolJoinTokens","usePoolHelpers","toRef","isLoadingBalances","tokensWithBalance","tokensWithBalanceFrom","tokensWithoutBalanceFrom","tokensWithBalanceNotIn","useUserTokens","noNativeCurrencyMessage","noNativeCurrencyMessageEthereum","noTokensMessage","hasNativeBalance","handleAssetClick","tokenAddress","isPoolToken","includesAddress","emit","__emit"],"mappings":"6iBAKE,SAAAA,GAAAC,EAAAC,EAAA,2HCAF,SAAwBC,IAAmB,CACzC,KAAM,CAAE,WAAAC,EAAY,YAAAC,EAAa,WAAAC,GAAeC,EAAU,EACpDC,EAAiBC,EAAc,QAAQ,YAAY,OAEnD,CAAE,iBAAAC,EAAkB,cAAAC,CAAc,EAAIC,EAAQ,EAE9CC,EAAgBC,EAAS,IACxBH,EAAc,MACZ,OAAOL,EAAWI,EAAiB,YAAY,OAAO,CAAC,EAAE,QAAQ,CAAC,EADxC,GAElC,EAIM,MAAA,CACL,iBAHuBI,EAAS,IAAMV,EAAWC,EAAY,OAAO,CAAC,EAIrE,cAAAQ,EACA,eAAAL,CAAA,CAEJ,CCpBA,MAAMO,EAAYC,EAAS,CACzB,YAAa,GACb,eAAgB,GAChB,gBAAiB,GACjB,cAAe,GACf,eAAgB,EAClB,CAAC,EAED,SAASC,GAAeC,EAAc,CACpCH,EAAU,YAAcG,CAC1B,CAEA,SAASC,GAAkBC,EAAiB,CAC1CL,EAAU,eAAiBK,CAC7B,CACA,SAASC,GAAmBD,EAAiB,CAC3CL,EAAU,gBAAkBK,CAC9B,CAEA,SAASE,GAAiBC,EAAgB,CACxCR,EAAU,cAAgBQ,CAC5B,CACA,SAASC,GAAkBD,EAAgB,CACzCR,EAAU,eAAiBQ,CAC7B,CAEO,SAASE,IAAe,CACtB,MAAA,CAGL,GAAGC,EAAOX,CAAS,EACnB,kBAAAI,GACA,mBAAAE,GACA,iBAAAC,GACA,kBAAAE,GACA,eAAAP,EAAA,CAEJ,mpBCZA,MAAAU,EAAAC,EAQAC,EAAApB,EAAA,QAAA,KAEA,CAAA,EAAAqB,GAAAC,KACA,CAAA,cAAApB,EAAA,iCAAAqB,CAAA,EAAApB,EAAA,EACA,CAAA,oBAAAqB,GAAAC,KACA,CAAA,kBAAAf,GAAAM,KACA,CAAA,WAAAU,EAAA,mBAAAC,EAAA,eAAAC,CAAA,EAAAC,GAA2DC,GAAAZ,EAAA,MAAA,CACtC,EAGrB,CAAM,kBAAAa,EACJ,kBAAAC,EACA,sBAAAC,EACA,yBAAAC,EACA,uBAAAC,CACA,EAAAC,GAAA,EAMFC,EAAAhC,EAAA,IACEgB,EAAA,mBAAA,CAAAtB,EAAAqB,CAAA,CAAA,CAA0D,EAG5DkB,EAAAjC,EAAA,IACEgB,EAAA,2BAAA,CAAAtB,EAAAqB,CAAA,CAAA,CAAkE,EAGpEmB,EAAAlC,EAAA,IACEgB,EAAA,mBAAA,CAAAD,CAAA,CAAA,CAA0C,EAG5C,CAAA,iBAAAoB,EAAA,cAAApC,EAAA,eAAAL,CAAA,EAAAL,GAAA,EAEA,SAAA+C,EAAAC,EAAA,CACEhC,EAAAgC,CAAA,EACA,MAAAC,EAAAC,GAAAhB,EAAA,MAAAc,CAAA,EACAG,EAAA,cAAAH,EAAAC,CAAA,CAA6C,CAG/C,MAAAE,EAAAC"}