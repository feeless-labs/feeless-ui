import{_ as O,o,a as h,aD as j,d as P,a8 as M,E as F,c,b as i,aE as U,e as m,t as $,U as E,T as Q,a3 as D,a4 as W,f as u,a0 as S,bs as X,r as Z,u as ee,S as te,B as _,w as r,C as s,fO as se,fp as ae,j as ne,bT as oe,a7 as le,H as re}from"./index-60943df8.js";import{_ as ie}from"./BalAlert-7103ffb1.js";import{_ as ue}from"./BalVStack.vue_vue_type_script_setup_true_lang-a25ce916.js";import{_ as ce}from"./BalHStack.vue_vue_type_script_setup_true_lang-f88d7582.js";import{_ as me}from"./BalTextInput-8696f087.js";import{_ as de}from"./BalText.vue_vue_type_script_setup_true_lang-595463f4.js";import{a as pe,e as fe}from"./validations-cc161b3f.js";import{_ as _e}from"./TxActionBtn.vue_vue_type_script_setup_true_lang-27990a4e.js";import"./helpers-7076a817.js";import"./numeral-088ce989.js";const he={},ge={class:"xl:container xl:px-4 pt-10 md:pt-12 xl:mx-auto"};function be(e,d){return o(),h("div",ge,[j(e.$slots,"default")])}const we=O(he,[["render",be]]),ve=P({name:"BalSelectInput",components:{BalIcon:M},props:{modelValue:{type:[String,Number],default:""},options:{type:Array,required:!0},name:{type:String,required:!0},label:{type:String,default:""},validateOn:{type:String,default:"change"},defaultText:{type:String,default:""},noMargin:{type:Boolean,default:!1},size:{type:String,default:"md",validator:e=>["sm","md","lg"].includes(e)},rules:{type:Array,default:()=>[]}},emits:["change","update:modelValue"],setup(e,{emit:d}){const b=F({}),t=F([]),k=c(()=>t.value.length>0),y=c(()=>{switch(e.size){case"sm":return"text-sm";case"lg":return"text-lg";default:return"text-base"}}),w=c(()=>{switch(e.size){case"sm":return"text-xs -mt-4";case"lg":return"text-base -mt-8";default:return"text-sm -mt-6"}}),p=c(()=>{switch(e.size){case"sm":return"h-10";case"lg":return"h-16";default:return"h-10"}}),v=c(()=>({[y.value]:!0,[p.value]:!0,"mb-5":!e.noMargin})),B=c(()=>({})),H=c(()=>({[w.value]:!0}));function I(a){return typeof a=="string"||a instanceof String?a:a.value}function N(a){return typeof a=="string"||a instanceof String?a:a.text}function V(a){d("change",a.target.value),d("update:modelValue",a.target.value)}function T(a){t.value=[],e.rules.forEach(n=>{const l=n(a);typeof l=="string"&&t.value.push(l)})}return{balSelectInput:b,hasError:k,containerClasses:v,inputClasses:B,valFor:I,textFor:N,validate:T,labelClasses:H,onChange:V}}});const ke={class:"flex items-center h-full"},ye={class:"flex flex-col flex-1 justify-center h-full"},xe=["value","name"],Ce={key:0,value:"",selected:""},Se=["value"];function $e(e,d,b,t,k,y){const w=M;return o(),h("div",{class:U(["bal-select-input",e.containerClasses])},[i("div",ke,[i("div",ye,[e.label||e.$slots.label?(o(),h("div",{key:0,class:U(["label",e.labelClasses])},[j(e.$slots,"label",{},()=>[m($(e.label),1)],!0)],2)):E("",!0),i("select",Q({ref:"balSelectInput",value:e.modelValue,name:e.name,class:[e.inputClasses]},e.$attrs,{onChange:d[0]||(d[0]=(...p)=>e.onChange&&e.onChange(...p))}),[e.defaultText?(o(),h("option",Ce,$(e.defaultText),1)):E("",!0),(o(!0),h(D,null,W(e.options,(p,v)=>(o(),h("option",{key:v,value:e.valFor(p),class:""},$(e.textFor(p)),9,Se))),128))],16,xe)]),u(w,{name:"chevron-down"})])],2)}const Be=O(ve,[["render",$e],["__scopeId","data-v-4f8021a3"]]),He=i("h1",{class:"mb-2"},"Claim Submission",-1),Ie=i("p",{class:"mb-4 max-w-3xl"},[m(" This tool was created to facilitate user claim submissions resulting from the exploit described "),i("a",{class:"link",href:"https://medium.com/immunefi/balancer-rounding-error-bugfix-review-cbf69482ee3d",target:"_blank"},"here"),m(". ")],-1),Ne=i("p",{class:"mb-4 max-w-3xl"},[m(" In order to calculate the value of your unrecoverable assets, please "),i("a",{class:"link",href:"https://app.balancer.fi/#/ethereum/recovery-exit",target:"_blank"},"withdraw from the affected liquidity pools"),m(" and report the withdrawal transaction hash below. The withdrawal needs to take place after the first incident occurred; block 18004633 (ethereum) or block 108777562 (optimism). ")],-1),Ve=i("p",{class:"mb-4 max-w-3xl"}," If you had positions in multiple pools, report multiple withdrawal transaction hashes. If you withdrew partially, report those transactions too. Please file a new report for every chain. ",-1),Te=i("p",{class:"max-w-3xl font-bold"}," Note that the claims period is now closed. ",-1),ze={key:0,class:"mt-8"},Ee={class:"mb-2"},Le=P({__name:"claim-submissions",setup(e){const d=S.MAINNET,b=Object.values(X).filter(n=>(n.visibleInUI||n.chainId===S.OPTIMISM)&&!n.testNetwork).map(H),t=Z({network:b[0].value,txHashes:[""],valid:[!0]}),{account:k,getSigner:y,startConnectWithInjectedProvider:w,isMismatchedNetwork:p}=ee(),v=c(()=>te.value!==d),B=c(()=>t.txHashes.every((n,l)=>t.valid[l]));function H(n){return{text:n.chainName,value:n.chainId}}function I(){t.network=b[0].value,t.txHashes=[""],t.valid=[!0]}function N(){t.txHashes.push("")}function V(n){t.txHashes.splice(n,1)}function T(n){return l=>!l||n.filter(g=>g===l).length<=1||"Duplicate transaction"}async function a(){const n=y(),l=ne.network.addresses.claimSubmission;if(!l)throw new Error("No contract address found");return new oe(n).contract.sendTransaction({contractAddress:l,abi:["function submitClaim(string memory network, bytes32[] memory txHashes) public"],action:"submitClaim",params:[t.network.toString(),t.txHashes]})}return(n,l)=>{const g=le,q=de,L=Be,R=me,A=M,Y=ce,x=ue,G=ie,J=re,K=we;return o(),_(K,null,{default:r(()=>[u(x,null,{default:r(()=>[He,Ie,Ne,Ve,Te,s(v)?(o(),h("div",ze,[i("p",Ee," Claim submission are only accepted on "+$(s(se)(s(S).MAINNET)),1),u(g,{tag:"router-link",to:{name:"claim-submission",params:{networkSlug:s(ae)(s(S).MAINNET)}},color:"gradient",size:"sm"},{default:r(()=>[m("Claim on Ethereum Mainnet")]),_:1},8,["to"])])):(o(),_(J,{key:1,class:"mt-8 max-w-lg",title:"Claim submission form"},{default:r(()=>[u(x,{spacing:"md"},{default:r(()=>[u(x,null,{default:r(()=>[i("div",null,[u(q,null,{default:r(()=>[m("Network")]),_:1}),u(L,{modelValue:s(t).network,"onUpdate:modelValue":l[0]||(l[0]=z=>s(t).network=z),name:"network",options:s(b),class:"w-32 h-11",disabled:""},null,8,["modelValue","options"])]),i("div",null,[u(q,null,{default:r(()=>[m("Transaction hashes")]),_:1}),u(x,{spacing:"sm"},{default:r(()=>[(o(!0),h(D,null,W(s(t).txHashes,(z,f)=>(o(),_(Y,{key:f,width:"full",spacing:"sm",align:"center"},{default:r(()=>[u(R,{modelValue:s(t).txHashes[f],"onUpdate:modelValue":C=>s(t).txHashes[f]=C,isValid:s(t).valid[f],"onUpdate:isValid":C=>s(t).valid[f]=C,name:"txHash",size:"sm",placeholder:"0x...",rules:[s(pe)(),s(fe)(),T(s(t).txHashes)],class:"w-full",disabled:""},null,8,["modelValue","onUpdate:modelValue","isValid","onUpdate:isValid","rules"]),f===s(t).txHashes.length-1?(o(),_(g,{key:0,size:"sm",outline:"",square:"",color:"blue",disabled:!s(B)||s(t).txHashes[f]===""||s(t).txHashes.length>=10,onClick:N},{default:r(()=>[u(A,{name:"plus"})]),_:2},1032,["disabled"])):(o(),_(g,{key:1,size:"sm",outline:"",square:"",color:"gray",onClick:C=>V(f)},{default:r(()=>[u(A,{name:"minus"})]),_:2},1032,["onClick"]))]),_:2},1024))),128))]),_:1})])]),_:1}),s(p)?(o(),_(G,{key:0,title:"Wrong network",description:"Your wallet is connected to the wrong network.",type:"warning",class:"mb-4"})):E("",!0),s(k)?(o(),_(_e,{key:1,label:"Submit claim",color:"gradient",size:"sm",actionFn:a,action:"claimSubmission",summary:`Claim submission: ${s(t).txHashes.length} tx(s)`,confirmingLabel:"Submitting...",disabled:"",onConfirmed:l[1]||(l[1]=z=>I())},null,8,["summary"])):(o(),_(g,{key:2,color:"gradient",size:"sm",disabled:"",onClick:s(w)},{default:r(()=>[m("Connect wallet")]),_:1},8,["onClick"]))]),_:1})]),_:1}))]),_:1})]),_:1})}}});export{Le as default};
//# sourceMappingURL=claim-submissions-30d55f48.js.map
