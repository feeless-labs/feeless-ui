import{B as yt,_ as Be}from"./BalAsset-68194947.js";import{c1 as It,E as $,r as pe,y as re,l as ve,c2 as ze,u as Ee,c as a,m as Fe,Q as He,aA as fe,ba as te,cg as Tt,bv as At,ch as Bt,aM as Ue,ci as Ke,cj as Et,ck as St,cl as $t,Z as Te,G as q,c4 as Pt,b7 as Ot,bd as De,bN as Ae,as as Mt,a1 as Se,a2 as $e,bc as Ye,c5 as de,c6 as Lt,aR as Vt,c7 as Rt,c8 as Ct,d as j,b$ as Nt,o as l,a as R,b as _,f as k,e as ae,t as S,C as e,L as Wt,cm as Ft,U as K,B as m,a3 as Je,F as J,x as _e,az as me,a4 as Ht,cn as Ut,_ as Ze,w as P,aE as Dt,a8 as Xe,am as Qt,b1 as et,k as Pe,at as Qe,a7 as tt,D as at,a9 as qt,ay as jt,av as Gt,bp as zt,aB as Kt,bS as qe,H as Yt,j as Jt,ca as Zt,cb as Xt}from"./index-60943df8.js";import{_ as st}from"./BalAlert-7103ffb1.js";import{_ as ea}from"./BalCheckbox-acca24cf.js";import{_ as nt}from"./TokenInput.vue_vue_type_script_setup_true_lang-da11efe6.js";import{c as ta,a as aa}from"./validations-cc161b3f.js";import{a as sa,R as na}from"./useRelayerApproval-8e49cdc5.js";import{u as oa}from"./useTxState-bfde8eab.js";import{d as je,H as la,R as ra,T as Ge}from"./TokenAmounts-8735d742.js";import{E as ia,a as z,b as Ie}from"./exit-pool.service-ce4bf5d3.js";import{_ as ot}from"./BalTooltip.vue_vue_type_style_index_0_lang-8cf64573.js";import{_ as ua}from"./BalCircle-528e0679.js";import{_ as ca,a as da}from"./BalDataListRow.vue_vue_type_script_setup_true_lang-bc4f6b21.js";import{_ as pa}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-cd43f961.js";import{_ as ma}from"./ConfirmationIndicator.vue_vue_type_script_setup_true_lang-e065ab89.js";import{_ as va}from"./FeedbackCard.vue_vue_type_script_setup_true_lang-f0ae37aa.js";import{S as fa,_ as _a}from"./SwapSettingsPopover.vue_vue_type_style_index_0_lang-69b1f8b8.js";import{_ as ga}from"./BalTabs.vue_vue_type_style_index_0_lang-6658ba02.js";import{u as ha}from"./pool.provider-3818d1b8.js";import"./BalTextInput-8696f087.js";import"./helpers-7076a817.js";import"./SelectTokenModal-bd0cd63c.js";import"./anime.es-37453147.js";import"./numeral-088ce989.js";import"./vue-query-ecc7fe75.js";import"./constants-dee7c074.js";import"./BalHStack.vue_vue_type_script_setup_true_lang-f88d7582.js";import"./BalPopover-5c2abaf0.js";import"./BalBtnGroup-35a6c106.js";import"./usePoolQuery-da6fa219.js";const xa=(s,u=1e3,n=1e3)=>{const r=$(!1),t=$(!1),c=$(0),v=$(!0),g=$(!1),h=$("0"),x=$(!0),y=$(""),i=pe({address:"",value:"",max:"",valid:!0}),O=$([]),N=$(!1),p=new ia(s),{toFiat:U}=re(),{injectTokens:C,getTokens:D,balanceFor:T}=ve(),{txState:w,txInProgress:d}=oa(),{transactionDeadline:M}=Lt(),{slippageBsp:L}=ze(),{account:Z,getSigner:Q}=Ee(),{relayerSignature:V,relayerApprovalAction:f,relayerApprovalTx:A}=sa(na.BATCH),X=je(xt,u),ee=je(wt,n,{leading:!0}),W=a(()=>r.value&&!d.value),b=a(()=>T(s.value.address)),F=Fe(He.Pools.Exits.QueryExit(Z,h,t,i,V),X,pe({enabled:W,refetchOnWindowFocus:!1})),I=Fe(He.Pools.Exits.SingleAssetMax(b,t,fe(i,"address")),ee,pe({enabled:W,refetchOnWindowFocus:!1})),E=a(()=>F.isFetching.value),ie=a(()=>{var o;return(o=F.error.value)==null?void 0:o.message}),ge=a(()=>I.isFetching.value||!W.value),ue=a(()=>{var o;return(o=I.error.value)==null?void 0:o.message}),H=a(()=>te(s.value)),ct=a(()=>G.value===z.Generalised&&!(A.isUnlocked.value||V.value)),ne=a(()=>ct.value?[f.value]:[]),Me=a(()=>te(s.value)&&Tt(s.value.poolType)),he=a(()=>t.value&&!At(s.value.tokensList,i.address)&&Me.value),dt=a(()=>!t.value&&(te(s.value)||Bt(s.value))),oe=a(()=>!!Ue.ExitViaInternalBalance&&Ue.ExitViaInternalBalance.includes(s.value.id)),Le=a(()=>Ke(s.value)),G=a(()=>Le.value?z.Recovery:he.value?z.Swap:dt.value?z.Generalised:t.value?we.value?z.ExactIn:z.ExactOut:z.ExactIn),xe=a(()=>{let o=[];return o=te(s.value)?Et(s.value.tokens):s.value.tokensList,St(s.value.address,o)}),le=a(()=>D([...xe.value,s.value.address,...Y.value.map(o=>o.address)])),pt=a(()=>{let o=[];return o=te(s.value)?$t(s.value):s.value.tokens,o.filter(B=>!Te(B.address,s.value.address))}),Y=a(()=>t.value?[i]:O.value),we=a(()=>q(i.value).eq(i.max)),Ve=a(()=>q(c.value).isGreaterThanOrEqualTo(la)),mt=a(()=>q(c.value).isGreaterThanOrEqualTo(ra)),vt=a(()=>Ve.value?g.value:!0),be=a(()=>t.value&&!we.value?Ie.GivenOut:Ie.GivenIn),ke=a(()=>t.value&&we.value?b.value:h.value),Re=a(()=>q(b.value).gt(0)),ft=a(()=>Y.value.some(o=>q(o.value).gt(0))),_t=a(()=>q(h.value).gt(0)),Ce=a(()=>t.value?Y.value.every(o=>o.valid&&q(o.value).gt(0)):x.value&&q(h.value).gt(0)),Ne=a(()=>Object.fromEntries(Y.value.map(({address:o,value:B})=>[o,U(B,o)]))),gt=a(()=>Pt(Object.values(Ne.value)).toString()),ht=a(()=>Ot(s.value,h.value));async function xt(){if(v.value=!1,t.value&&!Ce.value||!t.value&&!_t.value)return null;p.setExitHandler(G.value),console.log("exitHandler:",G.value);try{await De();const o=await p.queryExit({exitType:be.value,bptIn:ke.value,amountsOut:Y.value,signer:Q(),slippageBsp:L.value,tokenInfo:le.value,approvalActions:ne.value,bptInValid:x.value,relayerSignature:V.value,transactionDeadline:M.value,toInternalBalance:oe.value});return c.value=o.priceImpact,O.value=Object.keys(o.amountsOut).map(B=>({address:B,value:o.amountsOut[B],max:"",valid:!0})),N.value=o.txReady,v.value=!0,o}catch(o){throw ye(o,F),new Error("Failed to construct exit.",{cause:o})}}async function wt(){if(i.max="0",!t.value||!Re.value)return null;const o=he.value?z.Swap:z.ExactIn;p.setExitHandler(o),console.log("exitHandler:",G.value);try{await De();const B=await p.queryExit({exitType:Ie.GivenIn,bptIn:b.value,amountsOut:[i],signer:Q(),slippageBsp:L.value,tokenInfo:le.value,approvalActions:ne.value,bptInValid:x.value,relayerSignature:V.value,transactionDeadline:M.value,toInternalBalance:oe.value}),ce=Ae(B.amountsOut,i.address)||"0";return i.max=ce,ce}catch(B){throw ye(B,I),new Error("Failed to calculate max.",{cause:B})}}async function bt(){try{return y.value="",p.setExitHandler(G.value),console.log("exitHandler:",G.value),p.exit({exitType:be.value,bptIn:ke.value,amountsOut:Y.value,signer:Q(),slippageBsp:L.value,tokenInfo:le.value,approvalActions:ne.value,bptInValid:x.value,relayerSignature:V.value,transactionDeadline:M.value,toInternalBalance:oe.value})}catch(o){throw ye(o),y.value=o.message,o}}function We(){const o=H.value?Vt(s.value.tokens):s.value.tokensList.filter(B=>!Te(B,s.value.address));O.value=o.map(B=>({address:B,value:"0",max:"",valid:!0}))}function kt(o){t.value=o}async function ye(o,B){if(w.confirmed&&ie.value)return;const ce=await Q().getAddress();Mt({error:o,action:"withdraw",query:B,context:{level:"fatal",extra:{exitHandler:G.value,params:JSON.stringify({exitType:be.value,bptIn:ke.value,amountsOut:Y.value,signer:ce,slippageBsp:L.value,tokenInfo:le.value,approvalActions:ne.value,bptInValid:x.value,relayerSignature:V.value,transactionDeadline:M.value,toInternalBalance:oe.value},null,2)}}})}return Se(t,o=>{h.value="",p.setExitHandler(G.value),o||We()}),$e(()=>{C([...xe.value,s.value.address]),p.setExitHandler(G.value),t.value||We()}),Ye(()=>{r.value=!0}),{txState:w,singleAmountOut:i,highPriceImpactAccepted:g,bptIn:h,bptInValid:x,pool:s,isSingleAssetExit:de(t),propAmountsOut:de(O),priceImpact:de(c),priceImpactValid:de(v),exitPoolService:p,exitTokenAddresses:xe,exitTokens:pt,isLoadingQuery:E,isLoadingMax:ge,highPriceImpact:Ve,rektPriceImpact:mt,hasAcceptedHighPriceImpact:vt,txInProgress:d,queryError:ie,maxError:ue,amountsOut:Y,validAmounts:Ce,hasAmountsOut:ft,bptBalance:b,hasBpt:Re,fiatTotalOut:gt,fiatValueIn:ht,fiatAmountsOut:Ne,exitTokenInfo:le,queryExitQuery:F,approvalActions:ne,transactionDeadline:M,shouldExitViaInternalBalance:oe,isTxPayloadReady:N,relayerSignature:V,relayerApprovalTx:A,shouldUseSwapExit:he,canSwapExit:Me,shouldUseRecoveryExit:Le,setIsSingleAssetExit:kt,exit:bt}},lt=Symbol(Rt.Providers.ExitPool);function wa(s){const u=xa(s);return It(lt,u),u}function se(){return Ct(lt)}const ba={class:"flex justify-between items-center p-4"},ka={class:"flex items-center"},ya={class:"flex flex-col leading-none"},Ia={class:"text-lg font-medium"},Ta={key:0},Aa={class:"flex text-sm text-gray-600 dark:text-gray-400 max-w-52"},Ba={class:"truncate"},Ea={class:"flex flex-col items-end pl-2 text-right grow font-numeric"},Sa={class:"text-xl font-medium break-words"},$a={class:"text-sm text-gray-600 dark:text-gray-400"},Pa=j({__name:"ProportionalWithdrawalTokenInfo",props:{token:{},weight:{},address:{},fiatAmountOut:{},loading:{type:Boolean},pool:{},value:{}},setup(s){const u=s,{fNum:n}=re(),r=a(()=>Nt(u.pool.tokens,u.address));return(t,c)=>{var h,x,y;const v=yt,g=Be;return l(),R("div",ba,[_("div",ka,[k(v,{address:t.address,class:"mr-2"},null,8,["address"]),_("div",ya,[_("div",Ia,[ae(S(((h=u.token)==null?void 0:h.symbol)||((x=e(r))==null?void 0:x.symbol))+" ",1),!e(Wt)(t.pool.poolType)&&!e(te)(t.pool)&&!e(Ft)(t.pool.poolType)?(l(),R("span",Ta,S(e(n)(t.weight,{style:"percent",maximumFractionDigits:0})),1)):K("",!0)]),_("div",Aa,[_("span",Ba,S((y=u.token)==null?void 0:y.name),1)])])]),_("div",Ea,[t.loading?(l(),m(g,{key:0,class:"w-20 h-12"})):(l(),R(Je,{key:1},[_("span",Sa,S(e(n)(t.value,e(J).token)),1),_("span",$a,S(e(n)(t.fiatAmountOut||"0",e(J).fiat)),1)],64))])])}}}),Oa={class:"label"},Ma={class:"label"},La={class:"token-amounts"},Va=j({__name:"ProportionalWithdrawalInput",props:{pool:{}},setup(s){const u=s,n=pe({val:1e3,max:1e3,min:0,interval:1}),{bptIn:r,bptInValid:t,bptBalance:c,hasBpt:v,isLoadingQuery:g,exitTokens:h,propAmountsOut:x,exitTokenInfo:y,fiatAmountsOut:i,fiatTotalOut:O}=se(),{t:N}=_e(),p=a(()=>({modelValue:n.val,max:n.max,interval:n.interval,min:n.min,tooltip:"none",disabled:!v.value}));function U(T){var d;const w=T/n.max*1e4;r.value=q(c.value).times(w).div(1e4).toFixed(((d=u.pool.onchain)==null?void 0:d.decimals)||18)}function C(T){const d=q(T).div(c.value).times(100).integerValue(Ut.ROUND_CEIL).times(10).toNumber();d>n.max?n.val=n.max:d<n.min?n.val=n.min:n.val=d}function D(T){return h.value.find(w=>Te(w.address,T))}return $e(()=>{r.value=c.value}),(T,w)=>(l(),R("div",null,[_("div",Oa,S(e(N)("youProvide")),1),k(nt,{amount:e(r),"onUpdate:amount":[w[0]||(w[0]=d=>me(r)?r.value=d:null),C],isValid:e(t),"onUpdate:isValid":w[1]||(w[1]=d=>me(t)?t.value=d:null),address:T.pool.address,name:T.pool.address,class:"mb-4",fixedToken:"",slider:"",sliderProps:p.value,tokenValue:e(O),"onUpdate:slider":U},null,8,["amount","isValid","address","name","sliderProps","tokenValue"]),_("div",Ma,S(e(N)("youReceive")),1),_("div",La,[(l(!0),R(Je,null,Ht(e(x),({address:d,value:M})=>{var L;return l(),m(Pa,{key:d,token:e(Ae)(e(y),d),weight:((L=D(d))==null?void 0:L.weight)||"0",address:d,fiatAmountOut:e(Ae)(e(i),d),loading:e(g),pool:T.pool,value:M,class:"last:mb-0"},null,8,["token","weight","address","fiatAmountOut","loading","pool","value"])}),128))])]))}});const Ra=Ze(Va,[["__scopeId","data-v-46fd109a"]]),Ca={class:"data-table"},Na={class:"p-2"},Wa={class:"data-table-number-col"},Fa={class:"flex items-center"},Ha={key:1},Ua={key:2},Da=j({__name:"WithdrawTotals",setup(s){const{fNum:u}=re(),{priceImpact:n,priceImpactValid:r,highPriceImpact:t,isLoadingQuery:c}=se(),v=a(()=>({"bg-red-500 dark:bg-red-500 text-white divide-red-400 border-none":t.value}));return(g,h)=>{const x=Be,y=Xe,i=ot;return l(),R("div",Ca,[_("div",{class:Dt(["data-table-row",e(v),"dark:bg-gray-800"])},[_("div",Na,S(g.$t("priceImpact")),1),_("div",Wa,[_("div",Fa,[e(c)?(l(),m(x,{key:0,class:"w-10 h-6"})):e(r)?(l(),R("span",Ua,S(e(u)(e(n),e(J).percent)),1)):(l(),R("span",Ha,"-")),k(i,{text:g.$t("withdraw.tooltips.priceImpact")},{activator:P(()=>[e(t)?(l(),m(y,{key:0,name:"alert-triangle",size:"xs",class:"-mb-px ml-1"})):(l(),m(y,{key:1,name:"info",size:"xs",class:"-mb-px ml-1 text-gray-400"}))]),_:1},8,["text"])])])],2)])}}});const Qa=Ze(Da,[["__scopeId","data-v-b645fdaf"]]),qa=j({__name:"WithdrawSummary",props:{pool:{},fiatTotal:{},priceImpact:{}},setup(s){const{fNum:u}=re(),{currency:n}=ze();return(r,t)=>{const c=ot,v=ca,g=da;return l(),m(g,{title:r.$t("summary")},{default:P(()=>[k(v,{label:r.$t("total")},{value:P(()=>[ae(S(e(u)(r.fiatTotal,e(J).fiat))+" ",1),k(c,{text:r.$t("tooltips.withdraw.total",[e(n).toUpperCase()]),iconSize:"sm",class:"ml-2"},null,8,["text"])]),_:1},8,["label"]),k(v,{label:r.$t("priceImpact")},{value:P(()=>[ae(S(e(u)(r.priceImpact,e(J).percent))+" ",1),k(c,{text:r.$t("tooltips.withdraw.priceImpact"),iconSize:"sm",width:"72",class:"ml-2"},null,8,["text"])]),_:1},8,["label"])]),_:1},8,["title"])}}}),ja={key:1},Ga=j({__name:"WithdrawActions",props:{pool:{}},emits:["success","error"],setup(s,{emit:u}){const n=s,r=u,{t}=_e(),{blockNumber:c,isMismatchedNetwork:v}=Ee(),{addTransaction:g}=Qt(),{poolWeightsLabel:h}=et(fe(n,"pool")),{networkSlug:x}=Pe(),{fNum:y}=re(),{txState:i,txInProgress:O,exit:N,isLoadingQuery:p,queryExitQuery:U,fiatTotalOut:C,approvalActions:D,relayerApprovalTx:T,shouldExitViaInternalBalance:w,isTxPayloadReady:d,relayerSignature:M}=se(),L={label:t("withdraw.label"),loadingLabel:t("withdraw.preview.loadingLabel.withdraw"),confirmingLabel:t("confirming"),action:ee,stepTooltip:t("withdraw.preview.tooltips.withdrawStep")},Z=$([...D.value,L]),Q=a(()=>w.value?t("manageVaultBalances"):t("returnToPool")),V=a(()=>w.value?t("transactionSummary.withdrawToBalance",[y(C.value,J.fiat)]):t("transactionSummary.withdrawFromPool",[y(C.value,J.fiat),h(n.pool)])),f=a(()=>!d.value&&(!!M.value||T.isUnlocked.value));async function A(b,F){i.confirmed=!0,i.confirming=!1,i.receipt=b,i.confirmedAt=F,r("success",b)}function X(){i.confirming=!1,r("error")}async function ee(){try{const b=await N();return i.confirming=!0,g({id:b.hash,type:"tx",action:"withdraw",summary:V.value,details:{total:y(C.value,J.fiat),pool:n.pool}}),b}catch(b){throw i.confirming=!1,new Error("Failed to submit withdrawal transaction.",{cause:b})}finally{i.init=!1}}const W=a(()=>w.value?{name:"balances",params:{networkSlug:x}}:{name:"pool",params:{networkSlug:x,id:n.pool.id}});return Se(c,()=>{!p.value&&!O.value&&U.refetch()}),(b,F)=>{const I=pa,E=tt;return l(),R("div",null,[k(Qe,null,{default:P(()=>[!e(i).confirmed||!e(i).receipt?(l(),m(I,{key:0,actions:Z.value,primaryActionType:"withdraw",disabled:e(v),isLoading:e(f),loadingLabel:e(f)?b.$t("withdraw.preview.loadingLabel.building"):void 0,onSuccess:A,onFailed:X},null,8,["actions","disabled","isLoading","loadingLabel"])):(l(),R("div",ja,[k(ma,{txReceipt:e(i).receipt},null,8,["txReceipt"]),k(E,{tag:"router-link",to:e(W),color:"gray",outline:"",block:"",class:"mt-2"},{default:P(()=>[ae(S(e(Q)),1)]),_:1},8,["to"])]))]),_:1}),k(Qe,{name:"pop"},{default:P(()=>[e(i).confirming||e(i).confirmed?(l(),m(va,{key:0,class:"mt-3"})):K("",!0)]),_:1})])}}}),za={class:"flex items-center"},Ka=j({__name:"WithdrawPreviewModal",props:{pool:{}},emits:["close"],setup(s,{emit:u}){const n=s,r=u,t=$(!1),{t:c}=_e(),{getToken:v}=ve(),{networkSlug:g}=Pe(),h=at(),{bptIn:x,fiatValueIn:y,fiatTotalOut:i,amountsOut:O,priceImpact:N,fiatAmountsOut:p,isSingleAssetExit:U,shouldExitViaInternalBalance:C,hasBpt:D}=se(),T=a(()=>t.value?c("withdraw.preview.titles.confirmed"):c("withdraw.preview.titles.default")),w=a(()=>!U.value),d=a(()=>({[n.pool.address]:x.value})),M=a(()=>({[n.pool.address]:v(n.pool.address)})),L=a(()=>({[n.pool.address]:y.value})),Z=a(()=>{const f={};return O.value.forEach(A=>{f[A.address]=v(A.address)}),f}),Q=a(()=>{const f={};return O.value.forEach(A=>{f[A.address]=A.value}),f});function V(){D.value?r("close"):h.push({name:"pool",params:{networkSlug:g,id:n.pool.id}})}return(f,A)=>{const X=Xe,ee=ua,W=qt("router-link"),b=st,F=jt;return l(),m(F,{show:"",fireworks:t.value,onClose:V},{header:P(()=>[_("div",za,[t.value?(l(),m(ee,{key:0,size:"8",color:"green",class:"mr-2 text-white"},{default:P(()=>[k(X,{name:"check"})]),_:1})):K("",!0),_("h4",null,S(T.value),1)])]),default:P(()=>[e(C)?(l(),m(b,{key:0,type:"warning",title:f.$t("alerts.withdrawToInternalBalance.title"),class:"mb-4"},{default:P(()=>[ae(S(f.$t("alerts.withdrawToInternalBalance.description"))+" ",1),k(W,{class:"underline",to:{name:"balances",params:{networkSlug:e(g)}},target:"_blank"},{default:P(()=>[ae("Vault balances page")]),_:1},8,["to"])]),_:1},8,["title"])):K("",!0),w.value?(l(),m(Ge,{key:1,title:f.$t("investment.preview.titles.tokenIn"),amountMap:d.value,tokenMap:M.value,fiatAmountMap:L.value,fiatTotal:e(y)},null,8,["title","amountMap","tokenMap","fiatAmountMap","fiatTotal"])):K("",!0),k(Ge,{title:f.$t("investment.preview.titles.tokenOut"),class:"mt-4",amountMap:Q.value,tokenMap:Z.value,fiatAmountMap:e(p),fiatTotal:e(i)},null,8,["title","amountMap","tokenMap","fiatAmountMap","fiatTotal"]),k(qa,{pool:f.pool,fiatTotal:e(i),priceImpact:e(N),class:"mt-4"},null,8,["pool","fiatTotal","priceImpact"]),k(Ga,{pool:f.pool,class:"mt-4",onError:A[0]||(A[0]=I=>f.$emit("close")),onSuccess:A[1]||(A[1]=I=>t.value=!0)},null,8,["pool"])]),_:1},8,["fireworks"])}}}),Ya={"data-testid":"withdraw-form"},Ja={key:2,class:"p-2 pb-2 mt-4 rounded-lg border dark:border-gray-700"},Za={class:"mt-4"},Xa=j({__name:"WithdrawForm",props:{pool:{}},setup(s){const u=s,n=fe(u,"pool"),r=$(!1),{t}=_e(),{veBalTokenInfo:c}=Gt(),{wrappedNativeAsset:v,nativeAsset:g}=ve(),h=at(),{networkSlug:x}=Pe(),{isWalletReady:y,startConnectWithInjectedProvider:i,isMismatchedNetwork:O}=Ee(),{isSingleAssetExit:N,singleAmountOut:p,isLoadingMax:U,queryError:C,maxError:D,isLoadingQuery:T,highPriceImpact:w,highPriceImpactAccepted:d,hasAcceptedHighPriceImpact:M,hasAmountsOut:L,validAmounts:Z,hasBpt:Q,shouldUseRecoveryExit:V,canSwapExit:f}=se(),{isWrappedNativeAssetPool:A}=et(n),X=a(()=>[ta(p.max,t("exceedsPoolBalance"))]),ee=a(()=>Z.value&&M.value),W=a(()=>zt(n.value)),b=a(()=>!V.value&&f.value?[]:A.value?[g.address,...W.value]:W.value),F=a(()=>{const I=[n.value.address];return c.value&&I.unshift(c.value.address),I});return $e(()=>{Q.value||h.push({name:"pool",params:{networkSlug:x,id:u.pool.id}}),p.address=b.value.length===0?v.value.address:W.value[0]}),(I,E)=>{const ie=ea,ge=st,ue=tt;return l(),R("div",Ya,[e(N)?(l(),m(nt,{key:1,isValid:e(p).valid,"onUpdate:isValid":E[0]||(E[0]=H=>e(p).valid=H),address:e(p).address,"onUpdate:address":E[1]||(E[1]=H=>e(p).address=H),amount:e(p).value,"onUpdate:amount":E[2]||(E[2]=H=>e(p).value=H),name:e(p).address,rules:e(X),customBalance:e(p).max||"0",balanceLabel:I.$t("max"),balanceLoading:e(U),disableNativeAssetBuffer:"",excludedTokens:e(F),tokenSelectProps:{ignoreBalances:!0,subsetTokens:e(b)},ignoreWalletBalance:""},null,8,["isValid","address","amount","name","rules","customBalance","balanceLabel","balanceLoading","excludedTokens","tokenSelectProps"])):(l(),m(Ra,{key:0,pool:e(n)},null,8,["pool"])),k(Qa,{class:"mt-4"}),e(w)?(l(),R("div",Ja,[k(ie,{modelValue:e(d),"onUpdate:modelValue":E[3]||(E[3]=H=>me(d)?d.value=H:null),rules:[e(aa)(I.$t("priceImpactCheckbox"))],name:"highPriceImpactAccepted",size:"sm",label:I.$t("priceImpactAccept",[I.$t("withdrawing")])},null,8,["modelValue","rules","label"])])):K("",!0),e(C)||e(D)?(l(),m(ge,{key:3,type:"error",title:I.$t("thereWasAnError"),description:e(C)||e(D),class:"mt-4",block:""},null,8,["title","description"])):K("",!0),_("div",Za,[e(y)?(l(),m(ue,{key:1,label:I.$t("preview"),color:"gradient",disabled:!e(L)||!e(ee)||e(O)||e(T)||e(U),block:"",onClick:E[4]||(E[4]=H=>r.value=!0)},null,8,["label","disabled"])):(l(),m(ue,{key:0,label:I.$t("connectWallet"),color:"gradient",block:"",onClick:e(i)},null,8,["label","onClick"]))]),(l(),m(Kt,{to:"#modal"},[e(r)?(l(),m(Ka,{key:0,pool:e(n),onClose:E[5]||(E[5]=H=>r.value=!1)},null,8,["pool"])):K("",!0)]))])}}});var rt=(s=>(s[s.PoolTokens=0]="PoolTokens",s[s.SingleToken=1]="SingleToken",s))(rt||{});const Oe=[{value:0,label:qe.global.t("withdraw.tabs.poolTokens")},{value:1,label:qe.global.t("withdraw.tabs.singleToken")}],it=$(Oe[0].value);function es(){it.value=Oe[0].value}function ut(){return{activeTab:it,resetTabs:es}}const ts=j({__name:"WithdrawPageTabs",setup(s){const{activeTab:u}=ut(),{setIsSingleAssetExit:n}=se();return Se(u,r=>{n(r===rt.SingleToken)}),(r,t)=>{const c=ga;return l(),m(c,{modelValue:e(u),"onUpdate:modelValue":t[0]||(t[0]=v=>me(u)?u.value=v:null),tabs:e(Oe),class:"p-0 m-0 -mb-px whitespace-nowrap",noPad:""},null,8,["modelValue","tabs"])}}}),as={class:"w-full"},ss={class:"text-xs leading-none text-secondary"},ns={class:"flex justify-between items-center"},os=j({__name:"WithdrawPage",props:{pool:{}},setup(s){const n=fe(s,"pool");wa(n);const{network:r}=Jt,{resetTabs:t}=ut();return Ye(()=>t()),(c,v)=>{const g=Yt;return l(),m(g,{shadow:"xl",exposeOverflow:"",noBorder:""},{header:P(()=>[_("div",as,[_("div",ss,S(e(r).chainName),1),_("div",ns,[_("h4",null,S(c.$t("withdrawFromPool")),1),k(_a,{context:e(fa).invest},null,8,["context"])]),e(Ke)(e(n))?K("",!0):(l(),m(ts,{key:0}))])]),default:P(()=>[k(Xa,{pool:e(n)},null,8,["pool"])]),_:1})}}}),ls={class:"px-4 sm:px-0 mx-auto max-w-md"},Cs=j({__name:"withdraw",setup(s){const{pool:u,isLoadingPool:n,refetchOnchainPoolData:r}=ha(),{balanceQueryLoading:t}=ve();Zt(r,Xt*20);const c=a(()=>n.value||t.value);return(v,g)=>{const h=Be;return l(),R("div",ls,[e(c)||!e(u)?(l(),m(h,{key:0,class:"h-96"})):(l(),m(os,{key:1,pool:e(u)},null,8,["pool"]))])}}});export{Cs as default};
//# sourceMappingURL=withdraw-fa4f63e8.js.map
