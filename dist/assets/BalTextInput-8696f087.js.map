{"version":3,"file":"BalTextInput-8696f087.js","sources":["../../src/components/_global/BalTextInput/composables/useInputEvents.ts","../../src/components/_global/BalTextInput/composables/useInputStyles.ts","../../src/components/_global/BalTextInput/composables/useInputValidation.ts","../../src/components/_global/BalTextInput/BalTextInput.vue"],"sourcesContent":["import { overflowProtected } from '@/components/_global/BalTextInput/helpers';\n/**\n * HELPERS\n */\nfunction blockInvalidChar(event: KeyboardEvent): void {\n  ['e', 'E', '+', '-'].includes(event.key) && event.preventDefault();\n}\n\nexport default function useInputEvents(props, emit, validate) {\n  /**\n   * STATE\n   */\n  const isActive = ref(false);\n  const isHover = ref(false);\n  /**\n   * EVENTS\n   */\n\n  function onBlur(event: FocusEvent) {\n    if (event.target) {\n      const value = (event.target as HTMLInputElement).value;\n      emit('blur', value);\n      isActive.value = false;\n      if (props.validateOn === 'blur') validate(value);\n    }\n  }\n\n  function onInput(event: Event): void {\n    if (event.target) {\n      let value = (event.target as HTMLInputElement).value;\n      if (props.type === 'number') {\n        const overflowProtectedVal = overflowProtected(\n          value,\n          props.decimalLimit\n        );\n        if (overflowProtectedVal !== value) value = overflowProtectedVal;\n      }\n      isActive.value = true;\n      emit('input', value);\n      emit('update:modelValue', value);\n    }\n  }\n\n  function onClick(event: MouseEvent) {\n    isActive.value = true;\n    emit('click', event);\n  }\n\n  function onFocus(event: FocusEvent) {\n    isActive.value = true;\n    emit('focus', event);\n  }\n  function onMouseOver(event: MouseEvent) {\n    isHover.value = true;\n    emit('mouseOver', event);\n  }\n  function onMouseLeave(event: MouseEvent) {\n    isHover.value = false;\n    emit('mouseLeave', event);\n  }\n\n  function onKeydown(event: KeyboardEvent): void {\n    if (props.type === 'number') {\n      blockInvalidChar(event);\n    }\n    emit('keydown', event);\n  }\n\n  return {\n    isActive,\n    isHover,\n    onBlur,\n    onInput,\n    onKeydown,\n    onClick,\n    onFocus,\n    onMouseOver,\n    onMouseLeave,\n  };\n}\n","export default function useInputStyles(\n  props,\n  isInvalid: Ref<boolean>,\n  isActive: Ref<boolean>,\n  isHover: Ref<boolean>,\n  attrs\n) {\n  const extPaddingClass = (): string => {\n    switch (props.size) {\n      case 'xs':\n        return 'p-1';\n      case 'sm':\n        return 'p-1';\n      case 'lg':\n        return 'p-3';\n      default:\n        return 'p-2';\n    }\n  };\n\n  const intPaddingClass = (): string => {\n    switch (props.size) {\n      case 'xs':\n        return 'p-px';\n      case 'sm':\n        return 'p-px';\n      case 'lg':\n        return 'p-2';\n      default:\n        return 'p-1';\n    }\n  };\n\n  const inputTextSize = (): string => {\n    switch (props.size) {\n      case 'xs':\n        return 'text-base';\n      case 'sm':\n        return 'text-base';\n      case 'lg':\n        return 'text-2xl';\n      default:\n        return 'text-xl';\n    }\n  };\n\n  const inputHeightClass = (): string => {\n    switch (props.size) {\n      case 'xs':\n        return 'h-6';\n      case 'sm':\n        return 'h-8';\n      case 'lg':\n        return 'h-12';\n      case 'auto':\n        return 'h-auto';\n      default:\n        return 'h-10';\n    }\n  };\n\n  const parentClasses = computed(() => ({\n    [attrs.class]: true,\n    'rounded-lg': !props.noShadow,\n    'shadow-lg': !props.noShadow && !props.disabled,\n  }));\n\n  const inputContainerClasses = computed(() => ({\n    'bg-white dark:bg-gray-800': !props.disabled,\n    'bg-gray-100 dark:bg-gray-800': props.disabled,\n    [extPaddingClass()]: true,\n    border: !props.noBorder,\n    'border-gray-100 dark:border-gray-800': !isInvalid.value && !isActive.value,\n    'border-red-500 dark:border-red-500': isInvalid.value,\n    'border-blue-300 dark:border-blue-400': isActive.value && !isInvalid.value,\n    'hover:border-gray-300 dark:hover:border-gray-700':\n      isHover.value && !isActive.value && !props.disabled,\n    'shadow-inner': !props.noShadow && !props.disabled,\n  }));\n\n  const inputGroupClasses = computed(() => ({\n    [intPaddingClass()]: true,\n  }));\n\n  const headerClasses = computed(() => ({\n    [intPaddingClass()]: true,\n  }));\n\n  const footerClasses = computed(() => ({\n    [intPaddingClass()]: true,\n  }));\n\n  const inputClasses = computed(() => ({\n    [inputHeightClass()]: true,\n    [inputTextSize()]: true,\n    'text-right': props.inputAlignRight,\n    'font-numeric': props.type === 'number',\n    'text-red-500': isInvalid.value,\n    'cursor-not-allowed': props.disabled,\n  }));\n\n  const prependClasses = computed(() => ({\n    [inputHeightClass()]: true,\n  }));\n\n  const appendClasses = computed(() => ({\n    [inputHeightClass()]: true,\n  }));\n\n  const borderRadiusClasses = computed(() => ({\n    'rounded-lg': !props.noRadius,\n  }));\n\n  return {\n    parentClasses,\n    inputContainerClasses,\n    inputGroupClasses,\n    headerClasses,\n    footerClasses,\n    inputClasses,\n    prependClasses,\n    appendClasses,\n    borderRadiusClasses,\n  };\n}\n","import { RuleFunction } from '@/types';\n\nexport default function useInputValidation(props, emit) {\n  /**\n   * STATE\n   */\n  const errors = ref<string[]>([]);\n\n  /**\n   * COMPUTED\n   */\n  const isInvalid = computed(() => errors.value.length > 0);\n\n  /**\n   * METHODS\n   */\n  function validate(val: string | number): void {\n    errors.value = [];\n    props.rules.forEach((rule: RuleFunction) => {\n      const result = rule(val);\n      if (typeof result === 'string') errors.value.push(result);\n    });\n  }\n\n  /**\n   * WATCHERS\n   */\n  watchEffect(() => {\n    if (props.validateOn === 'input') validate(props.modelValue);\n  });\n\n  watch(\n    isInvalid,\n    newVal => {\n      emit('update:isValid', !newVal);\n    },\n    { immediate: true }\n  );\n\n  return {\n    errors,\n    isInvalid,\n    validate,\n  };\n}\n","<script lang=\"ts\">\n// https://v3.vuejs.org/api/sfc-script-setup.html#usage-alongside-normal-script\nexport default {\n  inheritAttrs: false,\n};\n</script>\n\n<script setup lang=\"ts\">\nimport { omit } from 'lodash';\n\nimport { Rules } from '@/types';\n\nimport useInputEvents from './composables/useInputEvents';\nimport useInputStyles from './composables/useInputStyles';\nimport useInputValidation from './composables/useInputValidation';\n\nimport { InputValue, InputType, InputSize, ValidationTrigger } from './types';\n\ntype Props = {\n  name: string;\n  modelValue: InputValue;\n  isValid?: boolean;\n  type?: InputType;\n  size?: InputSize;\n  disabled?: boolean;\n  label?: string;\n  inputAlignRight?: boolean;\n  decimalLimit?: number;\n  validateOn?: ValidationTrigger;\n  rules?: Rules;\n  noRadius?: boolean;\n  noShadow?: boolean;\n  noBorder?: boolean;\n  autoFocus?: boolean;\n  format?: (input: string | number) => string | number;\n};\n\n/**\n * PROPS & EMITS\n */\nconst props = withDefaults(defineProps<Props>(), {\n  type: 'text',\n  modelValue: '',\n  isValid: true,\n  size: 'md',\n  disabled: false,\n  inputAlignRight: false,\n  decimalLimit: 18,\n  validateOn: 'blur',\n  rules: () => [],\n  noRadius: false,\n  noShadow: false,\n  noBorder: false,\n  autoFocus: false,\n});\n\nconst emit = defineEmits<{\n  (e: 'blur', value: string): void;\n  (e: 'input', value: string): void;\n  (e: 'update:modelValue', value: string): void;\n  (e: 'update:isValid', value: boolean): void;\n  (e: 'keydown', value: KeyboardEvent);\n  (e: 'mouseOver', value: Event);\n  (e: 'mouseLeave', value: Event);\n  (e: 'focus', value: Event);\n}>();\n\n/**\n * STATE\n */\nconst textInput = ref<HTMLInputElement>();\n\n/**\n * COMPOSABLES\n */\nconst attrs = useAttrs();\nconst { errors, isInvalid, validate } = useInputValidation(props, emit);\nconst {\n  isActive,\n  isHover,\n  onInput,\n  onKeydown,\n  onBlur,\n  onClick,\n  onFocus,\n  onMouseOver,\n  onMouseLeave,\n} = useInputEvents(props, emit, validate);\nconst {\n  parentClasses,\n  inputContainerClasses,\n  inputGroupClasses,\n  headerClasses,\n  footerClasses,\n  inputClasses,\n  prependClasses,\n  appendClasses,\n  borderRadiusClasses,\n} = useInputStyles(props, isInvalid, isActive, isHover, attrs);\n\n/**\n * COMPUTED\n */\n// We don't want to pass on parent level classes to the html\n// input element. So we need to remove it from the attrs object.\nconst inputAttrs = computed(() => omit(attrs, 'class'));\n\n/**\n * LIFECYCLE\n */\nonMounted(() => {\n  if (props.autoFocus) {\n    textInput.value?.focus();\n  }\n});\n</script>\n\n<template>\n  <div :class=\"['bal-text-input', parentClasses, borderRadiusClasses]\">\n    <div\n      :class=\"['input-container', inputContainerClasses, borderRadiusClasses]\"\n      @mouseover=\"onMouseOver\"\n      @mouseleave=\"onMouseLeave\"\n    >\n      <div v-if=\"$slots.header || label\" :class=\"['header', headerClasses]\">\n        <slot name=\"header\">\n          <span class=\"label text-secondary\">\n            {{ label }}\n          </span>\n        </slot>\n      </div>\n      <div :class=\"['input-group', inputGroupClasses]\">\n        <div v-if=\"$slots.prepend\" :class=\"['prepend', prependClasses]\">\n          <slot name=\"prepend\" />\n        </div>\n        <input\n          ref=\"textInput\"\n          :type=\"type\"\n          :name=\"name\"\n          :value=\"modelValue\"\n          v-bind=\"inputAttrs\"\n          :disabled=\"disabled\"\n          :class=\"['input', inputClasses]\"\n          @blur=\"onBlur\"\n          @input=\"onInput\"\n          @keydown=\"onKeydown\"\n          @click=\"onClick\"\n          @focus=\"onFocus\"\n        />\n        <div v-if=\"$slots.append\" :class=\"['append', appendClasses]\">\n          <slot name=\"append\" />\n        </div>\n      </div>\n      <div v-if=\"$slots.footer\" :class=\"['footer', footerClasses]\">\n        <slot name=\"footer\" />\n      </div>\n      <div v-if=\"isInvalid && !!errors[0]\" :class=\"['error']\">\n        {{ errors[0] }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.input-container {\n  @apply transition-colors;\n}\n\n.input-group {\n  @apply flex;\n}\n\n.input {\n  @apply grow bg-transparent overflow-hidden w-full;\n}\n\n.label {\n  @apply text-sm;\n}\n\n.error {\n  @apply text-xs text-red-500 mt-1 ml-1;\n}\n</style>\n"],"names":["blockInvalidChar","event","useInputEvents","props","emit","validate","isActive","ref","isHover","onBlur","value","onInput","overflowProtectedVal","overflowProtected","onClick","onFocus","onMouseOver","onMouseLeave","onKeydown","useInputStyles","isInvalid","attrs","extPaddingClass","intPaddingClass","inputTextSize","inputHeightClass","parentClasses","computed","inputContainerClasses","inputGroupClasses","headerClasses","footerClasses","inputClasses","prependClasses","appendClasses","borderRadiusClasses","useInputValidation","errors","val","rule","result","watchEffect","watch","newVal","__default__","__props","__emit","textInput","useAttrs","inputAttrs","omit","onMounted","_a"],"mappings":"0MAIA,SAAAA,EAAAC,EAAA,CACE,CAAA,IAAA,IAAA,IAAA,GAAA,EAAA,SAAAA,EAAA,GAAA,GAAAA,EAAA,eAAA,CACF,CAEA,SAAAC,EAAAC,EAAAC,EAAAC,EAAA,CAIE,MAAAC,EAAAC,EAAA,EAAA,EACAC,EAAAD,EAAA,EAAA,EAKA,SAAAE,EAAAR,EAAA,CACE,GAAAA,EAAA,OAAA,CACE,MAAAS,EAAAT,EAAA,OAAA,MACAG,EAAA,OAAAM,CAAA,EACAJ,EAAA,MAAA,GACAH,EAAA,aAAA,QAAiCE,EAAAK,CAAA,CAAc,CACjD,CAGF,SAAAC,EAAAV,EAAA,CACE,GAAAA,EAAA,OAAA,CACE,IAAAS,EAAAT,EAAA,OAAA,MACA,GAAAE,EAAA,OAAA,SAAA,CACE,MAAAS,EAAAC,EAA6BH,EAC3BP,EAAA,YACM,EAERS,IAAAF,IAAoCA,EAAAE,EAAQ,CAE9CN,EAAA,MAAA,GACAF,EAAA,QAAAM,CAAA,EACAN,EAAA,oBAAAM,CAAA,CAA+B,CACjC,CAGF,SAAAI,EAAAb,EAAA,CACEK,EAAA,MAAA,GACAF,EAAA,QAAAH,CAAA,CAAmB,CAGrB,SAAAc,EAAAd,EAAA,CACEK,EAAA,MAAA,GACAF,EAAA,QAAAH,CAAA,CAAmB,CAErB,SAAAe,EAAAf,EAAA,CACEO,EAAA,MAAA,GACAJ,EAAA,YAAAH,CAAA,CAAuB,CAEzB,SAAAgB,EAAAhB,EAAA,CACEO,EAAA,MAAA,GACAJ,EAAA,aAAAH,CAAA,CAAwB,CAG1B,SAAAiB,EAAAjB,EAAA,CACEE,EAAA,OAAA,UACEH,EAAAC,CAAA,EAEFG,EAAA,UAAAH,CAAA,CAAqB,CAGvB,MAAA,CAAO,SAAAK,EACL,QAAAE,EACA,OAAAC,EACA,QAAAE,EACA,UAAAO,EACA,QAAAJ,EACA,QAAAC,EACA,YAAAC,EACA,aAAAC,CACA,CAEJ,CC/EA,SAAAE,EAAAhB,EAAAiB,EAAAd,EAAAE,EAAAa,EAAA,CAOE,MAAAC,EAAA,IAAA,CACE,OAAAnB,EAAA,KAAA,CAAoB,IAAA,KAEhB,MAAA,MAAO,IAAA,KAEP,MAAA,MAAO,IAAA,KAEP,MAAA,MAAO,QAEP,MAAA,KAAO,CACX,EAGFoB,EAAA,IAAA,CACE,OAAApB,EAAA,KAAA,CAAoB,IAAA,KAEhB,MAAA,OAAO,IAAA,KAEP,MAAA,OAAO,IAAA,KAEP,MAAA,MAAO,QAEP,MAAA,KAAO,CACX,EAGFqB,EAAA,IAAA,CACE,OAAArB,EAAA,KAAA,CAAoB,IAAA,KAEhB,MAAA,YAAO,IAAA,KAEP,MAAA,YAAO,IAAA,KAEP,MAAA,WAAO,QAEP,MAAA,SAAO,CACX,EAGFsB,EAAA,IAAA,CACE,OAAAtB,EAAA,KAAA,CAAoB,IAAA,KAEhB,MAAA,MAAO,IAAA,KAEP,MAAA,MAAO,IAAA,KAEP,MAAA,OAAO,IAAA,OAEP,MAAA,SAAO,QAEP,MAAA,MAAO,CACX,EAGFuB,EAAAC,EAAA,KAAA,CAAsC,CAAAN,EAAA,KAAA,EAAA,GACrB,aAAA,CAAAlB,EAAA,SACM,YAAA,CAAAA,EAAA,UAAA,CAAAA,EAAA,QACkB,EAAA,EAGzCyB,EAAAD,EAAA,KAAA,CAA8C,4BAAA,CAAAxB,EAAA,SACR,+BAAAA,EAAA,SACE,CAAAmB,EAAA,CAAA,EAAA,GACjB,OAAA,CAAAnB,EAAA,SACN,uCAAA,CAAAiB,EAAA,OAAA,CAAAd,EAAA,MACuD,qCAAAc,EAAA,MACtB,uCAAAd,EAAA,OAAA,CAAAc,EAAA,MACqB,mDAAAZ,EAAA,OAAA,CAAAF,EAAA,OAAA,CAAAH,EAAA,SAExB,eAAA,CAAAA,EAAA,UAAA,CAAAA,EAAA,QACH,EAAA,EAG5C0B,EAAAF,EAAA,KAAA,CAA0C,CAAAJ,EAAA,CAAA,EAAA,EACnB,EAAA,EAGvBO,EAAAH,EAAA,KAAA,CAAsC,CAAAJ,EAAA,CAAA,EAAA,EACf,EAAA,EAGvBQ,EAAAJ,EAAA,KAAA,CAAsC,CAAAJ,EAAA,CAAA,EAAA,EACf,EAAA,EAGvBS,EAAAL,EAAA,KAAA,CAAqC,CAAAF,EAAA,CAAA,EAAA,GACb,CAAAD,EAAA,CAAA,EAAA,GACH,aAAArB,EAAA,gBACC,eAAAA,EAAA,OAAA,SACW,eAAAiB,EAAA,MACL,qBAAAjB,EAAA,QACE,EAAA,EAG9B8B,EAAAN,EAAA,KAAA,CAAuC,CAAAF,EAAA,CAAA,EAAA,EACf,EAAA,EAGxBS,EAAAP,EAAA,KAAA,CAAsC,CAAAF,EAAA,CAAA,EAAA,EACd,EAAA,EAGxBU,EAAAR,EAAA,KAAA,CAA4C,aAAA,CAAAxB,EAAA,QACrB,EAAA,EAGvB,MAAA,CAAO,cAAAuB,EACL,sBAAAE,EACA,kBAAAC,EACA,cAAAC,EACA,cAAAC,EACA,aAAAC,EACA,eAAAC,EACA,cAAAC,EACA,oBAAAC,CACA,CAEJ,CC1HA,SAAAC,EAAAjC,EAAAC,EAAA,CAIE,MAAAiC,EAAA9B,EAAA,CAAA,CAAA,EAKAa,EAAAO,EAAA,IAAAU,EAAA,MAAA,OAAA,CAAA,EAKA,SAAAhC,EAAAiC,EAAA,CACED,EAAA,MAAA,GACAlC,EAAA,MAAA,QAAAoC,GAAA,CACE,MAAAC,EAAAD,EAAAD,CAAA,EACA,OAAAE,GAAA,UAAgCH,EAAA,MAAA,KAAAG,CAAA,CAAwB,CAAA,CACzD,CAMH,OAAAC,EAAA,IAAA,CACEtC,EAAA,aAAA,SAAkCE,EAAAF,EAAA,UAAA,CAAyB,CAAA,EAG7DuC,EAAAtB,EACEuB,GAAA,CAEEvC,EAAA,iBAAA,CAAAuC,CAAA,CAA8B,EAChC,CAAA,UAAA,EAAA,CACkB,EAGpB,CAAO,OAAAN,EACL,UAAAjB,EACA,SAAAf,CACA,CAEJ,6GC1CAuC,GAAA,CAAe,aAAA,EAEf,2kBAoCA,MAAAzC,EAAA0C,EAgBAzC,EAAA0C,EAcAC,EAAAxC,IAKAc,EAAA2B,IACA,CAAA,OAAAX,EAAA,UAAAjB,EAAA,SAAAf,CAAA,EAAA+B,EAAAjC,EAAAC,CAAA,EACA,CAAM,SAAAE,EACJ,QAAAE,EACA,QAAAG,EACA,UAAAO,EACA,OAAAT,EACA,QAAAK,EACA,QAAAC,EACA,YAAAC,EACA,aAAAC,CACA,EAAAf,EAAAC,EAAAC,EAAAC,CAAA,EAEF,CAAM,cAAAqB,EACJ,sBAAAE,EACA,kBAAAC,EACA,cAAAC,EACA,cAAAC,EACA,aAAAC,EACA,eAAAC,EACA,cAAAC,EACA,oBAAAC,CACA,EAAAhB,EAAAhB,EAAAiB,EAAAd,EAAAE,EAAAa,CAAA,EAQF4B,EAAAtB,EAAA,IAAAuB,EAAA,KAAA7B,EAAA,OAAA,CAAA,EAKA,OAAA8B,EAAA,IAAA,OACEhD,EAAA,aACEiD,EAAAL,EAAA,QAAA,MAAAK,EAAA,QACF,CAAA"}